function enteredOrExited(e){return e===Movement.ENTERED||e===Movement.EXITED}function escapeQuotes(e){return'"'+e.replace(/"/,'\\"')+'"'}function validateAttribute(e){if("string"!=typeof e)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(e=e.trim(),!e)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!e.match(attributeFilterPattern))throw Error("Invalid request option. invalid attribute name: "+e);return e}function validateElementAttributes(e){if(!e.trim().length)throw Error("Invalid request option: elementAttributes must contain at least one attribute.");for(var t={},n={},r=e.split(/\s+/),i=0;i<r.length;i++){var o=r[i];if(o){var o=validateAttribute(o),a=o.toLowerCase();if(t[a])throw Error("Invalid request option: observing multiple case variations of the same attribute is not supported.");n[o]=!0,t[a]=!0}}return Object.keys(n)}function elementFilterAttributes(e){var t={};return e.forEach(function(e){e.qualifiers.forEach(function(e){t[e.attrName]=!0})}),Object.keys(t)}!function(e){"use strict";function t(e,t,n,i){var o=Object.create((t||r).prototype),a=new f(i||[]);return o._invoke=c(e,n,a),o}function n(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}function r(){}function i(){}function o(){}function a(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function s(e){this.arg=e}function u(e){function t(r,i,o,a){var u=n(e[r],e,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l instanceof s?Promise.resolve(l.arg).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(l).then(function(e){c.value=e,o(c)},a)}a(u.arg)}function r(e,n){function r(){return new Promise(function(r,i){t(e,n,r,i)})}return i=i?i.then(r,r):r()}"object"==typeof process&&process.domain&&(t=process.domain.bind(t));var i;this._invoke=r}function c(e,t,r){var i=_;return function(o,a){if(i===x)throw new Error("Generator is already running");if(i===C){if("throw"===o)throw a;return p()}for(;;){var s=r.delegate;if(s){if("return"===o||"throw"===o&&s.iterator[o]===v){r.delegate=null;var u=s.iterator["return"];if(u){var c=n(u,s.iterator,a);if("throw"===c.type){o="throw",a=c.arg;continue}}if("return"===o)continue}var c=n(s.iterator[o],s.iterator,a);if("throw"===c.type){r.delegate=null,o="throw",a=c.arg;continue}o="next",a=v;var l=c.arg;if(!l.done)return i=w,l;r[s.resultName]=l.value,r.next=s.nextLoc,r.delegate=null}if("next"===o)i===w?r.sent=a:r.sent=v;else if("throw"===o){if(i===_)throw i=C,a;r.dispatchException(a)&&(o="next",a=v)}else"return"===o&&r.abrupt("return",a);i=x;var c=n(e,t,r);if("normal"===c.type){i=r.done?C:w;var l={value:c.arg,done:r.done};if(c.arg!==E)return l;r.delegate&&"next"===o&&(a=v)}else"throw"===c.type&&(i=C,o="throw",a=c.arg)}}}function l(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function f(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(l,this),this.reset(!0)}function h(e){if(e){var t=e[g];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function i(){for(;++n<e.length;)if(m.call(e,n))return i.value=e[n],i.done=!1,i;return i.value=v,i.done=!0,i};return r.next=r}}return{next:p}}function p(){return{value:v,done:!0}}var v,m=Object.prototype.hasOwnProperty,g="function"==typeof Symbol&&Symbol.iterator||"@@iterator",b="object"==typeof module,y=e.regeneratorRuntime;if(y)return void(b&&(module.exports=y));y=e.regeneratorRuntime=b?module.exports:{},y.wrap=t;var _="suspendedStart",w="suspendedYield",x="executing",C="completed",E={},O=o.prototype=r.prototype;i.prototype=O.constructor=o,o.constructor=i,i.displayName="GeneratorFunction",y.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return t?t===i||"GeneratorFunction"===(t.displayName||t.name):!1},y.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,o):e.__proto__=o,e.prototype=Object.create(O),e},y.awrap=function(e){return new s(e)},a(u.prototype),y.async=function(e,n,r,i){var o=new u(t(e,n,r,i));return y.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},a(O),O[g]=function(){return this},O.toString=function(){return"[object Generator]"},y.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},y.values=h,f.prototype={constructor:f,reset:function(e){if(this.prev=0,this.next=0,this.sent=v,this.done=!1,this.delegate=null,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&m.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=m.call(i,"catchLoc"),s=m.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?this.next=i.finallyLoc:this.complete(o),E},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),d(n),E}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;d(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:h(e),resultName:t,nextLoc:n},E}}}("object"==typeof global?global:"object"==typeof window?window:"object"==typeof self?self:this),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){"use strict";if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r){r=Object(r);for(var i=Object.keys(r),o=0,a=i.length;a>o;o++){var s=i[o],u=Object.getOwnPropertyDescriptor(r,s);void 0!==u&&u.enumerable&&(t[s]=r[s])}}}return t}}),function(e){"use strict";function t(e,t){return l(t).forEach(function(n){y.call(e,n)||c(e,n,d(t,n))}),e}function n(e,t){return e===t?0!==e?!0:1/e===1/t:e!==e&&t!==t}function r(e,t){return!n(e,t)}function i(e,r,i){var o,a;return O&&(o=new WeakMap,a=new WeakMap),i=t(i||{},k),function s(e,t){if(x(e))return n(e,t);if(C(e))return n(e,t);var r,u,c,l,f,h,m,b,y,_,w,f=E(e),h=E(t);if(f!==h)return!1;switch(f){case"[object Array]":case"[object Object]":if(i.extensibility){if(g(e)!==g(t))return!1;if(v(e)!==v(t))return!1;if(p(e)!==p(t))return!1}if(o){if(o.has(e))return a.has(t);o.set(e,!0),a.set(t,!0)}if(c=i.enumerator(e),l=i.enumerator(t),i.filter&&(w=function(e){var t=d(this,e);return i.filter(t,e,this)},c=c.filter(w,e),l=l.filter(w,t)),c.length!=l.length)return!1;for(c.sort(),l.sort(),r=0,u=c.length;u>r;++r){if(m=c[r],b=l[r],m!==b)return!1;if(y=d(e,b),_=d(t,b),"value"in y){if(!s(y.value,_.value))return!1}else{if(y.get&&y.get!==_.get)return!1;if(y.set&&y.set!==_.set)return!1}if(i.descriptors){if(y.enumerable!==_.enumerable)return!1;if(i.extensibility){if(y.writable!==_.writable)return!1;if(y.configurable!==_.configurable)return!1}}}return!0;case"[object RegExp]":case"[object Date]":case"[object String]":case"[object Number]":case"[object Boolean]":return""+e==""+t;default:throw TypeError(f+" not supported")}}(e,r)}function o(e,n,r){var i;return n&&O&&(i=new WeakMap),r=t(r||{},k),function o(e){if(x(e))return e;if(C(e))return e;var t=E(e);switch(t){case"[object Array]":case"[object Object]":if(i){if(i.has(e))return e;i.set(e,!0)}var a=w(e),s=a?[]:u(f(e));return r.enumerator(e).forEach(function(t){if(a&&"length"===t)s.length=e.length;else if(r.descriptors){var i=d(e,t);if(r.filter&&!r.filter(i,t,e))return;n&&"value"in i&&(i.value=o(e[t])),c(s,t,i)}else s[t]=o(e[t])}),r.extensibility&&(g(e)||b(s),v(e)&&m(s),p(e)&&h(s)),s;case"[object RegExp]":case"[object Date]":case"[object String]":case"[object Number]":case"[object Boolean]":return n?new e.constructor(e.valueOf()):e;default:throw TypeError(t+" is not supported")}}(e)}if(!Object.freeze||"function"!=typeof Object.freeze)throw Error("ES5 support required");var a=Object,s=a.prototype,u=a.create,c=a.defineProperty,l=(a.defineProperties,a.getOwnPropertyNames),d=a.getOwnPropertyDescriptor,f=a.getPrototypeOf,h=a.freeze,p=a.isFrozen,v=a.isSealed,m=a.seal,g=a.isExtensible,b=a.preventExtensions,y=s.hasOwnProperty,_=s.toString,w=Array.isArray,x=(Array.prototype.slice,function(e){return e!==Object(e)}),C=function(e){return"function"==typeof e},E=function(e){return _.call(e)},O=function(){try{var e=new WeakMap;return e.set(e,e),e.get(e)===e}catch(t){return!1}}(),k={descriptors:!0,extensibility:!0,enumerator:l},N=function(e){var t=u(null);return l(e).forEach(function(n){t[n]={value:e[n],configurable:!0,writable:!0,enumerable:!1}}),t},S=function(e,t){return l(t).forEach(function(n){y.call(e,n)||c(e,n,t[n])}),e};(Object.installProperties||S)(Object,N({clone:o,is:n,isnt:r,equals:i}))}(this),function(e,t){"use strict";var n=e.prototype,r=n.__lookupGetter__,i=n.__lookupSetter__,o=n.__defineGetter__,a=n.__defineSetter__,s=n.hasOwnProperty,u=[],c=!0,l=function(e){try{return e&&e({},"_",{value:1})._&&e}catch(t){c=!1}}(e.defineProperty)||function(e,t,n){var r=n.get,i=n.set;r&&o&&o.call(e,t,r),i&&a&&a.call(e,t,i),!r&&!i&&(e[t]=n.value)},d=c&&e.getOwnPropertyNames||function(){var e,t,n,r=function(e){return e},i=[];for(e in{valueOf:e})i.push(e);return i.length||(n=i.push("constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf")-1,r=function(r,o){for(t=0;n>t;t++)e=i[t],s.call(o,e)&&r.push(e);return r}),function(e){var t,n=[];for(t in e)s.call(e,t)&&n.push(t);return r(n,e)}}(),f=c&&e.getOwnPropertyDescriptor||function(e,t){var n={enumerable:!0,configurable:!0},o=r&&r.call(e,t),a=i&&i.call(e,t);return o&&(n.get=o),a&&(n.set=a),!o&&!a&&(n.writable=!0,n.value=e[t]),n};e[t]||l(e,t,{enumerable:!1,writable:!0,configurable:!0,value:function(e,t,n){var r,i,o,a;if("function"==typeof t)t.apply(e,n||u);else for(o=d(t),i=o.length,r=0;i>r;)a=o[r++],l(e,a,f(t,a));return e}})}(Object,"mixin"),function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.__tmp9z=e.__tmp9z||{},e.__tmp9z.generator=n.exports}}(this,function(e,t){"use strict";var n={};n.find=regeneratorRuntime.mark(function r(e,t){var n,i,o,a,s,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=!0,i=!1,o=void 0,r.prev=3,a=e[Symbol.iterator]();case 5:if(n=(s=a.next()).done){r.next=13;break}if(u=s.value,!t(u)){r.next=10;break}return r.next=10,u;case 10:n=!0,r.next=5;break;case 13:r.next=19;break;case 15:r.prev=15,r.t0=r["catch"](3),i=!0,o=r.t0;case 19:r.prev=19,r.prev=20,!n&&a["return"]&&a["return"]();case 22:if(r.prev=22,!i){r.next=25;break}throw o;case 25:return r.finish(22);case 26:return r.finish(19);case 27:case"end":return r.stop()}},r,this,[[3,15,19,27],[20,,22,26]])}),n.top=regeneratorRuntime.mark(function i(e,t){var n,r,o,a,s,u,c;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n=0,!(1>t)){i.next=3;break}return i.abrupt("return");case 3:r=!0,o=!1,a=void 0,i.prev=6,s=e[Symbol.iterator]();case 8:if(r=(u=s.next()).done){i.next=18;break}return c=u.value,i.next=12,c;case 12:if(n+=1,!(n>=t)){i.next=15;break}return i.abrupt("return");case 15:r=!0,i.next=8;break;case 18:i.next=24;break;case 20:i.prev=20,i.t0=i["catch"](6),o=!0,a=i.t0;case 24:i.prev=24,i.prev=25,!r&&s["return"]&&s["return"]();case 27:if(i.prev=27,!o){i.next=30;break}throw a;case 30:return i.finish(27);case 31:return i.finish(24);case 32:case"end":return i.stop()}},i,this,[[6,20,24,32],[25,,27,31]])}),t.exports=n}),function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.__tmp9z=e.__tmp9z||{},e.__tmp9z.extensions=n.exports}}(this,function(e){"use strict";!function(e){String.prototype.toCamelCase=function(){return this.replace(/[-_]([a-z])/g,function(e){return e[1].toUpperCase()})},String.prototype.toTitleCase=function(){return this.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},String.prototype.toPixel=function(){var e=parseInt(this,10);return e=e.toString()+"px"},Number.prototype.toPixel=function(){var e=parseInt(this,10);return e=e.toString()+"px"},String.prototype.toFloatPixel=function(){return this.toString()+"px"},Number.prototype.toFloatPixel=function(){return this.toString()+"px"},String.prototype.toInteger=function(){return parseInt(this.replace("px",""),10)},String.prototype.toMillisecond=function(){var e=parseInt(this,10);return e=e.toString()+"ms"},Number.prototype.toMillisecond=function(){var e=parseInt(this,10);return e=e.toString()+"ms"}}(void 0)}),function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.__tmp9z=e.__tmp9z||{},e.__tmp9z.random=n.exports}}(this,function(e,t){"use strict";var n={};n.guid=function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},n.str=function(){for(var e=void 0===arguments[0]?16:arguments[0],t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n="",r=e;r>0;--r)n+=t[Math.round(Math.random()*(t.length-1))];return n},n.id=function(){for(var e=void 0===arguments[0]?16:arguments[0],t="0123456789",n="",r=e;r>0;--r)n+=t[Math.round(Math.random()*(t.length-1))];return n},n.emptyGuid=function(){return"00000000-0000-0000-0000-000000000000"},n.isEmptyGuid=function(e){return Object.is(e,n.emptyGuid())},t.exports=n}),function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.__tmp9z=e.__tmp9z||{},e.__tmp9z.string=n.exports}}(this,function(e,t){"use strict";var n={};n.firstChar=function(e){return e.charAt(0)},n.lastChar=function(e){return e.slice(-1)},n.firstNChars=function(e,t){return e.substr(0,t)},n.lastNChars=function(e,t){return e.substr(e.length-t)},n.trimFirstChar=function(e){return e.substring(1)},n.trimLastChar=function(e){return e.substring(0,e.length-1)},n.trimFirstNChars=function(e,t){return e.substring(t)},n.trimLastNChars=function(e,t){return e.substring(0,e.length-t)},n.ellipsisTrim=function(e,t){var n=e;return n.length>t&&(n=n.substr(0,t-4)+" ..."),n},n.replaceAt=function(e,t,n){return e.substr(0,t)+n+e.substr(t+n.length)},n.insertAt=function(e,t,n){return e.substr(0,t)+n+e.substr(t)},n.dashToCamelCase=function(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})},n.camelCaseToSpace=function(e){var t=/([A-Z])([A-Z])([a-z])|([a-z])([A-Z])/g;return e.replace(t,"$1$4 $2$3$5")},n.toCamelCase=function(e){return e.replace(/\s(.)/g,function(e){return e.toUpperCase()}).replace(/\s/g,"").replace(/^(.)/,function(e){return e.toLowerCase()})},n.spaceToDash=function(e){return e.replace(/\s+/g,"-").toLowerCase()},t.exports=n}),function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.__tmp9z=e.__tmp9z||{},e.__tmp9z.date=n.exports}}(this,function(e,t){"use strict";var n={};n.currentDateObj=function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,r=e.getFullYear();return{day:t,month:n,year:r}},n.current=function(){var e=(void 0).currentDateObj();return e.month.toString()+"/"+e.day.toString()+"/"+e.year.toString()},n.isDate=function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())},n.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},n.getDaysInMonth=function(e,t){return[31,n.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},n.setToStartOfDay=function(e){n.isDate(e)&&e.setHours(0,0,0,0)},n.compareDates=function(e,t){return e.getTime()===t.getTime()},t.exports=n}),function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.__tmp9z=e.__tmp9z||{},e.__tmp9z.network=n.exports}}(this,function(e,t){"use strict";function n(e){var t,n,r,i,o=e.split(".");return 4==o.length?(t=parseInt(o[0],10),n=parseInt(o[1],10),r=parseInt(o[2],10),i=parseInt(o[3],10),10===t||172===t&&16===n||192===t&&168===n):!1}var r={};r.isBrowser=function(){return"undefined"!=typeof window},r.isIPAddress=function(e){return/^(\d\d?)|(1\d\d)|(0\d\d)|(2[0-4]\d)|(2[0-5])\.(\d\d?)|(1\d\d)|(0\d\d)|(2[0-4]\d)|(2[0-5])\.(\d\d?)|(1\d\d)|(0\d\d)|(2[0-4]\d)|(2[0-5])$/.test(e)},r.isLocalHost=function(e){return e=e.toLowerCase(),"localhost"===e?!0:e.indexOf("127.0.0.1")>-1?!0:r.isIPAddress(e)?n(e):!1},t.exports=r}),function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.__tmp9z=e.__tmp9z||{},e.__tmp9z.color=n.exports}}(this,function(e,t){"use strict";var n={};n.rgb2hex=function(e){if(-1==e.search("rgb"))return e;if("rgba(0, 0, 0, 0)"==e)return"transparent";var t=function(e){return("0"+parseInt(e).toString(16)).slice(-2)};return e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/),"#"+t(e[1])+t(e[2])+t(e[3])},t.exports=n}),function(e,t){if("function"==typeof define&&define.amd)define(["exports","module","./string"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module,require("./string"));else{var n={exports:{}};t(n.exports,n,e.__tmp9z.string),e.__tmp9z=e.__tmp9z||{},e.__tmp9z.url=n.exports}}(this,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e["default"]:e}var o=r(n),a={};a.queryString=function(e){var t=window.location.search.substring(1),n=t.split("&");for(i=0;i<n.length;i++){var r=n[i].split("=");if(r[0]==e)return r[1]}return null},a.queryStringArray=function(){var e=[],t=window.location.search.substring(1),n=t.split("&");for(i=0;i<n.length;i++){var r=n[i].split("=");if(r[0]==ji)return r[1];var o={};o.prop=r[0],o.val=r[1],e.push(o)}return e},a.encodeURISection=function(e,t){"/"===o.firstChar(e)&&(e=o.trimFirstChar(e));var n=e.split("/"),r=n[t];r=encodeURIComponent(r);for(var i=n.length,a="",s=0;i>s;s++)a+=s===t?"/"+r:"/"+n[s];return a},t.exports=a}),function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.__tmp9z=e.__tmp9z||{},e.__tmp9z.currency=n.exports}}(this,function(e,t){"use strict";var n={};n.parse=function(e){return"string"==typeof e&&(e=e.replace("$",""),e=e.replace(/,/g,""),e=parseFloat(e)),e},n.format=function(e){return e=parseFloat(value),e.toFixed(2)},n.extendedAmount=function(e,t){return"string"==typeof e&&(e=e.replace("$",""),e=parseFloat(e)),n.format(e*t)},t.exports=n}),function(e,t){if("function"==typeof define&&define.amd)define(["exports","module","./generator"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module,require("./generator"));else{var n={exports:{}};t(n.exports,n,e.__tmp9z.generator),e.__tmp9z=e.__tmp9z||{},e.__tmp9z.array=n.exports}}(this,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e["default"]:e}var i=r(n),o={};o.isArray=function(e){return/Array/.test(Object.prototype.toString.call(e))},o.inArray=function(e,t){return i.find(e,function(e){return Object.is(e,t)})},o.remove=function(e,t){for(var n=0;n<e.length;n++)o.inArray(t,e[n])&&e.splice(n,1);return e},o.merge=function(e,t){var n=e.length,r=0;if("number"==typeof t.length)for(var i=t.length;i>r;r++)e[n++]=t[r];else for(;void 0!==t[r];)e[n++]=t[r++];return e.length=n,e},o.makeArray=function(e,t){var n=t||[];if(null!=e){var r=typeof e;null==e.length||"string"===r||"function"===r||"regexp"===r?n.push(e):o.merge(n,e)}return n},o.concatArgs=function(e,t){return o.makeArray(e).concat(o.makeArray(t))},o.empty=function(e){return e.splice(0,e.length)},o.clone=function(e){return e.slice(0)},o.isValidIndex=function(e){return/^[0-9]+$/.test(String(e))},o.isObjectProperty=function(e,t){return!!Array.isArray(e[t])},o.isObjectPropertyByIndex=function(e,t){try{var n=e[Object.keys(e)[t]];return!!Array.isArray(n)}catch(r){return!1}},o.indexById=function(e,t){var n=void 0===arguments[2]?"id":arguments[2];if(e.length&&e.length>0){for(var r=e.length,i=void 0,o=0;r>o;o++)if(e[o][n]===t){i=o;break}return i}return null},o.findById=function(e,t){var n=void 0===arguments[2]?"id":arguments[2];return i.find(e,function(e){return e[n]===t})},t.exports=o}),function(e,t){if("function"==typeof define&&define.amd)define(["exports","module","./array"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module,require("./array"));else{var n={exports:{}};t(n.exports,n,e.__tmp9z.array),e.__tmp9z=e.__tmp9z||{},e.__tmp9z.path=n.exports}}(this,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e["default"]:e}var i=r(n),o=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},a={};a.split=function(e){var t=void 0===arguments[1]?".":arguments[1];return"undefined"==typeof e||""===e?[]:i.isArray(e)?e.slice(0):e.toString().split(t)},a.resolve=function(e,t,n){var r,i,o,s;for(null==n&&(n={}),s=a.split(t),o=[s.pop()],r=e;void 0!==(i=s.shift());){if(void 0===r[i]){s.unshift(i);break}r=r[i]}if(n.force)for(;void 0!==(i=s.shift());)"number"==typeof s[0]||0===s.length&&"number"==typeof o[0]?r[i]=[]:r[i]={},r=r[i];else for(;void 0!==(i=s.pop());)o.unshift(i);return[r,o]},a.objectProperty=function(e,t){try{var n=function(){var n=t.split(t),r=e;return n.forEach(function(e){var t=r[e];r=t}),{v:r}}();if("object"==typeof n)return n.v}catch(r){return void 0}},a.assignValueTo=function(e,t,n){try{for(var r=a.split(t),i=e,o=r.length,s=o-1,u=0;o>u;u++)if(u===s)i[r[u]]=n;else{var c=i[r[u]];i=c}}catch(l){}},a.arrayPropertyLength=function(e,t){var n=a.objectProperty(e,t);return n&&i.isArray(n)?n.length:null},a.isPropertyArray=function(e,t){var n=a.objectProperty(e,t);return i.isArray(n)},a.getIndexOf=function(e){if(void 0!==e){var t=e.split("."),n=void 0;return t.length?(n=t.length,n--,t[n]):void 0}return void 0},a.isInArray=function(e){var t=(void 0).getIndexOf(e);return void 0!==t?o(t):void 0},a.create=function(e,t){var n="";return e&&e.length?(e.forEach(function(e){n+=e.context+"."+e.index+"."}),"undefined"!=typeof t?n+=t:n=n.substring(0,n.length-1),n):void 0},a.createFromArray=function(e){var t="";if(e&&e.length){var n=0;return e.forEach(function(r){t+=n<e.length-1?r+".":r,n++}),t}},a.deleteObjectProperty=function(e,t){for(var n=a.split(t),r=e,i=n.length,o=i-1,s=0;i>s;s++)if(s===o)delete r[n[s]];else{var u=r[n[s]];r=u}},a.isProperty=function(e,t){var n=a.split(e),r=n.pop();return r===t},a.deleteObjectByIdFromArrayProp=function(e,t,n){var r=null;if(!i.isObjectPropertyByIndex(e,0))return r;for(var o=e[Object.keys(e)[0]],a=0;a<o.length;a++)if(o[a][t].toString()===n.toString()){o.splice(a,1),r=a;break}return r},a.selectObjectByIdFromArrayProp=function(e,t,n){var r=void 0,o=null;if(!i.isObjectPropertyByIndex(e,0))return o;for(var a=e[Object.keys(e)[0]],s=0;s<a.length;s++)if(a[s][t].toString()===n.toString()){r=a[s];break}return r},a.replaceIndex=function(e,t){var n=a.split(e);return n[1]=t,n.join(".")},a.map=function(e){var t=a.split(e),n=o;if(t&&t.length){var r=t.map(function(e){return n(e)?"["+e.toString()+"]":e});return r.join(".").replace(/.\[/,"[")}return e},t.exports=a}),function(e,t){if("function"==typeof define&&define.amd)define(["exports","module"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module);else{var n={exports:{}};t(n.exports,n),e.__tmp9z=e.__tmp9z||{},e.__tmp9z.object=n.exports}}(this,function(e,t){"use strict";var n=arguments,r={},i={descriptors:!1,extensibility:!1,enumerator:Object.keys};r.isObject=function(e){return"object"==typeof e&&null!==e},r.isFunction=function(e){return"function"==typeof e},r.propertyByIndex=function(e,t){return e[Object.keys(e)[t]]},r.indexById=function(e,t){var n=void 0===arguments[2]?"id":arguments[2],i=r.propertyByIndex(e,0);if(i.length&&i.length>0){for(var o=i.length,a=void 0,s=0;o>s;s++)if(i[s][n]===t){a=s;break}return a}return null},r.isEmpty=function(e){var t=Object.prototype.hasOwnProperty;if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(var n in e)if(t.call(e,n))return!1;return!0},r.isPlainObject=function(e){var t,n,i=function(e){return r.isObject(e)&&"[object Object]"===Object.prototype.toString.call(e)};return i(e)===!1?!1:(t=e.constructor,"function"!=typeof t?!1:(n=t.prototype,i(n)===!1?!1:n.hasOwnProperty("isPrototypeOf")!==!1))},r.isEqual=function(e,t){return Object.equals(e,t,i)},r.clone=function(e){return Object.clone(e,!1,i)},r.deepClone=function(e){return Object.clone(e,!0,i)},r.mixin=function(e,t){return Object.mixin(e,t)},r.assign=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;t>r;r++)n[r-1]=arguments[r];return Object.assign.apply(Object,[e].concat(n))},r.extend=function(){var e,t,i,o,a=n[0]||{},s=1,u=n.length,c=!1;for("boolean"==typeof a&&(c=a,a=n[1]||{},s=2);u>s;s++)if(null!==(e=n[s]))for(t in e)if(i=a[t],o=e[t],a!==o)if(c&&o&&(r.isPlainObject(o)||Array.isArray(o))){var l=i&&(r.isPlainObject(i)||Array.isArray(i))?i:Array.isArray(o)?[]:{};a[t]=r.extend(c,l,o)}else"undefined"!=typeof o&&(a[t]=o);return a},t.exports=r}),function(e,t){if("function"==typeof define&&define.amd)define(["exports","module","./assign","./extensions","js-object-clone","object-mixin","./generator","./random","./string","./date","./network","./color","./url","./currency","./array","./path","./object"],t);else if("undefined"!=typeof exports&&"undefined"!=typeof module)t(exports,module,require("./assign"),require("./extensions"),require("js-object-clone"),require("object-mixin"),require("./generator"),require("./random"),require("./string"),require("./date"),require("./network"),require("./color"),require("./url"),require("./currency"),require("./array"),require("./path"),require("./object"));else{var n={exports:{}};t(n.exports,n,e.assign,e.__tmp9z.extensions,e.objectClone,e.objectMixin,e.__tmp9z.generator,e.__tmp9z.random,e.__tmp9z.string,e.__tmp9z.date,e.__tmp9z.network,e.__tmp9z.color,e.__tmp9z.url,e.__tmp9z.currency,e.__tmp9z.array,e.__tmp9z.path,e.__tmp9z.object),e.elliptical=e.elliptical||{},e.elliptical.utils=n.exports}}(this,function(e,t,n,r,i,o,a,s,u,c,l,d,f,h,p,v,m){"use strict";function g(e){return e&&e.__esModule?e["default"]:e}var b=g(a),y=g(s),_=g(u),w=g(c),x=g(l),C=g(d),E=g(f),O=g(h),k=g(p),N=g(v),S=g(m),$={},A={descriptors:!1,extensibility:!1,enumerator:Object.keys};$.clone=function(e){var t=void 0===arguments[1]?!0:arguments[1];return Object.clone(e,t,A)},$.is=function(e,t){return Object.is(e,t)},$.isEqual=function(e,t){return Object.equals(e,t,A)},$.assign=function(e,t){return Object.assign(e,t)},$.mixin=function(e,t){return Object.mixin(e,t)},$.find=b.find,$.top=b.top,$.isNumeric=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},$.random=y,$.string=_,$.date=w,$.network=x,$.color=C,$.currency=O,$.url=E,$.array=k,$.path=N,$.object=S,t.exports=$}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical.Event=t(),e.returnExports=e.elliptical.Event)}(this,function(){var e={};return function(t){function n(){var e={},n=Function;return{emit:function(){var n,r,i,o=arguments,a=e[o[0]];a&&(n=a.length,r=o.length>1?Array.prototype.splice.call(o,1):[],setTimeout(function(){for(i=0;n>i;i+=1)try{a[i].apply(t,r)}catch(e){}a=t=r=null},0))},on:function(t,r){if("string"!=typeof t)throw"invalid or missing channel";if(!(r instanceof n))throw"invalid or missing callback";return e[t]||(e[t]=[]),e[t].push(r),{channel:t,callback:r}},off:function(t,r){if(t.channel&&t.callback&&(r=t.callback,t=t.channel),"string"!=typeof t)throw"invalid or missing channel";if(!(r instanceof n))throw"invalid or missing callback";var i,o=e[t],a=o instanceof Array?o.length:0;for(i=0;a>i;i+=1)if(o[i]===r){o.splice(i,1);break}},flush:function(){e={}},list:function(t){t&&t(e)}}}e.init=n()}(this),e.init}),function(e,t){"function"==typeof define&&define.amd&&define.amd.dust===!0?define("dust.core",[],t):"object"==typeof exports?module.exports=t():e.dust=t()}(this,function(){function getTemplate(e,t){return e?"function"==typeof e&&e.template?e.template:dust.isTemplateFn(e)?e:t!==!1?dust.cache[e]:void 0:void 0}function load(e,t,n){if(!e)return t.setError(new Error("No template or template name provided to render"));var r=getTemplate(e,dust.config.cache);return r?r(t,Context.wrap(n,r.templateName)):dust.onLoad?t.map(function(t){function r(e,r){var o;if(e)return t.setError(e);if(o=getTemplate(r,!1)||getTemplate(i,dust.config.cache),!o){if(!dust.compile)return t.setError(new Error("Dust compiler not available"));o=dust.loadSource(dust.compile(r,i))}o(t,Context.wrap(n,o.templateName)).end()}var i=e;3===dust.onLoad.length?dust.onLoad(i,n.options,r):dust.onLoad(i,r)}):t.setError(new Error("Template Not Found: "+e))}function Context(e,t,n,r,i){void 0===e||e instanceof Stack||(e=new Stack(e)),this.stack=e,this.global=t,this.options=n,this.blocks=r,this.templateName=i}function getWithResolvedData(e,t,n){return function(r){return e.push(r)._get(t,n)}}function Stack(e,t,n,r){this.tail=t,this.isObject=e&&"object"==typeof e,this.head=e,this.index=n,this.of=r}function Stub(e){this.head=new Chunk(this),this.callback=e,this.out=""}function Stream(){this.head=new Chunk(this)}function StackIndex(e){this.stack=e,this.index=null}function Chunk(e,t,n){this.root=e,this.next=t,this.data=[],this.flushable=!1,this.taps=n}function Tap(e,t){this.head=e,this.tail=t}var dust={version:"2.7.2"},NONE="NONE",ERROR="ERROR",WARN="WARN",INFO="INFO",DEBUG="DEBUG",EMPTY_FUNC=function(){};dust.config={whitespace:!1,amd:!1,cjs:!1,cache:!0},dust._aliases={write:"w",end:"e",map:"m",render:"r",reference:"f",section:"s",exists:"x",notexists:"nx",block:"b",partial:"p",helper:"h"},function(){var e,t,n={DEBUG:0,INFO:1,WARN:2,ERROR:3,NONE:4};"undefined"!=typeof console&&console.log?(e=console.log,t="function"==typeof e?function(){e.apply(console,arguments)}:function(){e(Array.prototype.slice.apply(arguments).join(" "))}):t=EMPTY_FUNC,dust.log=function(e,r){r=r||INFO,n[r]>=n[dust.debugLevel]&&(t("[DUST:"+r+"]",e),r===ERROR&&dust.debugLevel===DEBUG&&e instanceof Error&&e.stack&&t("[DUST:"+r+"]",e.stack))},dust.debugLevel=NONE,"undefined"!=typeof process&&process.env&&/\bdust\b/.test(process.env.DEBUG)&&(dust.debugLevel=DEBUG);
}(),dust.helpers={},dust.cache={},dust.register=function(e,t){e&&(t.templateName=e,dust.config.cache!==!1&&(dust.cache[e]=t))},dust.render=function(e,t,n){var r=new Stub(n).head;try{load(e,r,t).end()}catch(i){r.setError(i)}},dust.stream=function(e,t){var n=new Stream,r=n.head;return dust.nextTick(function(){try{load(e,r,t).end()}catch(n){r.setError(n)}}),n},dust.loadSource=function(source){return eval(source)},Array.isArray?dust.isArray=Array.isArray:dust.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},dust.nextTick=function(){return function(e){setTimeout(e,0)}}(),dust.isEmpty=function(e){return 0===e?!1:dust.isArray(e)&&!e.length?!0:!e},dust.isEmptyObject=function(e){var t;if(null===e)return!1;if(void 0===e)return!1;if(e.length>0)return!1;for(t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},dust.isTemplateFn=function(e){return"function"==typeof e&&e.__dustBody},dust.isThenable=function(e){return e&&"object"==typeof e&&"function"==typeof e.then},dust.isStreamable=function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pipe},dust.filter=function(e,t,n,r){var i,o,a,s;if(n)for(i=0,o=n.length;o>i;i++)a=n[i],a.length&&(s=dust.filters[a],"s"===a?t=null:"function"==typeof s?e=s(e,r):dust.log("Invalid filter `"+a+"`",WARN));return t&&(e=dust.filters[t](e,r)),e},dust.filters={h:function(e){return dust.escapeHtml(e)},j:function(e){return dust.escapeJs(e)},u:encodeURI,uc:encodeURIComponent,js:function(e){return dust.escapeJSON(e)},jp:function(e){return JSON?JSON.parse(e):(dust.log("JSON is undefined; could not parse `"+e+"`",WARN),e)}},dust.makeBase=dust.context=function(e,t){return new Context(void 0,e,t)},Context.wrap=function(e,t){return e instanceof Context?(e.templateName=t,e):new Context(e,{},{},null,t)},Context.prototype.get=function(e,t){return"string"==typeof e&&("."===e[0]&&(t=!0,e=e.substr(1)),e=e.split(".")),this._get(t,e)},Context.prototype._get=function(e,t){var n,r,i,o,a,s=this.stack||{},u=1;if(r=t[0],i=t.length,e&&0===i)o=s,s=s.head;else{if(e)s&&(s=s.head?s.head[r]:void 0);else{for(;s&&(!s.isObject||(o=s.head,n=s.head[r],void 0===n));)s=s.tail;s=void 0!==n?n:this.global&&this.global[r]}for(;s&&i>u;){if(dust.isThenable(s))return s.then(getWithResolvedData(this,e,t.slice(u)));o=s,s=s[t[u]],u++}}return"function"==typeof s?(a=function(){try{return s.apply(o,arguments)}catch(e){throw dust.log(e,ERROR),e}},a.__dustBody=!!s.__dustBody,a):(void 0===s&&dust.log("Cannot find reference `{"+t.join(".")+"}` in template `"+this.getTemplateName()+"`",INFO),s)},Context.prototype.getPath=function(e,t){return this._get(e,t)},Context.prototype.push=function(e,t,n){return void 0===e?(dust.log("Not pushing an undefined variable onto the context",INFO),this):this.rebase(new Stack(e,this.stack,t,n))},Context.prototype.pop=function(){var e=this.current();return this.stack=this.stack&&this.stack.tail,e},Context.prototype.rebase=function(e){return new Context(e,this.global,this.options,this.blocks,this.getTemplateName())},Context.prototype.clone=function(){var e=this.rebase();return e.stack=this.stack,e},Context.prototype.current=function(){return this.stack&&this.stack.head},Context.prototype.getBlock=function(e){var t,n,r;if("function"==typeof e&&(e=e(new Chunk,this).data.join("")),t=this.blocks,!t)return dust.log("No blocks for context `"+e+"` in template `"+this.getTemplateName()+"`",DEBUG),!1;for(n=t.length;n--;)if(r=t[n][e])return r;return dust.log("Malformed template `"+this.getTemplateName()+"` was missing one or more blocks."),!1},Context.prototype.shiftBlocks=function(e){var t,n=this.blocks;return e?(t=n?n.concat([e]):[e],new Context(this.stack,this.global,this.options,t,this.getTemplateName())):this},Context.prototype.resolve=function(e){var t;return"function"!=typeof e?e:(t=(new Chunk).render(e,this),t instanceof Chunk?t.data.join(""):t)},Context.prototype.getTemplateName=function(){return this.templateName},Stub.prototype.flush=function(){for(var e=this.head;e;){if(!e.flushable)return e.error?(this.callback(e.error),dust.log("Rendering failed with error `"+e.error+"`",ERROR),void(this.flush=EMPTY_FUNC)):void 0;this.out+=e.data.join(""),e=e.next,this.head=e}this.callback(null,this.out)},Stream.prototype.flush=function(){for(var e=this.head;e;){if(!e.flushable)return e.error?(this.emit("error",e.error),this.emit("end"),dust.log("Streaming failed with error `"+e.error+"`",ERROR),void(this.flush=EMPTY_FUNC)):void 0;this.emit("data",e.data.join("")),e=e.next,this.head=e}this.emit("end")},Stream.prototype.emit=function(e,t){var n,r,i=this.events||{},o=i[e]||[];if(!o.length)return dust.log("Stream broadcasting, but no listeners for `"+e+"`",DEBUG),!1;for(o=o.slice(0),n=0,r=o.length;r>n;n++)o[n](t);return!0},Stream.prototype.on=function(e,t){var n=this.events=this.events||{},r=n[e]=n[e]||[];return"function"!=typeof t?dust.log("No callback function provided for `"+e+"` event listener",WARN):r.push(t),this},Stream.prototype.pipe=function(e){if("function"!=typeof e.write||"function"!=typeof e.end)return dust.log("Incompatible stream passed to `pipe`",WARN),this;var t=!1;return"function"==typeof e.emit&&e.emit("pipe",this),"function"==typeof e.on&&e.on("error",function(){t=!0}),this.on("data",function(n){if(!t)try{e.write(n,"utf8")}catch(r){dust.log(r,ERROR)}}).on("end",function(){if(!t)try{e.end(),t=!0}catch(n){dust.log(n,ERROR)}})},StackIndex.prototype.indices=function(){var e=this.stack,t=[],n=function(e){for(var r in e)if(e.hasOwnProperty(r)&&"tail"===r&&"object"==typeof e[r]){var i=e[r],o=i.index;void 0!==o&&(t.push(o),n(i))}};if(void 0!==e.index){t.push(e.index),n(e);var r=t.length;t=t.reverse();for(var i=[],o=0;r>o;o++){var a={index:"$"+o.toString(),value:t[o]};i.push(a)}return this.index="$"+r.toString(),i}return null},Chunk.prototype.write=function(e){var t=this.taps;return t&&(e=t.go(e)),this.data.push(e),this},Chunk.prototype.end=function(e){return e&&this.write(e),this.flushable=!0,this.root.flush(),this},Chunk.prototype.map=function(e){var t=new Chunk(this.root,this.next,this.taps),n=new Chunk(this.root,t,this.taps);this.next=n,this.flushable=!0;try{e(n)}catch(r){dust.log(r,ERROR),n.setError(r)}return t},Chunk.prototype.tap=function(e){var t=this.taps;return t?this.taps=t.push(e):this.taps=new Tap(e),this},Chunk.prototype.untap=function(){return this.taps=this.taps.tail,this},Chunk.prototype.render=function(e,t){return e(this,t)},Chunk.prototype.reference=function(e,t,n,r){return"function"==typeof e?(e=e.apply(t.current(),[this,t,null,{auto:n,filters:r}]),e instanceof Chunk?e:this.reference(e,t,n,r)):dust.isThenable(e)?this.await(e,t,null,n,r):dust.isStreamable(e)?this.stream(e,t,null,n,r):dust.isEmpty(e)?this:this.write(dust.filter(e,n,r,t))},Chunk.prototype.section=function(e,t,n,r){var i,o,a,s=n.block,u=n["else"],c=this;if("function"==typeof e&&!dust.isTemplateFn(e)){try{e=e.apply(t.current(),[this,t,n,r])}catch(l){return dust.log(l,ERROR),this.setError(l)}if(e instanceof Chunk)return e}if(dust.isEmptyObject(n))return c;if(dust.isEmptyObject(r)||(t=t.push(r)),dust.isArray(e)){if(s){if(o=e.length,o>0){a=t.stack&&t.stack.head||{},a.$len=o;var d=new StackIndex(t.stack),f=d.indices(),h=d.index;if(f)for(var p=0;p<f.length;p++)a[f[p].index]=f[p].value;for(i=0;o>i;i++)a.$idx=i,h?a[h]=i:a.$0=i,c=s(c,t.push(e[i],i,o));return delete a.$idx,delete a.$len,h?(delete a[h],f&&f.forEach(function(e){delete a[e.index]})):void 0!==a.$0&&delete a.$0,c}if(u)return u(this,t)}}else{if(dust.isThenable(e))return this.await(e,t,n);if(dust.isStreamable(e))return this.stream(e,t,n);if(e===!0){if(s)return s(this,t)}else if(e||0===e){if(s)return s(this,t.push(e))}else if(u)return u(this,t)}return dust.log("Section without corresponding key in template `"+t.getTemplateName()+"`",DEBUG),this},Chunk.prototype.exists=function(e,t,n){var r=n.block,i=n["else"];if(dust.isEmpty(e)){if(i)return i(this,t)}else{if(r)return r(this,t);dust.log("No block for exists check in template `"+t.getTemplateName()+"`",DEBUG)}return this},Chunk.prototype.notexists=function(e,t,n){var r=n.block,i=n["else"];if(dust.isEmpty(e)){if(r)return r(this,t);dust.log("No block for not-exists check in template `"+t.getTemplateName()+"`",DEBUG)}else if(i)return i(this,t);return this},Chunk.prototype.block=function(e,t,n){var r=e||n.block;return r?r(this,t):this},Chunk.prototype.partial=function(e,t,n,r){var i;return void 0===r&&(r=n,n=t),dust.isEmptyObject(r)||(n=n.clone(),i=n.pop(),n=n.push(r).push(i)),dust.isTemplateFn(e)?this.capture(e,t,function(e,t){load(e,t,n).end()}):load(e,this,n)},Chunk.prototype.helper=function(e,t,n,r,i){var o,a=this,s=r.filters;if(void 0===i&&(i="h"),!dust.helpers[e])return dust.log("Helper `"+e+"` does not exist",WARN),a;try{return o=dust.helpers[e](a,t,n,r),o instanceof Chunk?o:("string"==typeof s&&(s=s.split("|")),dust.isEmptyObject(n)?a.reference(o,t,i,s):a.section(o,t,n,r))}catch(u){return dust.log("Error in helper `"+e+"`: "+u.message,ERROR),a.setError(u)}},Chunk.prototype.await=function(e,t,n,r,i){return this.map(function(o){e.then(function(e){o=n?o.section(e,t,n):o.reference(e,t,r,i),o.end()},function(e){var r=n&&n.error;r?o.render(r,t.push(e)).end():(dust.log("Unhandled promise rejection in `"+t.getTemplateName()+"`",INFO),o.end())})})},Chunk.prototype.stream=function(e,t,n,r,i){var o=n&&n.block,a=n&&n.error;return this.map(function(s){var u=!1;e.on("data",function(e){u||(o?s=s.map(function(n){n.render(o,t.push(e)).end()}):n||(s=s.reference(e,t,r,i)))}).on("error",function(e){u||(a?s.render(a,t.push(e)):dust.log("Unhandled stream error in `"+t.getTemplateName()+"`",INFO),u||(u=!0,s.end()))}).on("end",function(){u||(u=!0,s.end())})})},Chunk.prototype.capture=function(e,t,n){return this.map(function(r){var i=new Stub(function(e,t){e?r.setError(e):n(t,r)});e(i.head,t).end()})},Chunk.prototype.setError=function(e){return this.error=e,this.root.flush(),this};for(var f in Chunk.prototype)dust._aliases[f]&&(Chunk.prototype[dust._aliases[f]]=Chunk.prototype[f]);Tap.prototype.push=function(e){return new Tap(e,this)},Tap.prototype.go=function(e){for(var t=this;t;)e=t.head(e),t=t.tail;return e};var HCHARS=/[&<>"']/,AMP=/&/g,LT=/</g,GT=/>/g,QUOT=/\"/g,SQUOT=/\'/g;dust.escapeHtml=function(e){return"string"==typeof e||e&&"function"==typeof e.toString?("string"!=typeof e&&(e=e.toString()),HCHARS.test(e)?e.replace(AMP,"&amp;").replace(LT,"&lt;").replace(GT,"&gt;").replace(QUOT,"&quot;").replace(SQUOT,"&#39;"):e):e};var BS=/\\/g,FS=/\//g,CR=/\r/g,LS=/\u2028/g,PS=/\u2029/g,NL=/\n/g,LF=/\f/g,SQ=/'/g,DQ=/"/g,TB=/\t/g;return dust.escapeJs=function(e){return"string"==typeof e?e.replace(BS,"\\\\").replace(FS,"\\/").replace(DQ,'\\"').replace(SQ,"\\'").replace(CR,"\\r").replace(LS,"\\u2028").replace(PS,"\\u2029").replace(NL,"\\n").replace(LF,"\\f").replace(TB,"\\t"):e},dust.escapeJSON=function(e){return JSON?JSON.stringify(e).replace(LS,"\\u2028").replace(PS,"\\u2029").replace(LT,"\\u003c"):(dust.log("JSON is undefined; could not escape `"+e+"`",WARN),e)},dust}),function(e,t){"function"==typeof define&&define.amd&&define.amd.dust===!0?define("dust.parse",["dust.core"],function(e){return t(e).parse}):"object"==typeof exports?module.exports=t(require("./dust")):t(e.dust)}(this,function(e){var t=function(){"use strict";function e(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function t(e,n,r,i){this.message=e,this.expected=n,this.found=r,this.location=i,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t)}function n(e){function n(){return o(_n,yn)}function r(t){throw s(t,null,e.substring(_n,yn),o(_n,yn))}function i(t){var n,r,i=wn[t];if(i)return i;for(n=t-1;!wn[n];)n--;for(i=wn[n],i={line:i.line,column:i.column,seenCR:i.seenCR};t>n;)r=e.charAt(n),"\n"===r?(i.seenCR||i.line++,i.column=1,i.seenCR=!1):"\r"===r||"\u2028"===r||"\u2029"===r?(i.line++,i.column=1,i.seenCR=!0):(i.column++,i.seenCR=!1),n++;return wn[t]=i,i}function o(e,t){var n=i(e),r=i(t);return{start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function a(e){xn>yn||(yn>xn&&(xn=yn,Cn=[]),Cn.push(e))}function s(e,n,r,i){function o(e){var t=1;for(e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}function a(e,t){function n(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0100-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1000-\uFFFF]/g,function(e){return"\\u"+t(e)})}var r,i,o,a=new Array(e.length);for(o=0;o<e.length;o++)a[o]=e[o].description;return r=e.length>1?a.slice(0,-1).join(", ")+" or "+a[e.length-1]:a[0],i=t?'"'+n(t)+'"':"end of input","Expected "+r+" but "+i+" found."}return null!==n&&o(n),new t(null!==e?e:a(n,r),n,r,i)}function u(){var e;return e=c()}function c(){var e,t,n;for(e=yn,t=[],n=l();n!==G;)t.push(n),n=l();return t!==G&&(_n=e,t=J(t)),e=t}function l(){var e;return e=D(),e===G&&(e=R(),e===G&&(e=d(),e===G&&(e=b(),e===G&&(e=_(),e===G&&(e=g(),e===G&&(e=P())))))),e}function d(){var t,n,r,i,o,s,u,l;if(En++,t=yn,n=f(),n!==G){for(r=[],i=H();i!==G;)r.push(i),i=H();r!==G?(i=q(),i!==G?(o=c(),o!==G?(s=m(),s!==G?(u=h(),u===G&&(u=null),u!==G?(_n=yn,l=ee(n,o,s,u),l=l?void 0:G,l!==G?(_n=t,n=te(n,o,s,u),t=n):(yn=t,t=G)):(yn=t,t=G)):(yn=t,t=G)):(yn=t,t=G)):(yn=t,t=G)):(yn=t,t=G)}else yn=t,t=G;if(t===G)if(t=yn,n=f(),n!==G){for(r=[],i=H();i!==G;)r.push(i),i=H();r!==G?(47===e.charCodeAt(yn)?(i=ne,yn++):(i=G,0===En&&a(re)),i!==G?(o=q(),o!==G?(_n=t,n=ie(n),t=n):(yn=t,t=G)):(yn=t,t=G)):(yn=t,t=G)}else yn=t,t=G;return En--,t===G&&(n=G,0===En&&a(K)),t}function f(){var t,n,r,i,o,s,u;if(t=yn,n=F(),n!==G)if(oe.test(e.charAt(yn))?(r=e.charAt(yn),yn++):(r=G,0===En&&a(ae)),r!==G){for(i=[],o=H();o!==G;)i.push(o),o=H();i!==G?(o=w(),o!==G?(s=p(),s!==G?(u=v(),u!==G?(_n=t,n=se(r,o,s,u),t=n):(yn=t,t=G)):(yn=t,t=G)):(yn=t,t=G)):(yn=t,t=G)}else yn=t,t=G;else yn=t,t=G;return t}function h(){var t,n,r,i,o,s,u;if(En++,t=yn,n=F(),n!==G)if(47===e.charCodeAt(yn)?(r=ne,yn++):(r=G,0===En&&a(re)),r!==G){for(i=[],o=H();o!==G;)i.push(o),o=H();if(i!==G)if(o=w(),o!==G){for(s=[],u=H();u!==G;)s.push(u),u=H();s!==G?(u=q(),u!==G?(_n=t,n=ce(o),t=n):(yn=t,t=G)):(yn=t,t=G)}else yn=t,t=G;else yn=t,t=G}else yn=t,t=G;else yn=t,t=G;return En--,t===G&&(n=G,0===En&&a(ue)),t}function p(){var t,n,r,i;return t=yn,n=yn,58===e.charCodeAt(yn)?(r=le,yn++):(r=G,0===En&&a(de)),r!==G?(i=w(),i!==G?(_n=n,r=fe(i),n=r):(yn=n,n=G)):(yn=n,n=G),n===G&&(n=null),n!==G&&(_n=t,n=he(n)),t=n}function v(){var t,n,r,i,o,s,u;if(En++,t=yn,n=[],r=yn,i=[],o=H(),o!==G)for(;o!==G;)i.push(o),o=H();else i=G;for(i!==G?(o=S(),o!==G?(61===e.charCodeAt(yn)?(s=ve,yn++):(s=G,0===En&&a(me)),s!==G?(u=x(),u===G&&(u=w(),u===G&&(u=j())),u!==G?(_n=r,i=ge(o,u),r=i):(yn=r,r=G)):(yn=r,r=G)):(yn=r,r=G)):(yn=r,r=G);r!==G;){if(n.push(r),r=yn,i=[],o=H(),o!==G)for(;o!==G;)i.push(o),o=H();else i=G;i!==G?(o=S(),o!==G?(61===e.charCodeAt(yn)?(s=ve,yn++):(s=G,0===En&&a(me)),s!==G?(u=x(),u===G&&(u=w(),u===G&&(u=j())),u!==G?(_n=r,i=ge(o,u),r=i):(yn=r,r=G)):(yn=r,r=G)):(yn=r,r=G)):(yn=r,r=G)}return n!==G&&(_n=t,n=be(n)),t=n,En--,t===G&&(n=G,0===En&&a(pe)),t}function m(){var t,n,r,i,o,s,u,l;for(En++,t=yn,n=[],r=yn,i=F(),i!==G?(58===e.charCodeAt(yn)?(o=le,yn++):(o=G,0===En&&a(de)),o!==G?(s=S(),s!==G?(u=q(),u!==G?(l=c(),l!==G?(_n=r,i=ge(s,l),r=i):(yn=r,r=G)):(yn=r,r=G)):(yn=r,r=G)):(yn=r,r=G)):(yn=r,r=G);r!==G;)n.push(r),r=yn,i=F(),i!==G?(58===e.charCodeAt(yn)?(o=le,yn++):(o=G,0===En&&a(de)),o!==G?(s=S(),s!==G?(u=q(),u!==G?(l=c(),l!==G?(_n=r,i=ge(s,l),r=i):(yn=r,r=G)):(yn=r,r=G)):(yn=r,r=G)):(yn=r,r=G)):(yn=r,r=G);return n!==G&&(_n=t,n=_e(n)),t=n,En--,t===G&&(n=G,0===En&&a(ye)),t}function g(){var e,t,n,r,i;return En++,e=yn,t=F(),t!==G?(n=w(),n!==G?(r=y(),r!==G?(i=q(),i!==G?(_n=e,t=xe(n,r),e=t):(yn=e,e=G)):(yn=e,e=G)):(yn=e,e=G)):(yn=e,e=G),En--,e===G&&(t=G,0===En&&a(we)),e}function b(){var t,n,r,i,o,s,u,c,l,d;if(En++,t=yn,n=F(),n!==G)if(62===e.charCodeAt(yn)?(r=Ee,yn++):(r=G,0===En&&a(Oe)),r===G&&(43===e.charCodeAt(yn)?(r=ke,yn++):(r=G,0===En&&a(Ne))),r!==G){for(i=[],o=H();o!==G;)i.push(o),o=H();if(i!==G)if(o=yn,s=S(),s!==G&&(_n=o,s=Se(r,s)),o=s,o===G&&(o=j()),o!==G)if(s=p(),s!==G)if(u=v(),u!==G){for(c=[],l=H();l!==G;)c.push(l),l=H();c!==G?(47===e.charCodeAt(yn)?(l=ne,yn++):(l=G,0===En&&a(re)),l!==G?(d=q(),d!==G?(_n=t,n=$e(r,o,s,u),t=n):(yn=t,t=G)):(yn=t,t=G)):(yn=t,t=G)}else yn=t,t=G;else yn=t,t=G;else yn=t,t=G;else yn=t,t=G}else yn=t,t=G;else yn=t,t=G;return En--,t===G&&(n=G,0===En&&a(Ce)),t}function y(){var t,n,r,i,o;for(En++,t=yn,n=[],r=yn,124===e.charCodeAt(yn)?(i=je,yn++):(i=G,0===En&&a(Te)),i!==G?(o=S(),o!==G?(_n=r,i=fe(o),r=i):(yn=r,r=G)):(yn=r,r=G);r!==G;)n.push(r),r=yn,124===e.charCodeAt(yn)?(i=je,yn++):(i=G,0===En&&a(Te)),i!==G?(o=S(),o!==G?(_n=r,i=fe(o),r=i):(yn=r,r=G)):(yn=r,r=G);return n!==G&&(_n=t,n=Pe(n)),t=n,En--,t===G&&(n=G,0===En&&a(Ae)),t}function _(){var t,n,r,i,o;return En++,t=yn,n=F(),n!==G?(126===e.charCodeAt(yn)?(r=Ie,yn++):(r=G,0===En&&a(De)),r!==G?(i=S(),i!==G?(o=q(),o!==G?(_n=t,n=Re(i),t=n):(yn=t,t=G)):(yn=t,t=G)):(yn=t,t=G)):(yn=t,t=G),En--,t===G&&(n=G,0===En&&a(Me)),t}function w(){var e,t;return En++,e=yn,t=N(),t!==G&&(_n=e,t=Fe(t)),e=t,e===G&&(e=yn,t=S(),t!==G&&(_n=e,t=qe(t)),e=t),En--,e===G&&(t=G,0===En&&a(Le)),e}function x(){var e,t;return En++,e=yn,t=C(),t===G&&(t=k()),t!==G&&(_n=e,t=Ve(t)),e=t,En--,e===G&&(t=G,0===En&&a(ze)),e}function C(){var t,n,r,i;return En++,t=yn,n=k(),n!==G?(46===e.charCodeAt(yn)?(r=He,yn++):(r=G,0===En&&a(We)),r!==G?(i=E(),i!==G?(_n=t,n=Ue(n,i),t=n):(yn=t,t=G)):(yn=t,t=G)):(yn=t,t=G),En--,t===G&&(n=G,0===En&&a(Be)),t}function E(){var t,n,r;if(En++,t=yn,n=[],Qe.test(e.charAt(yn))?(r=e.charAt(yn),yn++):(r=G,0===En&&a(Ge)),r!==G)for(;r!==G;)n.push(r),Qe.test(e.charAt(yn))?(r=e.charAt(yn),yn++):(r=G,0===En&&a(Ge));else n=G;return n!==G&&(_n=t,n=Xe(n)),t=n,En--,t===G&&(n=G,0===En&&a(Ye)),t}function O(){var t,n,r;return En++,t=yn,45===e.charCodeAt(yn)?(n=Je,yn++):(n=G,0===En&&a(Ke)),n!==G?(r=E(),r!==G?(_n=t,n=et(n,r),t=n):(yn=t,t=G)):(yn=t,t=G),En--,t===G&&(n=G,0===En&&a(Ze)),t}function k(){var e,t;return En++,e=O(),e===G&&(e=E()),En--,e===G&&(t=G,0===En&&a(tt)),e}function N(){var t,n,r,i;if(En++,t=yn,n=S(),n===G&&(n=null),n!==G){if(r=[],i=A(),i===G&&(i=$()),i!==G)for(;i!==G;)r.push(i),i=A(),i===G&&(i=$());else r=G;r!==G?(_n=t,n=rt(n,r),t=n):(yn=t,t=G)}else yn=t,t=G;if(t===G)if(t=yn,46===e.charCodeAt(yn)?(n=He,yn++):(n=G,0===En&&a(We)),n!==G){for(r=[],i=A(),i===G&&(i=$());i!==G;)r.push(i),i=A(),i===G&&(i=$());r!==G?(_n=t,n=it(r),t=n):(yn=t,t=G)}else yn=t,t=G;return En--,t===G&&(n=G,0===En&&a(nt)),t}function S(){var t,n,r,i;if(En++,t=yn,at.test(e.charAt(yn))?(n=e.charAt(yn),yn++):(n=G,0===En&&a(st)),n!==G){for(r=[],ut.test(e.charAt(yn))?(i=e.charAt(yn),yn++):(i=G,0===En&&a(ct));i!==G;)r.push(i),ut.test(e.charAt(yn))?(i=e.charAt(yn),yn++):(i=G,0===En&&a(ct));r!==G?(_n=t,n=lt(n,r),t=n):(yn=t,t=G)}else yn=t,t=G;return En--,t===G&&(n=G,0===En&&a(ot)),t}function $(){var t,n,r,i,o,s;if(En++,t=yn,n=yn,r=z(),r!==G){if(i=yn,o=[],Qe.test(e.charAt(yn))?(s=e.charAt(yn),yn++):(s=G,0===En&&a(Ge)),s!==G)for(;s!==G;)o.push(s),Qe.test(e.charAt(yn))?(s=e.charAt(yn),yn++):(s=G,0===En&&a(Ge));else o=G;o!==G&&(_n=i,o=ft(o)),i=o,i===G&&(i=w()),i!==G?(o=V(),o!==G?(_n=n,r=ht(i),n=r):(yn=n,n=G)):(yn=n,n=G)}else yn=n,n=G;return n!==G?(r=A(),r===G&&(r=null),r!==G?(_n=t,n=pt(n,r),t=n):(yn=t,t=G)):(yn=t,t=G),En--,t===G&&(n=G,0===En&&a(dt)),t}function A(){var t,n,r,i,o;if(En++,t=yn,n=[],r=yn,46===e.charCodeAt(yn)?(i=He,yn++):(i=G,0===En&&a(We)),i!==G?(o=S(),o!==G?(_n=r,i=mt(o),r=i):(yn=r,r=G)):(yn=r,r=G),r!==G)for(;r!==G;)n.push(r),r=yn,46===e.charCodeAt(yn)?(i=He,yn++):(i=G,0===En&&a(We)),i!==G?(o=S(),o!==G?(_n=r,i=mt(o),r=i):(yn=r,r=G)):(yn=r,r=G);else n=G;return n!==G?(r=$(),r===G&&(r=null),r!==G?(_n=t,n=gt(n,r),t=n):(yn=t,t=G)):(yn=t,t=G),En--,t===G&&(n=G,0===En&&a(vt)),t}function j(){var t,n,r,i;if(En++,t=yn,34===e.charCodeAt(yn)?(n=yt,yn++):(n=G,0===En&&a(_t)),n!==G?(34===e.charCodeAt(yn)?(r=yt,yn++):(r=G,0===En&&a(_t)),r!==G?(_n=t,n=wt(),t=n):(yn=t,t=G)):(yn=t,t=G),t===G&&(t=yn,34===e.charCodeAt(yn)?(n=yt,yn++):(n=G,0===En&&a(_t)),n!==G?(r=M(),r!==G?(34===e.charCodeAt(yn)?(i=yt,yn++):(i=G,0===En&&a(_t)),i!==G?(_n=t,n=xt(r),t=n):(yn=t,t=G)):(yn=t,t=G)):(yn=t,t=G),t===G))if(t=yn,34===e.charCodeAt(yn)?(n=yt,yn++):(n=G,0===En&&a(_t)),n!==G){if(r=[],i=T(),i!==G)for(;i!==G;)r.push(i),i=T();else r=G;r!==G?(34===e.charCodeAt(yn)?(i=yt,yn++):(i=G,0===En&&a(_t)),i!==G?(_n=t,n=Ct(r),t=n):(yn=t,t=G)):(yn=t,t=G)}else yn=t,t=G;return En--,t===G&&(n=G,0===En&&a(bt)),t}function T(){var e,t;return e=_(),e===G&&(e=g(),e===G&&(e=yn,t=M(),t!==G&&(_n=e,t=Et(t)),e=t)),e}function P(){var t,n,r,i,o,s,u,c;if(En++,t=yn,n=B(),n!==G){for(r=[],i=H();i!==G;)r.push(i),i=H();r!==G?(_n=t,n=kt(n,r),t=n):(yn=t,t=G)}else yn=t,t=G;if(t===G){if(t=yn,n=[],r=yn,i=yn,En++,o=L(),En--,o===G?i=void 0:(yn=i,i=G),i!==G?(o=yn,En++,s=D(),En--,s===G?o=void 0:(yn=o,o=G),o!==G?(s=yn,En++,u=R(),En--,u===G?s=void 0:(yn=s,s=G),s!==G?(u=yn,En++,c=B(),En--,c===G?u=void 0:(yn=u,u=G),u!==G?(e.length>yn?(c=e.charAt(yn),yn++):(c=G,0===En&&a(Nt)),c!==G?(_n=r,i=St(c),r=i):(yn=r,r=G)):(yn=r,r=G)):(yn=r,r=G)):(yn=r,r=G)):(yn=r,r=G),r!==G)for(;r!==G;)n.push(r),r=yn,i=yn,En++,o=L(),En--,o===G?i=void 0:(yn=i,i=G),i!==G?(o=yn,En++,s=D(),En--,s===G?o=void 0:(yn=o,o=G),o!==G?(s=yn,En++,u=R(),En--,u===G?s=void 0:(yn=s,s=G),s!==G?(u=yn,En++,c=B(),En--,c===G?u=void 0:(yn=u,u=G),u!==G?(e.length>yn?(c=e.charAt(yn),yn++):(c=G,0===En&&a(Nt)),c!==G?(_n=r,i=St(c),r=i):(yn=r,r=G)):(yn=r,r=G)):(yn=r,r=G)):(yn=r,r=G)):(yn=r,r=G);else n=G;n!==G&&(_n=t,n=$t(n)),t=n}return En--,t===G&&(n=G,0===En&&a(Ot)),t}function M(){var t,n,r,i,o;if(En++,t=yn,n=[],r=yn,i=yn,En++,o=L(),En--,o===G?i=void 0:(yn=i,i=G),i!==G?(o=I(),o===G&&(jt.test(e.charAt(yn))?(o=e.charAt(yn),yn++):(o=G,0===En&&a(Tt))),o!==G?(_n=r,i=St(o),r=i):(yn=r,r=G)):(yn=r,r=G),r!==G)for(;r!==G;)n.push(r),r=yn,i=yn,En++,o=L(),En--,o===G?i=void 0:(yn=i,i=G),i!==G?(o=I(),o===G&&(jt.test(e.charAt(yn))?(o=e.charAt(yn),yn++):(o=G,0===En&&a(Tt))),o!==G?(_n=r,i=St(o),r=i):(yn=r,r=G)):(yn=r,r=G);else n=G;return n!==G&&(_n=t,n=Pt(n)),t=n,En--,t===G&&(n=G,0===En&&a(At)),t}function I(){var t,n;return t=yn,e.substr(yn,2)===Mt?(n=Mt,yn+=2):(n=G,0===En&&a(It)),n!==G&&(_n=t,n=Dt()),t=n}function D(){var t,n,r,i,o,s;if(En++,t=yn,e.substr(yn,2)===Lt?(n=Lt,yn+=2):(n=G,0===En&&a(Ft)),n!==G){for(r=[],i=yn,o=yn,En++,e.substr(yn,2)===qt?(s=qt,yn+=2):(s=G,0===En&&a(zt)),En--,s===G?o=void 0:(yn=o,o=G),o!==G?(e.length>yn?(s=e.charAt(yn),yn++):(s=G,0===En&&a(Nt)),s!==G?(_n=i,o=Vt(s),i=o):(yn=i,i=G)):(yn=i,i=G);i!==G;)r.push(i),i=yn,o=yn,En++,e.substr(yn,2)===qt?(s=qt,yn+=2):(s=G,0===En&&a(zt)),En--,s===G?o=void 0:(yn=o,o=G),o!==G?(e.length>yn?(s=e.charAt(yn),yn++):(s=G,0===En&&a(Nt)),s!==G?(_n=i,o=Vt(s),i=o):(yn=i,i=G)):(yn=i,i=G);r!==G?(e.substr(yn,2)===qt?(i=qt,yn+=2):(i=G,0===En&&a(zt)),i!==G?(_n=t,n=Bt(r),t=n):(yn=t,t=G)):(yn=t,t=G)}else yn=t,t=G;return En--,t===G&&(n=G,0===En&&a(Rt)),t}function R(){var t,n,r,i,o,s;if(En++,t=yn,e.substr(yn,2)===Wt?(n=Wt,yn+=2):(n=G,0===En&&a(Ut)),n!==G){for(r=[],i=yn,o=yn,En++,e.substr(yn,2)===Yt?(s=Yt,yn+=2):(s=G,0===En&&a(Qt)),En--,s===G?o=void 0:(yn=o,o=G),o!==G?(e.length>yn?(s=e.charAt(yn),yn++):(s=G,0===En&&a(Nt)),s!==G?(_n=i,o=St(s),i=o):(yn=i,i=G)):(yn=i,i=G);i!==G;)r.push(i),i=yn,o=yn,En++,e.substr(yn,2)===Yt?(s=Yt,yn+=2):(s=G,0===En&&a(Qt)),En--,s===G?o=void 0:(yn=o,o=G),o!==G?(e.length>yn?(s=e.charAt(yn),yn++):(s=G,0===En&&a(Nt)),s!==G?(_n=i,o=St(s),i=o):(yn=i,i=G)):(yn=i,i=G);r!==G?(e.substr(yn,2)===Yt?(i=Yt,yn+=2):(i=G,0===En&&a(Qt)),i!==G?(_n=t,n=Gt(r),t=n):(yn=t,t=G)):(yn=t,t=G)}else yn=t,t=G;return En--,t===G&&(n=G,0===En&&a(Ht)),t}function L(){var t,n,r,i,o,s,u,c,l,d;if(t=yn,n=F(),n!==G){for(r=[],i=H();i!==G;)r.push(i),i=H();if(r!==G)if(Xt.test(e.charAt(yn))?(i=e.charAt(yn),yn++):(i=G,0===En&&a(Zt)),i!==G){for(o=[],s=H();s!==G;)o.push(s),s=H();if(o!==G){if(s=[],u=yn,c=yn,En++,l=q(),En--,l===G?c=void 0:(yn=c,c=G),c!==G?(l=yn,En++,d=B(),En--,d===G?l=void 0:(yn=l,l=G),l!==G?(e.length>yn?(d=e.charAt(yn),yn++):(d=G,0===En&&a(Nt)),d!==G?(c=[c,l,d],u=c):(yn=u,u=G)):(yn=u,u=G)):(yn=u,u=G),u!==G)for(;u!==G;)s.push(u),u=yn,c=yn,En++,l=q(),En--,l===G?c=void 0:(yn=c,c=G),c!==G?(l=yn,En++,d=B(),En--,d===G?l=void 0:(yn=l,l=G),l!==G?(e.length>yn?(d=e.charAt(yn),yn++):(d=G,0===En&&a(Nt)),d!==G?(c=[c,l,d],u=c):(yn=u,u=G)):(yn=u,u=G)):(yn=u,u=G);else s=G;if(s!==G){for(u=[],c=H();c!==G;)u.push(c),c=H();u!==G?(c=q(),c!==G?(n=[n,r,i,o,s,u,c],t=n):(yn=t,t=G)):(yn=t,t=G)}else yn=t,t=G}else yn=t,t=G}else yn=t,t=G;else yn=t,t=G}else yn=t,t=G;return t===G&&(t=g()),t}function F(){var t;return 123===e.charCodeAt(yn)?(t=Jt,yn++):(t=G,0===En&&a(Kt)),t}function q(){var t;return 125===e.charCodeAt(yn)?(t=en,yn++):(t=G,0===En&&a(tn)),t}function z(){var t;return 91===e.charCodeAt(yn)?(t=nn,yn++):(t=G,0===En&&a(rn)),t}function V(){var t;return 93===e.charCodeAt(yn)?(t=on,yn++):(t=G,0===En&&a(an)),t}function B(){var t;return 10===e.charCodeAt(yn)?(t=sn,yn++):(t=G,0===En&&a(un)),t===G&&(e.substr(yn,2)===cn?(t=cn,yn+=2):(t=G,0===En&&a(ln)),t===G&&(13===e.charCodeAt(yn)?(t=dn,yn++):(t=G,0===En&&a(fn)),t===G&&(8232===e.charCodeAt(yn)?(t=hn,yn++):(t=G,0===En&&a(pn)),t===G&&(8233===e.charCodeAt(yn)?(t=vn,yn++):(t=G,0===En&&a(mn)))))),t}function H(){var t;return gn.test(e.charAt(yn))?(t=e.charAt(yn),yn++):(t=G,0===En&&a(bn)),t===G&&(t=B()),t}function W(e){return parseInt(e.join(""),10)}function U(e){return e.concat([["line",n().start.line],["col",n().start.column]])}var Y,Q=arguments.length>1?arguments[1]:{},G={},X={start:u},Z=u,J=function(e){var t=["body"].concat(e);return U(t)},K={type:"other",description:"section"},ee=function(e,t,n,i){return i&&e[1].text===i.text||r("Expected end tag for "+e[1].text+" but it was not found."),!0},te=function(e,t,n,r){return n.push(["param",["literal","block"],t]),e.push(n,["filters"]),U(e)},ne="/",re={type:"literal",value:"/",description:'"/"'},ie=function(e){return e.push(["bodies"],["filters"]),U(e)},oe=/^[#?\^<+@%]/,ae={type:"class",value:"[#?^<+@%]",description:"[#?^<+@%]"},se=function(e,t,n,r){return[e,t,n,r]},ue={type:"other",description:"end tag"},ce=function(e){return e},le=":",de={type:"literal",value:":",description:'":"'},fe=function(e){return e},he=function(e){return e?["context",e]:["context"]},pe={type:"other",description:"params"},ve="=",me={type:"literal",value:"=",description:'"="'},ge=function(e,t){return["param",["literal",e],t]},be=function(e){return["params"].concat(e)},ye={type:"other",description:"bodies"},_e=function(e){return["bodies"].concat(e)},we={type:"other",description:"reference"},xe=function(e,t){return U(["reference",e,t])},Ce={type:"other",description:"partial"},Ee=">",Oe={type:"literal",value:">",description:'">"'},ke="+",Ne={type:"literal",value:"+",description:'"+"'},Se=function(e,t){return["literal",t]},$e=function(e,t,n,r){var i=">"===e?"partial":e;return U([i,t,n,r])},Ae={type:"other",description:"filters"},je="|",Te={type:"literal",value:"|",description:'"|"'},Pe=function(e){return["filters"].concat(e)},Me={type:"other",description:"special"},Ie="~",De={type:"literal",value:"~",description:'"~"'},Re=function(e){return U(["special",e])},Le={type:"other",description:"identifier"},Fe=function(e){var t=["path"].concat(e);return t.text=e[1].join(".").replace(/,line,\d+,col,\d+/g,""),t},qe=function(e){var t=["key",e];return t.text=e,t},ze={type:"other",description:"number"},Ve=function(e){return["literal",e]},Be={type:"other",description:"float"},He=".",We={type:"literal",value:".",description:'"."'},Ue=function(e,t){return parseFloat(e+"."+t)},Ye={type:"other",description:"unsigned_integer"},Qe=/^[0-9]/,Ge={type:"class",value:"[0-9]",description:"[0-9]"},Xe=function(e){return W(e)},Ze={type:"other",description:"signed_integer"},Je="-",Ke={type:"literal",value:"-",description:'"-"'},et=function(e,t){return-1*t},tt={type:"other",description:"integer"},nt={type:"other",description:"path"},rt=function(e,t){return t=t[0],e&&t?(t.unshift(e),U([!1,t])):U([!0,t])},it=function(e){return U(e.length>0?[!0,e[0]]:[!0,[]])},ot={type:"other",description:"key"},at=/^[a-zA-Z_$]/,st={type:"class",value:"[a-zA-Z_$]",description:"[a-zA-Z_$]"},ut=/^[0-9a-zA-Z_$\-]/,ct={type:"class",value:"[0-9a-zA-Z_$-]",description:"[0-9a-zA-Z_$-]"},lt=function(e,t){return e+t.join("")},dt={type:"other",description:"array"},ft=function(e){return e.join("")},ht=function(e){return e},pt=function(e,t){return t?t.unshift(e):t=[e],t},vt={type:"other",description:"array_part"},mt=function(e){return e},gt=function(e,t){return t?e.concat(t):e},bt={type:"other",description:"inline"},yt='"',_t={type:"literal",value:'"',description:'"\\""'},wt=function(){return U(["literal",""])},xt=function(e){return U(["literal",e])},Ct=function(e){return U(["body"].concat(e))},Et=function(e){return["buffer",e]},Ot={type:"other",description:"buffer"},kt=function(e,t){return U(["format",e,t.join("")])},Nt={type:"any",description:"any character"},St=function(e){return e},$t=function(e){return U(["buffer",e.join("")])},At={type:"other",description:"literal"},jt=/^[^"]/,Tt={type:"class",value:'[^"]',description:'[^"]'},Pt=function(e){return e.join("")},Mt='\\"',It={type:"literal",value:'\\"',description:'"\\\\\\""'},Dt=function(){return'"'},Rt={type:"other",description:"raw"},Lt="{`",Ft={type:"literal",value:"{`",description:'"{`"'},qt="`}",zt={type:"literal",value:"`}",description:'"`}"'},Vt=function(e){return e},Bt=function(e){return U(["raw",e.join("")])},Ht={type:"other",description:"comment"},Wt="{!",Ut={type:"literal",value:"{!",description:'"{!"'},Yt="!}",Qt={type:"literal",value:"!}",description:'"!}"'},Gt=function(e){return U(["comment",e.join("")])},Xt=/^[#?\^><+%:@\/~%]/,Zt={type:"class",value:"[#?^><+%:@/~%]",description:"[#?^><+%:@/~%]"},Jt="{",Kt={type:"literal",value:"{",description:'"{"'},en="}",tn={type:"literal",value:"}",description:'"}"'},nn="[",rn={type:"literal",value:"[",description:'"["'},on="]",an={type:"literal",value:"]",description:'"]"'},sn="\n",un={type:"literal",value:"\n",description:'"\\n"'},cn="\r\n",ln={type:"literal",value:"\r\n",description:'"\\r\\n"'},dn="\r",fn={type:"literal",value:"\r",description:'"\\r"'},hn="\u2028",pn={type:"literal",value:"\u2028",description:'"\\u2028"'},vn="\u2029",mn={type:"literal",value:"\u2029",description:'"\\u2029"'},gn=/^[\t\x0B\f \xA0\uFEFF]/,bn={type:"class",value:"[\\t\\v\\f \\u00A0\\uFEFF]",description:"[\\t\\v\\f \\u00A0\\uFEFF]"},yn=0,_n=0,wn=[{line:1,column:1,seenCR:!1}],xn=0,Cn=[],En=0;if("startRule"in Q){if(!(Q.startRule in X))throw new Error("Can't start parsing from rule \""+Q.startRule+'".');Z=X[Q.startRule]}if(Y=Z(),Y!==G&&yn===e.length)return Y;throw Y!==G&&yn<e.length&&a({type:"end",description:"end of input"}),s(null,Cn,xn<e.length?e.charAt(xn):null,xn<e.length?o(xn,xn+1):o(xn,xn))}return e(t,Error),{SyntaxError:t,parse:n}}();return e.parse=t.parse,t}),function(e,t){"function"==typeof define&&define.amd&&define.amd.dust===!0?define("dust.compile",["dust.core","dust.parse"],function(e,n){return t(n,e).compile}):"object"==typeof exports?module.exports=t(require("./parser").parse,require("./dust")):t(e.dust.parse,e.dust)}(this,function(e,t){function n(e){var t={};return b.filterNode(t,e)}function r(e,t){var n,r,i,o=[t[0]];for(n=1,r=t.length;r>n;n++)i=b.filterNode(e,t[n]),i&&o.push(i);return o}function i(e,t){var n,r,i,o,a=[t[0]];for(r=1,i=t.length;i>r;r++)o=b.filterNode(e,t[r]),o&&("buffer"===o[0]||"format"===o[0]?n?(n[0]="buffer"===o[0]?"buffer":n[0],n[1]+=o.slice(1,-2).join("")):(n=o,a.push(o)):(n=null,a.push(o)));return a}function o(e,t){return["buffer",_[t[1]],t[2],t[3]]}function a(e,t){return t}function s(){}function u(e,n){return t.config.whitespace?(n.splice(1,2,n.slice(1,-2).join("")),
n):null}function c(e,n){var r,i={name:n,bodies:[],blocks:{},index:0,auto:"h"},o=t.escapeJs(n),a=n?'"'+o+'",':"",s="function(dust){",u=b.compileNode(i,e);return n&&(s+='dust.register("'+o+'",'+u+");"),s+=l(i)+d(i)+"return "+u+"}",r="("+s+"(dust));",t.config.amd?"define("+a+'["dust.core"],'+s+");":t.config.cjs?"module.exports=function(dust){var tmpl="+r+"var f="+g().toString()+";f.template=tmpl;return f}":r}function l(e){var t,n=[],r=e.blocks;for(t in r)n.push('"'+t+'":'+r[t]);return n.length?(e.blocks="ctx=ctx.shiftBlocks(blocks);","var blocks={"+n.join(",")+"};"):(e.blocks="",e.blocks)}function d(e){var t,n,r=[],i=e.bodies,o=e.blocks;for(t=0,n=i.length;n>t;t++)r[t]="function body_"+t+"(chk,ctx){"+o+"return chk"+i[t]+";}body_"+t+".__dustBody=!0;";return r.join("")}function f(e,t){var n,r,i="";for(n=1,r=t.length;r>n;n++)i+=b.compileNode(e,t[n]);return i}function h(e,n,r){return"."+(t._aliases[r]||r)+"("+b.compileNode(e,n[1])+","+b.compileNode(e,n[2])+","+b.compileNode(e,n[4])+","+b.compileNode(e,n[3])+")"}function p(e){return e.replace(w,"\\\\").replace(x,'\\"').replace(C,"\\f").replace(E,"\\n").replace(O,"\\r").replace(k,"\\t")}function v(e,n,r){var i=t.loadSource(t.compile(e));return g(i)(n,r)}function m(e,n){var r=t.loadSource(t.compile(e,n));return g(r)}function g(e){return function(n,r){var i=r?"render":"stream";return t[i](e,n,r)}}var b={},y=t.isArray;b.compile=function(t,r){try{var i=n(e(t));return c(i,r)}catch(o){if(!o.location)throw o;throw new SyntaxError(o.message+" ["+r+":"+o.location.start.line+":"+o.location.start.column+"]")}},b.filterNode=function(e,t){return b.optimizers[t[0]](e,t)},b.optimizers={body:i,buffer:a,special:o,format:u,reference:r,"#":r,"?":r,"^":r,"<":r,"+":r,"@":r,"%":r,partial:r,context:r,params:r,bodies:r,param:r,filters:a,key:a,path:a,literal:a,raw:a,comment:s,line:s,col:s},b.pragmas={esc:function(e,t,n){var r,i=e.auto;return t||(t="h"),e.auto="s"===t?"":t,r=f(e,n.block),e.auto=i,r}};var _={s:" ",n:"\n",r:"\r",lb:"{",rb:"}"};b.compileNode=function(e,t){return b.nodes[t[0]](e,t)},b.nodes={body:function(e,t){var n=e.index++,r="body_"+n;return e.bodies[n]=f(e,t),r},buffer:function(e,t){return".w("+N(t[1])+")"},format:function(e,t){return".w("+N(t[1])+")"},reference:function(e,t){return".f("+b.compileNode(e,t[1])+",ctx,"+b.compileNode(e,t[2])+")"},"#":function(e,t){return h(e,t,"section")},"?":function(e,t){return h(e,t,"exists")},"^":function(e,t){return h(e,t,"notexists")},"<":function(e,t){for(var n=t[4],r=1,i=n.length;i>r;r++){var o=n[r],a=o[1][1];if("block"===a)return e.blocks[t[1].text]=b.compileNode(e,o[2]),""}return""},"+":function(e,t){return"undefined"==typeof t[1].text&&"undefined"==typeof t[4]?".b(ctx.getBlock("+b.compileNode(e,t[1])+",chk, ctx),"+b.compileNode(e,t[2])+", {},"+b.compileNode(e,t[3])+")":".b(ctx.getBlock("+N(t[1].text)+"),"+b.compileNode(e,t[2])+","+b.compileNode(e,t[4])+","+b.compileNode(e,t[3])+")"},"@":function(e,t){return".h("+N(t[1].text)+","+b.compileNode(e,t[2])+","+b.compileNode(e,t[4])+","+b.compileNode(e,t[3])+","+b.compileNode(e,t[5])+")"},"%":function(e,t){var n,r,i,o,a,s,u,c,l,d=t[1][1];if(!b.pragmas[d])return"";for(n=t[4],r={},c=1,l=n.length;l>c;c++)s=n[c],r[s[1][1]]=s[2];for(i=t[3],o={},c=1,l=i.length;l>c;c++)u=i[c],o[u[1][1]]=u[2][1];return a=t[2][1]?t[2][1].text:null,b.pragmas[d](e,a,r,o)},partial:function(e,t){return".p("+b.compileNode(e,t[1])+",ctx,"+b.compileNode(e,t[2])+","+b.compileNode(e,t[3])+")"},context:function(e,t){return t[1]?"ctx.rebase("+b.compileNode(e,t[1])+")":"ctx"},params:function(e,t){for(var n=[],r=1,i=t.length;i>r;r++)n.push(b.compileNode(e,t[r]));return n.length?"{"+n.join(",")+"}":"{}"},bodies:function(e,t){for(var n=[],r=1,i=t.length;i>r;r++)n.push(b.compileNode(e,t[r]));return"{"+n.join(",")+"}"},param:function(e,t){return b.compileNode(e,t[1])+":"+b.compileNode(e,t[2])},filters:function(e,t){for(var n=[],r=1,i=t.length;i>r;r++){var o=t[r];n.push('"'+o+'"')}return'"'+e.auto+'"'+(n.length?",["+n.join(",")+"]":"")},key:function(e,t){return'ctx.get(["'+t[1]+'"], false)'},path:function(e,t){for(var n=t[1],r=t[2],i=[],o=0,a=r.length;a>o;o++)y(r[o])?i.push(b.compileNode(e,r[o])):i.push('"'+r[o]+'"');return"ctx.getPath("+n+", ["+i.join(",")+"])"},literal:function(e,t){return N(t[1])},raw:function(e,t){return".w("+N(t[1])+")"}};var w=/\\/g,x=/"/g,C=/\f/g,E=/\n/g,O=/\r/g,k=/\t/g,N="undefined"==typeof JSON?function(e){return'"'+p(e)+'"'}:JSON.stringify;return t.compiler=b,t.compile=t.compiler.compile,t.renderSource=v,t.compileFn=m,t.filterNode=b.filterNode,t.optimizers=b.optimizers,t.pragmas=b.pragmas,t.compileNode=b.compileNode,t.nodes=b.nodes,b}),"function"==typeof define&&define.amd&&define.amd.dust===!0&&define(["require","dust.core","dust.compile"],function(e,t){return t.onLoad=function(t,n){e([t],function(e){n(null,e)})},t}),function(e,t){"function"==typeof define&&define.amd&&define.amd.dust===!0?define(["dust.core"],t):"object"==typeof exports?module.exports=t(require("dustjs-linkedin")):t(e.dust)}(this,function(e){function t(t,n,r){r=r||"INFO",t=t?"{@"+t+"}: ":"",e.log(t+n,r)}function n(e){d[e]||(t(e,"Deprecation warning: "+e+" is deprecated and will be removed in a future version of dustjs-helpers","WARN"),t(null,"For help and a deprecation timeline, see https://github.com/linkedin/dustjs-helpers/wiki/Deprecated-Features#"+e.replace(/\W+/g,""),"WARN"),d[e]=!0)}function r(e){return e.stack.tail&&e.stack.tail.head&&"undefined"!=typeof e.stack.tail.head.__select__}function i(e){return r(e)&&e.get("__select__")}function o(e,t){var n,r=e.stack.head,i=e.rebase();e.stack&&e.stack.tail&&(i.stack=e.stack.tail);var o={isPending:!1,isResolved:!1,isDeferredComplete:!1,deferreds:[]};for(n in t)o[n]=t[n];return i.push({__select__:o}).push(r,e.stack.index,e.stack.of)}function a(e){var t,n;if(e.isDeferredPending=!0,e.deferreds.length)for(e.isDeferredComplete=!0,t=0,n=e.deferreds.length;n>t;t++)e.deferreds[t]();e.isDeferredPending=!1}function s(e,t){return"function"==typeof t?t.toString().replace(/(^\s+|\s+$)/gm,"").replace(/\n/gm,"").replace(/,\s*/gm,", ").replace(/\)\{/gm,") {"):t}function u(e,t){return function(n,r,i,o){return c(n,r,i,o,e,t)}}function c(e,n,r,o,a,s){var u,c,d,f,h=r.block,p=r["else"],v=i(n)||{};if(v.isResolved&&!v.isDeferredPending)return e;if(o.hasOwnProperty("key"))c=o.key;else{if(!v.hasOwnProperty("key"))return t(a,"No key specified","WARN"),e;c=v.key}return f=o.type||v.type,c=l(n.resolve(c),f),d=l(n.resolve(o.value),f),s(c,d)?(v.isPending||(u=!0,v.isPending=!0),h&&(e=e.render(h,n)),u&&(v.isResolved=!0)):p&&(e=e.render(p,n)),e}function l(e,t){switch(t&&(t=t.toLowerCase()),t){case"number":return+e;case"string":return String(e);case"boolean":return e="false"===e?!1:e,Boolean(e);case"date":return new Date(e)}return e}var d={},f={tap:function(e,t,r){return n("tap"),r.resolve(e)},sep:function(e,t,n){var r=n.block;return t.stack.index===t.stack.of-1?e:r?r(e,t):e},first:function(e,t,n){return 0===t.stack.index?n.block(e,t):e},last:function(e,t,n){return t.stack.index===t.stack.of-1?n.block(e,t):e},contextDump:function(e,n,r,i){var o,a,u=n.resolve(i.to),c=n.resolve(i.key);switch(c){case"full":o=n.stack;break;default:o=n.stack.head}switch(a=JSON.stringify(o,s,2),u){case"console":t("contextDump",a);break;default:a=a.replace(/</g,"\\u003c"),e=e.write(a)}return e},math:function(e,n,r,s){var u,c=s.key,l=s.method,d=s.operand,f=s.round;if(!s.hasOwnProperty("key")||!s.method)return t("math","`key` or `method` was not provided","ERROR"),e;switch(c=parseFloat(n.resolve(c)),d=parseFloat(n.resolve(d)),l){case"mod":0===d&&t("math","Division by 0","ERROR"),u=c%d;break;case"add":u=c+d;break;case"subtract":u=c-d;break;case"multiply":u=c*d;break;case"divide":0===d&&t("math","Division by 0","ERROR"),u=c/d;break;case"ceil":case"floor":case"round":case"abs":u=Math[l](c);break;case"toint":u=parseInt(c,10);break;default:t("math","Method `"+l+"` is not supported","ERROR")}return"undefined"!=typeof u&&(f&&(u=Math.round(u)),r&&r.block?(n=o(n,{key:u}),e=e.render(r.block,n),a(i(n))):e=e.write(u)),e},select:function(e,n,r,s){var u=r.block,c={};return s.hasOwnProperty("key")&&(c.key=n.resolve(s.key)),s.hasOwnProperty("type")&&(c.type=s.type),u?(n=o(n,c),e=e.render(u,n),a(i(n))):t("select","Missing body block","WARN"),e},eq:u("eq",function(e,t){return e===t}),ne:u("ne",function(e,t){return e!==t}),lt:u("lt",function(e,t){return t>e}),lte:u("lte",function(e,t){return t>=e}),gt:u("gt",function(e,t){return e>t}),gte:u("gte",function(e,t){return e>=t}),any:function(e,n,r,o){var a=i(n);return a?a.isDeferredComplete?t("any","Must not be nested inside {@any} or {@none} block","ERROR"):e=e.map(function(e){a.deferreds.push(function(){a.isResolved&&(e=e.render(r.block,n)),e.end()})}):t("any","Must be used inside a {@select} block","ERROR"),e},none:function(e,n,r,o){var a=i(n);return a?a.isDeferredComplete?t("none","Must not be nested inside {@any} or {@none} block","ERROR"):e=e.map(function(e){a.deferreds.push(function(){a.isResolved||(e=e.render(r.block,n)),e.end()})}):t("none","Must be used inside a {@select} block","ERROR"),e},size:function(t,n,r,i){var o,a,s=i.key;if(s=n.resolve(i.key),s&&s!==!0)if(e.isArray(s))o=s.length;else if(!isNaN(parseFloat(s))&&isFinite(s))o=s;else if("object"==typeof s){o=0;for(a in s)s.hasOwnProperty(a)&&o++}else o=(s+"").length;else o=0;return t.write(o)}};for(var h in f)e.helpers[h]=f[h];return e}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("dustjs"),require("dustjs-helpers"),require("elliptical-utils")):"function"==typeof define&&define.amd?define(["dustjs","dustjs-helpers","elliptical-utils"],t):e.returnExports=t(e.dust,e.dust.helpers,e.elliptical.utils)}(this,function(e,t,n){var r=n.string,i=n.random;return e.helpers.formatCurrency=function(t,r,i,o){var a,s=e.helpers.tap(o.value,t,r);try{n.isNumeric(s)?(s=parseFloat(s),a=s.toFixed(2)):a=""}catch(u){a=""}return t.write(a)},e.helpers.extFormatCurrency=function(t,r,i,o){var a,s=e.helpers.tap(o.value,t,r);try{n.isNumeric(s)?(s=parseFloat(s),a=s.toFixed(2),a="$"+a.toString()):a=""}catch(u){a=""}return t.write(a)},e.helpers.placeholder=function(t,n,r,i){var o=e.helpers.tap(i.value,t,n),a=e.helpers.tap(i.defaultValue,t,n);return o?t.write(o):t.write(a)},e.helpers.phraseCase=function(t,n,i,o){var a=e.helpers.tap(o.value,t,n);return a=r.camelCaseToSpace(a),t.write(a)},e.helpers.checked=function(t,n,r,i){var o=e.helpers.tap(i.value,t,n),a="";return o&&(a="checked"),t.write(a)},e.helpers.radio=function(t,n,r,i){var o=e.helpers.tap(i.value,t,n),a=e.helpers.tap(i.key,t,n),s="";try{o&&o.toLowerCase()===a.toLowerCase()&&(s="checked")}catch(u){}return t.write(s)},e.helpers.selected=function(t,n,r,i){var o=e.helpers.tap(i.value,t,n),a=e.helpers.tap(i.key,t,n),s="";try{o&&o.toLowerCase()===a.toLowerCase()&&(s="selected")}catch(u){}return t.write(s)},e.helpers.truthy=function(t,n,r,i){var o=e.helpers.tap(i.value,t,n),a=e.helpers.tap(i["true"],t,n),s=e.helpers.tap(i["false"],t,n),u=o?a:s;return t.write(u)},e.helpers.hide=function(t,n,r,i){var o=e.helpers.tap(i.value,t,n),a="";return o&&(a="hide"),t.write(a)},e.helpers.disable=function(t,n,r,i){var o=e.helpers.tap(i.value,t,n),a="";return o&&(a="disabled"),t.write(a)},e.helpers.readonly=function(t,n,r,i){var o=e.helpers.tap(i.value,t,n),a="";return o&&(a="readonly"),t.write(a)},e.helpers.position=function(e,t,n){var r=t.stack.index+1;return e.write(r)},e.helpers.index=function(e,t,n){var r=t.stack.index;return e.write(r)},e.helpers.urlEncode=function(t,n,r,i){var o=e.helpers.tap(i.value,t,n);return o=o?encodeURIComponent(o):"",t.write(o)},e.helpers.toggle=function(t,n,r,i){var o=e.helpers.tap(i.value,t,n),a=e.helpers.tap(i.on,t,n),s=e.helpers.tap(i.onCss,t,n),u=e.helpers.tap(i.offCss,t,n);return css=o===a?s:u,t.write(css)},e.helpers.compare=function(t,n,r,i){var o="",a=e.helpers.tap(i.value,t,n),s=e.helpers.tap(i.test,t,n),u=e.helpers.tap(i.echo,t,n);return a===s&&(o=u),t.write(o)},e.helpers.pluralize=function(t,n,r,i){var o=e.helpers.tap(i.count,t,n),a=e.helpers.tap(i.singular,t,n),s=e.helpers.tap(i.plural,t,n),u=1===o?a:s;return t.write(u)},e.helpers.id=function(t,n,r,o){var a=e.helpers.tap(o.value,t,n);return void 0===a&&(a=i.id()),t.write(a)},e.helpers.guid=function(t,n,r,o){var a=e.helpers.tap(o.value,t,n);return(void 0===a||""===a)&&(a=i.guid()),t.write(a)},e.helpers.inline={},e.helpers.inline.formatCurrency=function(e){e=parseFloat(e);var t;try{t=n.isNumeric(e)?e.toFixed(2):""}catch(r){t=""}return t},e.helpers.inline.extFormatCurrency=function(e){e=parseFloat(e);var t;return n.isNumeric(e)?(t=e.toFixed(2),t="$"+t.toString()):t="",t},e}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.returnExports=t()}(this,function(){var e={};return e.datetime={isDate:function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())},isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,this.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},setToStartOfDay:function(e){this.isDate(e)&&e.setHours(0,0,0,0)},compareDates:function(e,t){return e.getTime()===t.getTime()},currentDate:function(){var e=new Date,t=e.getDate(),n=e.getMonth()+1,r=e.getFullYear();return n+"/"+t+"/"+r}},e.array={isArray:function(e){return/Array/.test(Object.prototype.toString.call(e))},toStringFromArray:function(e,t){for(var n=e.length,r="",i=0;n>i;i++)void 0!==t?i!==t&&(r+=e[i]):r+=e[i];return r},toNamespaceFromArray:function(e){for(var t=e.length,n=t-1,r="",i=0;t>i;i++)r+=e[i].toString(),i!==n&&(r+=".");return r.toLowerCase()}},e.string={dashToCamelCase:function(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})},random:function(){return Math.floor(1e5*Math.random()+1).toString()},camelCaseToArray:function(e){return e.match(/[A-Z]?[a-z]+/g)},tagNameToNamespace:function(e){return e=e.replace(/-/g,"."),e.toLowerCase()}},e.color={rgb2hex:function(e){function t(e){return("0"+parseInt(e).toString(16)).slice(-2)}return-1==e.search("rgb")?e:"rgba(0, 0, 0, 0)"==e?"transparent":(e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/),"#"+t(e[1])+t(e[2])+t(e[3]))}},e.url={queryString:function(e){var t=window.location.search.substring(1),n=t.split("&");for(i=0;i<n.length;i++){var r=n[i].split("=");if(r[0]==e)return r[1]}return null},queryStringObjectArray:function(){var e=[],t=window.location.search.substring(1),n=t.split("&");for(i=0;i<n.length;i++){var r=n[i].split("=");if(r[0]==ji)return r[1];var o={};o.prop=r[0],o.val=r[1],e.push(o)}return e},queryStringFilterArray:function(){var e=[],t=window.location.search.substring(1),n=t.split("&");for(i=0;i<n.length;i++){var r=n[i].split("="),o={};o.filter=r[0],o.val=r[1],""!=o.filter&&e.push(o)}return e}},e.image={aspectRatio:function(e,t){var n=e.width(),r=e.height(),i=r/n;return t.aspectRatio=i,"undefined"!=typeof t.height?t.width=parseInt(1/i*t.height):"undefined"!=typeof t.width&&(t.height=parseInt(i*t.width)),t}},$.utils=$.utils||{},$.extend($.utils,e),$}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.returnExports=t()}(this,function(){return String.prototype.toCamelCase=function(){return this.replace(/[-_]([a-z])/g,function(e){return e[1].toUpperCase()})},String.prototype.toTitleCase=function(){return this.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},String.prototype.toPixel=function(){var e=parseInt(this,10);return e=e.toString()+"px"},String.prototype.toArrayFromCamelCase=function(){return this.match(/[A-Z]?[a-z]+/g)},String.prototype.toFloatPixel=function(){return this.toString()+"px"},String.prototype.toInteger=function(){return parseInt(this.replace("px",""),10)},String.prototype.toMillisecond=function(){var e=parseInt(this,10);return e=e.toString()+"ms"},String.prototype.toNode=function(){var e=$.parseHTML(this);return e[0]?e[0]:null},Number.prototype.toPixel=function(){var e=parseInt(this,10);return e=e.toString()+"px"},Number.prototype.toFloatPixel=function(){return this.toString()+"px"},Number.prototype.toMillisecond=function(){var e=parseInt(this,10);return e=e.toString()+"ms"},$.fn.alterClass=function(e,t){var n=this;if(-1===e.indexOf("*"))return n.removeClass(e),t?n.addClass(t):n;var r=new RegExp("\\s"+e.replace(/\*/g,"[A-Za-z0-9-_]+").split(" ").join("\\s|\\s")+"\\s","g");return n.each(function(e,t){for(var n=" "+t.className+" ";r.test(n);)n=n.replace(r," ");t.className=$.trim(n)}),t?n.addClass(t):n},$.fn.selfFind=function(e){return this.find(e).add(this.filter(e))},$.fn.clearSelect=function(e){return"undefined"==typeof e.defaultOption?this.children.remove():this.children("option:not(:first)").remove(),this},$.fn.findTextNodes=function(){return this.contents().filter(function(){return 3===this.nodeType})},$.fn.findTextNodeDescendants=function(){return this.find("*").contents().filter(function(){return 3===this.nodeType})},$.fn.isVisible=function(){var e=this.is(":visible"),t=this.css("visibility");return e&&"visible"===t},$.fn.query=function(e,t){var n=this,r=0,i=this.find(e);i[0]&&t(i);var o=setInterval(function(){i=n.find(e),i[0]||r>4?(clearInterval(o),t(i)):r++},500)},$.fn.detachClass=function(e){return this.each(function(){1===$(this).length?$(this).removeClass(e):$(this).length>1&&$.each($(this),function(t,n){$(n).removeClass(e)})})},$.fn.removeAnimation=function(e,t){var n=this,r=function(){n.removeClass("hide-important")};setTimeout(function(){n.addClass("hide-important"),t(),setTimeout(r,100)},e)},$.fn.timeout=function(e,t){setTimeout(function(){t()},e)},$.fn.closestChildren=function(e){if(!e||""===e)return $();var t=$();this.each(function(){var n=$(this),r=[];for(r.push(n);r.length>0;)for(var i=r.shift(),o=i.children(),a=0;a<o.length;++a){var s=$(o[a]);if(s.is(e))return t=o,!1;r.push(s)}});var n=[];return $.each(t,function(t,r){$(r).is(e)&&n.push(r)}),$(n)},$.fn.hasAttr=function(e){return this[0].hasAttribute(e)},$}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.returnExports=t()}(this,function(){var e={};e.mozilla=!1,e.webkit=!1,e.opera=!1,e.msie=!1;var t=navigator.userAgent;e.name=navigator.appName,e.fullVersion=""+parseFloat(navigator.appVersion),e.majorVersion=parseInt(navigator.appVersion,10);var n,r,i;return-1!=(r=t.indexOf("Opera"))?(e.opera=!0,e.name="Opera",e.fullVersion=t.substring(r+6),-1!=(r=t.indexOf("Version"))&&(e.fullVersion=t.substring(r+8))):-1!=(r=t.indexOf("MSIE"))?(e.msie=!0,e.name="Microsoft Internet Explorer",e.fullVersion=t.substring(r+5)):-1!=(r=t.indexOf("Chrome"))?(e.webkit=!0,e.name="Chrome",e.fullVersion=t.substring(r+7)):-1!=(r=t.indexOf("Safari"))?(e.webkit=!0,e.name="Safari",e.fullVersion=t.substring(r+7),-1!=(r=t.indexOf("Version"))&&(e.fullVersion=t.substring(r+8))):-1!=(r=t.indexOf("Firefox"))?(e.mozilla=!0,e.name="Firefox",e.fullVersion=t.substring(r+8)):(n=t.lastIndexOf(" ")+1)<(r=t.lastIndexOf("/"))?(e.name=t.substring(n,r),e.fullVersion=t.substring(r+1),e.name.toLowerCase()===e.name.toUpperCase()&&(e.name=navigator.appName)):-1!==t.indexOf("Mozilla")&&-1===t.indexOf("Firefox")&&(e.msie=!0,e.name="Internet Explorer",e.fullVersion="11"),-1!=(i=e.fullVersion.indexOf(";"))&&(e.fullVersion=e.fullVersion.substring(0,i)),-1!=(i=e.fullVersion.indexOf(" "))&&(e.fullVersion=e.fullVersion.substring(0,i)),e.majorVersion=parseInt(""+e.fullVersion,10),isNaN(e.majorVersion)&&(e.fullVersion=""+parseFloat(navigator.appVersion),e.majorVersion=parseInt(navigator.appVersion,10)),e.version=e.majorVersion,$.browser=$.browser||{},$.extend($.browser,e),$}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.returnExports=t()}(this,function(){function e(){return window.innerHeight||$(window).height()}function t(){return window.innerWidth||$(window).width()}var n=661,r={};return r.touch=$.support.touch||"ontouchend"in document,r.android=!1,r.iphone=!1,r.ipad=!1,r.ipod=!1,r.ios=!1,r.webos=!1,r.blackberry=!1,r.smartphone=!1,r.tablet=!1,r.retina=!1,/Android/.test(navigator.userAgent)?r.android=r.touch:/iPhone/.test(navigator.userAgent)?r.iphone=r.touch:/iPad/.test(navigator.userAgent)?r.ipad=r.touch:/iPod/.test(navigator.userAgent)?r.ipod=r.touch:/webOS/.test(navigator.userAgent)?r.webos=r.touch:/BlackBerry/.test(navigator.userAgent)&&(r.blackberry=r.touch),(r.iphone||r.ipad||r.ipod)&&(r.ios=!0),Object.defineProperties(r,{viewport:{get:function(){var n=t(),r=e();return{width:n,height:r}},configurable:!1},orientation:{get:function(){var n=t(),r=e();return r>n?"portrait":"landscape"},configurable:!1},orientationEvent:{get:function(){var e="onorientationchange"in window,t=e?"orientationchange":"resize";return t}}}),window.devicePixelRatio>1&&(r.retina=!0),e()>n||t()>n?(r.tablet=!0,r.smartphone=!1):(r.tablet=!1,r.smartphone=!0),r.touch||(r.tablet=!1,r.smartphone=!1),$.device=r,$}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.returnExports=t()}(this,function(){var e={},t=1024,n=320,r=640,i=641;return Object.defineProperties(e,{touch:{get:function(){return $.device.viewport.width<=t},configurable:!1},smartphone:{get:function(){return $.touch.device.viewport.width<=r},configurable:!1},touchQuery:{get:function(){var e="(max-width:"+t+"px) and (min-width:"+n+"px)";return e},configurable:!1},touchLandscapeQuery:{get:function(){var e="(max-width:"+t+"px) and (min-width:"+n+"px) and (orientation:landscape)";return e},configurable:!1},touchPortraitQuery:{get:function(){var e="(max-width:"+t+"px) and (min-width:"+n+"px) and (orientation:portrait)";return e},configurable:!1},tabletQuery:{get:function(){var e="(max-width:"+(t-1)+"px) and (min-width:"+i+"px)";return e},configurable:!1},tabletLandscapeQuery:{get:function(){var e="(max-width:"+t+"px) and (min-width:"+i+"px) and (orientation:landscape)";return e},configurable:!1},tabletPortraitQuery:{get:function(){var e="(max-width:"+t+"px) and (min-width:"+i+"px) and (orientation:portrait)";return e},configurable:!1},smartPhoneQuery:{get:function(){var e="(max-width:"+r+"px)";return e},configurable:!1},smartPhoneLandscapeQuery:{get:function(){var e="(max-width:"+r+"px) and (orientation:landscape)";return e},configurable:!1},smartPhonePortraitQuery:{get:function(){var e="(max-width:"+r+"px) and (orientation:portrait)";return e},configurable:!1},landscapeQuery:{get:function(){var e="(orientation:landscape)";return e},configurable:!1},portraitQuery:{get:function(){var e="(orientation:portrait)";return e},configurable:!1},desktopQuery:{get:function(){var e=t+1,n="(min-width:"+e+"px)";return n},configurable:!1}}),$.device=$.device||{},$.device.mq=e,$}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.returnExports=t()}(this,function(){function e(e){ne.cssText=e}function t(e,t){return typeof e===t}function n(e,t){return!!~(""+e).indexOf(t)}function r(e,t){for(var r in e){var i=e[r];if(!n(i,"-")&&void 0!==ne[i])return"pfx"==t?i:!0}return!1}function i(e,n,r){for(var i in e){var o=n[e[i]];if(void 0!==o)return r===!1?e[i]:t(o,"function")?o.bind(r||n):o}return!1}function o(e,t,n){return t?a(e,t,n):a(e,"pfx")}function a(e,n,o){var a=e.charAt(0).toUpperCase()+e.slice(1),s=(e+" "+ae.join(a+" ")+a).split(" ");return t(n,"string")||t(n,"undefined")?r(s,n):(s=(e+" "+se.join(a+" ")+a).split(" "),i(s,n,o))}function s(){return"orientation"in window&&"onorientationchange"in window}function u(){var e;return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?e=!0:le(["@media (",ie.join("touch-enabled),("),ee,")","{#elliptical{top:9px;position:absolute}}"].join(""),function(t){e=9===t.offsetTop}),e}function c(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}function l(){return"geolocation"in navigator}function d(){return!(!window.history||!history.pushState)}function f(){var e=document.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e}function h(){return"WebSocket"in window||"MozWebSocket"in window}function p(){var e=!!a("perspective");return e&&"webkitPerspective"in K.style&&le("@media (transform-3d),(-webkit-transform-3d){#elliptical{left:9px;position:absolute;height:3px;}}",function(t,n){e=9===t.offsetLeft&&3===t.offsetHeight}),e}function v(){var e=document.createElement("video"),t=!1;try{(t=!!e.canPlayType)&&(t=new Boolean(t),t.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),t.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),t.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(n){}return t}function m(){var e=document.createElement("audio"),t=!1;try{(t=!!e.canPlayType)&&(t=new Boolean(t),t.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),t.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),t.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),t.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(n){}return t}function g(){try{return localStorage.setItem(ee,ee),localStorage.removeItem(ee),!0}catch(e){return!1}}function b(){try{return sessionStorage.setItem(ee,ee),sessionStorage.removeItem(ee),!0}catch(e){return!1}}function y(){return!!window.Worker}function _(){return!!window.applicationCache}function w(){return!!document.createElementNS&&!!document.createElementNS(ue.svg,"svg").createSVGRect}function x(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==ue.svg}function C(){return!!document.createElementNS&&/SVGClipPath/.test(re.call(document.createElementNS(ue.svg,"clipPath")))}function E(){if(/Android/.test(navigator.userAgent))return!1;var e=document.createElement("elliptical"),t=("undefined"!=typeof e.style.webkitBackgroundClip&&(e.style.webkitBackgroundClip="text"),"text"==e.style.webkitBackgroundClip);return t}function O(){return"contentEditable"in document.documentElement}function k(){return a("overflowScrolling")}function N(){return a("resize")}function S(){return a("flexWrap")}function A(){return!!window.postMessage}function j(){return"undefined"!=typeof DataView&&"getFloat64"in DataView.prototype}function T(){var e=document.createElement("div");return e.setAttribute("data-a-b","c"),!(!e.dataset||"c"!==e.dataset.aB)}function P(){return void 0!==document.createElement("progress").max}function M(){return void 0!==document.createElement("meter").max}function I(){return!!o("requestFileSystem",window)}function D(){return!!(window.File&&window.FileList&&window.FileReader)}function R(){for(var e=0;e<se.length;e++)if(document[se[e].toLowerCase()+"CancelFullScreen"])return!0;return!!document.cancelFullScreen||!1}function L(){return!!(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest)}function F(){return!!o("battery",navigator)}function q(){var e=.2,t=o("battery",navigator);return!!(t&&!t.charging&&t.level<=e)}function z(){return a("flexWrap")}function V(){return!!a("indexedDB",window)}function B(){return e("background-color:hsla(120,40%,100%,.5)"),n(ne.backgroundColor,"rgba")||n(ne.backgroundColor,"hsla")}function H(){return e("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(ne.background)}function W(){return a("columnCount")}function U(){return a("boxReflect")}function Y(){return"DeviceMotionEvent"in window}function Q(){return"DeviceOrientationEvent"in window}function G(){var e=navigator.connection||{type:0};return e.type}function X(){var e=navigator.connection||{type:0};return 3==e.type||4==e.type||/^[23]g$/.test(e.type)}function Z(){var e=document.createElement("form");if(!("checkValidity"in e))return!1;var t,n=document.body,r=document.documentElement,i=!1,o=!1;e.onsubmit=function(e){window.opera||e.preventDefault(),e.stopPropagation()},e.innerHTML='<input name="modTest" required><button></button>',e.style.position="absolute",e.style.top="-99999em",n||(i=!0,n=document.createElement("body"),n.style.background="",r.appendChild(n)),n.appendChild(e),t=e.getElementsByTagName("input")[0],t.oninvalid=function(e){o=!0,e.preventDefault(),e.stopPropagation()};!!t.validationMessage;return e.getElementsByTagName("button")[0].click(),n.removeChild(e),i&&r.removeChild(n),o}var J={},K=document.documentElement,ee="elliptical",te=document.createElement(ee),ne=te.style,re={}.toString,ie=" -webkit- -moz- -o- -ms- ".split(" "),oe="Webkit Moz O ms",ae=oe.split(" "),se=oe.toLowerCase().split(" "),ue={svg:"http://www.w3.org/2000/svg"},ce=[],le=(ce.slice,function(e,t,n,r){var i,o,a,s,u=document.createElement("div"),c=document.body,l=c||document.createElement("body");if(parseInt(n,10))for(;n--;)a=document.createElement("div"),a.id=r?r[n]:ee+(n+1),u.appendChild(a);return i=["&#173;",'<style id="s',ee,'">',e,"</style>"].join(""),u.id=ee,(c?u:l).innerHTML+=i,l.appendChild(u),c||(l.style.background="",l.style.overflow="hidden",s=K.style.overflow,K.style.overflow="hidden",K.appendChild(l)),o=t(u,e),c?u.parentNode.removeChild(u):(l.parentNode.removeChild(l),K.style.overflow=s),!!o});({}).hasOwnProperty;return J.orientation=s(),J.touch=u(),J.canvas=c(),J.geolocation=l(),J.history=d(),J.dragdrop=f(),J.websockets=h(),J.css3dtransforms=p(),J.video=v(),J.audio=m(),J.localstorage=g(),J.sessionstorage=b(),J.webworkers=y(),J.applicationcache=_(),J.svg=w(),J.inlinesvg=x(),J.svgclippaths=C(),J.backgroundclip=E(),J.contenteditbale=O(),J.overflowscrolling=k(),J.cssresize=N(),J.flexwrap=S(),J.postmessage=A(),J.dataview=j(),J.dataset=T(),J.progressbar=P(),J.meter=M(),J.filesystem=I(),J.filereader=D(),J.fullscreen=R(),J.cors=L(),J.battery=F(),J.lowbattery=q(),J.flexbox=z(),J.indexeddb=V(),J.hsla=B(),J.multiplebgs=H(),J.csscolumns=W(),J.cssreflections=U(),J.devicemotion=Y(),J.deviceorientation=Q(),J.connectiontype=G(),J.lowbandwidth=X(),J.formvalidation=Z(),J.init=function(){var e=$("html");e.removeClass("no-js"),e.addClass("js");var t=["touch","canvas","svg","history","formvalidation","localstorage","sessionstorage","meter","backgroundclip","inlinesvg","svgclippaths","css3dtransforms","video","audio","progressbar","cssresize","postmessage","overflowscrolling","flexbox","indexeddb","hsla","multiplebgs","csscolumns","cssreflections","flexwrap"];t.forEach(function(t){J[t]?e.addClass(t):e.addClass("no-"+t)})},J.stickyFooter=function(){if($.browser.msie){var e=$(".ui-sticky-footer");e[0]&&e.addClass("ns")}},J.init(),J.stickyFooter(),$.support=$.support||{},$.extend($.support,J),$}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.returnExports=t()}(this,function(){function e(e){var t=["Moz","Webkit","O","ms"],n=e.charAt(0).toUpperCase()+e.substr(1);if(e in f.style)return e;for(var r=0;r<t.length;++r){var i=t[r]+n;if(i in f.style)return i}}function t(){return f.style[h.transform]="",f.style[h.transform]="rotateY(90deg)",""!==f.style[h.transform]}function n(e){return"string"==typeof e&&this.parse(e),this}function r(e,t,n){t===!0?e.queue(n):t?e.queue(t,n):n()}function i(e){var t=[];return $.each(e,function(e){e=$.camelCase(e),e=$.transit.propertyMap[e]||e,e=s(e),-1===$.inArray(e,t)&&t.push(e)}),t}function o(e,t,n,r){var o=i(e);$.cssEase[n]&&(n=$.cssEase[n]);var a=""+c(t)+" "+n;parseInt(r,10)>0&&(a+=" "+c(r));var s=[];return $.each(o,function(e,t){s.push(t+" "+a)}),s.join(", ")}function a(e,t){t||($.cssNumber[e]=!0),$.transit.propertyMap[e]=h.transform,$.cssHooks[e]={get:function(t){var r=$(t).css("transform")||new n;return r.get(e)},set:function(t,r){var i=$(t).css("transform")||new n;i.setFromString(e,r),$(t).css({transform:i})}}}function s(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function u(e,t){return"string"!=typeof e||e.match(/^[\-0-9\.]+$/)?""+e+t:e}function c(e){var t=e;return $.fx.speeds[t]&&(t=$.fx.speeds[t]),u(t,"ms");
}function l(e){var t=parseFloat(e/1e3);return t}function d(e,t,n,r,i){e.removeCSSStyles().removeClass(n),(r.indexOf("Out")>-1||r.indexOf("out")>-1)&&e.hide(),e.off(t),i&&void 0!==i&&i.call(e)}$.transit={propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var f=document.createElement("div"),h={},p=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;h.transition=e("transition"),h.transitionDelay=e("transitionDelay"),h.transform=e("transform"),h.transformOrigin=e("transformOrigin"),h.transform3d=t(),$.extend($.support,h);var v={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},m=h.transitionEnd=v[h.transition]||null;f=null,$.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)"},$.cssHooks.transform={get:function(e){return $(e).data("transform")},set:function(e,t){var r=t;r instanceof n||(r=new n(r)),"WebkitTransform"!==h.transform||p?e.style[h.transform]=r.toString():e.style[h.transform]=r.toString(!0),$(e).data("transform",r)}},$.cssHooks.transformOrigin={get:function(e){return e.style[h.transformOrigin]},set:function(e,t){e.style[h.transformOrigin]=t}},$.cssHooks.transition={get:function(e){return e.style[h.transition]},set:function(e,t){e.style[h.transition]=t}},a("scale"),a("translate"),a("rotate"),a("rotateX"),a("rotateY"),a("rotate3d"),a("perspective"),a("skewX"),a("skewY"),a("x",!0),a("y",!0),n.prototype={setFromString:function(e,t){var r="string"==typeof t?t.split(","):t.constructor===Array?t:[t];r.unshift(e),n.prototype.set.apply(this,r)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);this.setter[e]?this.setter[e].apply(this,t):this[e]=t.join(",")},get:function(e){return this.getter[e]?this.getter[e].apply(this):this[e]||0},setter:{rotate:function(e){this.rotate=u(e,"deg")},rotateX:function(e){this.rotateX=u(e,"deg")},rotateY:function(e){this.rotateY=u(e,"deg")},scale:function(e,t){void 0===t&&(t=e),this.scale=e+","+t},skewX:function(e){this.skewX=u(e,"deg")},skewY:function(e){this.skewY=u(e,"deg")},perspective:function(e){this.perspective=u(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==e&&(this._translateX=u(e,"px")),null!==t&&(this._translateY=u(t,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");return e[0]&&(e[0]=parseFloat(e[0])),e[1]&&(e[1]=parseFloat(e[1])),e[0]===e[1]?e[0]:e},rotate3d:function(){for(var e=(this.rotate3d||"0,0,0,0deg").split(","),t=0;3>=t;++t)e[t]&&(e[t]=parseFloat(e[t]));return e[3]&&(e[3]=u(e[3],"deg")),e}},parse:function(e){var t=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,n,r){t.setFromString(n,r)})},toString:function(e){var t=[];for(var n in this)if(this.hasOwnProperty(n)){if(!h.transform3d&&("rotateX"===n||"rotateY"===n||"perspective"===n||"transformOrigin"===n))continue;"_"!==n[0]&&(e&&"scale"===n?t.push(n+"3d("+this[n]+",1)"):e&&"translate"===n?t.push(n+"3d("+this[n]+",0)"):t.push(n+"("+this[n]+")"))}return t.join(" ")}},$.fn.transition=$.fn.transit=function(e,t){var n,i,a,s,u=this,d=0,f=!0;if("undefined"!=typeof e.easing&&(n=e.easing,delete e.easing),"undefined"!=typeof e.duration&&(i=e.duration,delete e.duration),"undefined"!=typeof e.complete&&(t=e.complete,delete e.complete),"undefined"!=typeof e.queue&&(f=e.queue,delete e.queue),"undefined"!=typeof e.delay&&(d=e.delay,delete e.delay),s=e.preset,a=e.count,void 0!==s){i=void 0===i||0===i?"":l(i).toString(),d=void 0===d||0===d?"":l(d).toString(),a=void 0===a||0===a?"":a.toString();var p={};return p.duration=i,p.delay=d,p.count=a,g.animate(u,p,t,s,e.remove)}"undefined"==typeof i&&(i=$.fx.speeds._default),"undefined"==typeof n&&(n=$.cssEase._default),i=c(i);var v=o(e,i,n,d),b=$.transit.enabled&&h.transition,y=b?parseInt(i,10)+parseInt(d,10):0;if(0===y){var _=function(n){u.css(e),t&&t.apply(u),n&&n()};return r(u,f,_),u}var w={},x=function(n){var r=!1,i=function(){r&&u.unbind(m,i),y>0&&u.each(function(){this.style[h.transition]=w[this]||null}),"function"==typeof t&&t.apply(u),"function"==typeof n&&n()};y>0&&m&&$.transit.useTransitionEnd?(r=!0,u.bind(m,i)):window.setTimeout(i,y),u.each(function(){y>0&&(this.style[h.transition]=v),$(this).css(e)})},C=function(e){var t=0;"MozTransition"===h.transition&&25>t&&(t=25),window.setTimeout(function(){x(e)},t)};return r(u,f,C),this},$.transit.getTransitionValue=o;var g={};return g.pfx=["webkit","moz","MS","o"],$.browser.webkit?g.animationend=g.pfx[0]+"AnimationEnd":g.animationend="animationend",g.isAnimated=function(e){if(e[0]){for(var t=e[0].className.split(/\s+/),n=0;n<t.length;n++)if("animated"===t[n])return!0;return!1}},g.animate=function(e,t,n,r,i){if(g.isAnimated(e))return e;void 0===t&&(t={}),e.show(),e.css({visibility:"visible"});var o="animated "+r;return e.on(g.animationend,function(t){void 0!==i?(e.removeClass(i),d(e,t,o,r,n)):d(e,t,o,r,n)}),e.addCSSStyles(t).addClass(o),e},g.animationEndEvent=function(){return g.animationend},g.transitionEndEvent=function(){var e,t=["webkit","moz","MS","o"];return e=$.browser.webkit?t[0]+"TransitionEnd":$.browser.mozilla?"transitionend":$.browser.msie?t[2]+"TransitionEnd":$.browser.opera?t[3]+"TransitionEnd":"transitionend"},$.fn.removeCSSStyles=function(){return this.css({"animation-duration":"","animation-delay":"","animation-iteration-count":"","-webkit-animation-duration":"","-webkit-animation-delay":"","-webkit-animation-iteration-count":"","-moz-animation-duration":"","-moz-animation-delay":"","-moz-animation-iteration-count":"",visibility:""}),this},$.fn.addCSSStyles=function(e){var t=e.duration,n=e.delay,r=e.count;return t=void 0===t?"":e.duration.toString()+"s",n=void 0===n?"":e.delay.toString()+"s",r=void 0===r?"":e.count.toString(),this.css({"animation-duration":t,"animation-delay":n,"animation-iteration-count":r,"-webkit-animation-duration":t,"-webkit-animation-delay":n,"-webkit-animation-iteration-count":r,"-moz-animation-duration":t,"-moz-animation-delay":n,"-moz-animation-iteration-count":r}),this},$.transit.CSS3=g,$}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.returnExports=t()}(this,function(){!function(e,t){"use strict";if("function"!=typeof e.createEvent)return!1;var n,r,i,o,a,s="undefined"!=typeof jQuery,u=!!navigator.pointerEnabled||navigator.msPointerEnabled,c=!!("ontouchstart"in window)&&navigator.userAgent.indexOf("PhantomJS")<0||u,l=function(e){var t=e.toLowerCase(),n="MS"+e;return navigator.msPointerEnabled?n:t},d={touchstart:l("PointerDown")+" touchstart",touchend:l("PointerUp")+" touchend",touchmove:l("PointerMove")+" touchmove"},f=function(e,t,n){for(var r=t.split(" "),i=r.length;i--;)e.addEventListener(r[i],n,!1)},h=function(e){return e.targetTouches?e.targetTouches[0]:e},p=function(t,i,o,a){var u=e.createEvent("Event");if(a=a||{},a.x=n,a.y=r,a.distance=a.distance,s)jQuery(t).trigger(i,a);else{u.originalEvent=o;for(var c in a)u[c]=a[c];u.initEvent(i,!0,!0),t.dispatchEvent(u)}},v=function(e){var t=h(e);i=n=t.pageX,o=r=t.pageY,b=!0,C++,clearTimeout(a),a=setTimeout(function(){i>=n-w&&n+w>=i&&o>=r-w&&r+w>=o&&!b&&p(e.target,2===C?"dbltap":"tap",e),C=0},_)},m=function(e){var t=[],a=o-r,s=i-n;if(b=!1,-y>=s&&t.push("swiperight"),s>=y&&t.push("swipeleft"),-y>=a&&t.push("swipedown"),a>=y&&t.push("swipeup"),t.length)for(var u=0;u<t.length;u++){var c=t[u];p(e.target,c,e,{distance:{x:Math.abs(s),y:Math.abs(a)}})}},g=function(e){var t=h(e);n=t.pageX,r=t.pageY},b=!1,y=t.SWIPE_TRESHOLD||80,_=t.TAP_TRESHOLD||200,w=t.TAP_PRECISION/2||30,x=t.JUST_ON_TOUCH_DEVICES||c,C=0;f(e,d.touchstart+(x?"":" mousedown"),v),f(e,d.touchend+(x?"":" mouseup"),m),f(e,d.touchmove+(x?"":" mousemove"),g)}(document,window)}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.returnExports=t()}(this,function(){!function(){$.event.special.throttledresize={setup:function(){$(this).bind("resize",i)},teardown:function(){$(this).unbind("resize",i)}};var e,t,n,r=250,i=function(){t=(new Date).getTime(),n=t-o,n>=r?(o=t,$(this).trigger("throttledresize")):(e&&clearTimeout(e),e=setTimeout(i,r-n))},o=0}(),function(){function e(){var e=t();e!==n&&(n=e,o.trigger(a))}var t,n,r,i,o=$(window),a="orientationchange",s={0:!0,180:!0};if($.device.orientation){var u=window.innerWidth||$(window).width(),c=window.innerHeight||$(window).height(),l=50;r=u>c&&u-c>l,i=s[window.orientation],(r&&i||!r&&!i)&&(s={"-90":!0,90:!0})}$.event.special.orientationchange=$.extend({},$.event.special.orientationchange,{setup:function(){return!$.device.orientation||$.event.special.orientationchange.disabled||$.device.android?(n=t(),void o.bind("throttledresize",e)):!1},teardown:function(){return!$.device.orientation||$.event.special.orientationchange.disabled||$.device.android?void o.unbind("throttledresize",e):!1},add:function(e){var n=e.handler;e.handler=function(e){return e.orientation=t(),n.apply(this,arguments)}}}),$.event.special.orientationchange.orientation=t=function(){var e=!0,t=document.documentElement;return e=$.support.orientation?s[window.orientation]:t&&t.clientWidth/t.clientHeight<1.1,e?"portrait":"landscape"},$.fn[a]=function(e){return e?this.bind(a,e):this.trigger(a)},$.attrFn&&($.attrFn[a]=!0)}(),function(){var e=$("meta[name=viewport]"),t=e.attr("content"),n=t+",maximum-scale=1, user-scalable=no",r=t+",maximum-scale=10, user-scalable=yes",i=/(user-scalable[\s]*=[\s]*no)|(maximum-scale[\s]*=[\s]*1)[$,\s]/.test(t);$.device.zoom=$.extend({},{enabled:!i,locked:!1,disable:function(t){i||$.device.zoom.locked||(e.attr("content",n),$.device.zoom.enabled=!1,$.device.zoom.locked=t||!1)},enable:function(t){i||$.device.zoom.locked&&t!==!0||(e.attr("content",r),$.device.zoom.enabled=!0,$.device.zoom.locked=!1)},restore:function(){i||(e.attr("content",t),$.device.zoom.enabled=!0)}})}(),function(){function e(e){t=e.originalEvent,o=t.accelerationIncludingGravity,n=Math.abs(o.x),r=Math.abs(o.y),i=Math.abs(o.z),!window.orientation&&(n>7||(i>6&&8>r||8>i&&r>6)&&n>5)?a.enabled&&a.disable():a.enabled||a.enable()}if(/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1){var t,n,r,i,o,a=$.device.zoom;$(window).bind("orientationchange.iosorientationfix",a.enable).bind("devicemotion.iosorientationfix",e)}}(),function(){function e(e,t,n,r){var i=n.type;n.type=t,r?$.event.trigger(n,void 0,e):$.event.dispatch.call(e,n),n.type=i}var t="touchmove scroll";$.event.special.scrollstart={enabled:!0,setup:function(){function n(t,n){r=n,e(o,r?"scrollstart":"scrollstop",t)}var r,i,o=this,a=$(o);a.bind(t,function(e){$.event.special.scrollstart.enabled&&(r||n(e,!0),clearTimeout(i),i=setTimeout(function(){n(e,!1)},50))})},teardown:function(){$(this).unbind(t)}}}(),function(){function e(e,t){var n=t.handler,r=t.selector;e.on("click",r,function(e){return e.preventDefault(),e.namespace="elliptical.click",n.apply(this,arguments)})}function t(e,t){var n=t.handler,r=t.selector;e.on("touchstart",r,function(e){return e.preventDefault(),e.namespace="elliptical.touch",n.apply(this,arguments)})}function n(e,t){var n=t.selector;e.off("click",n)}function r(e,t){var n=t.selector;e.off("touchstart",n)}var i=!1;$.event.special.touchclick={setup:function(){i=$.device.touch},add:function(n){i?t($(this),n):e($(this),n)},remove:function(e){i?r($(this),e):n($(this),e)}}}(),function(){function e(e,t){var n=t.handler,r=t.selector;e.on("mouseenter",r,function(e){return e.preventDefault(),e.type="hoverover",e.namespace="elliptical.hoverover",n.apply(this,arguments)}),e.on("mouseleave",r,function(e){return e.preventDefault(),e.type="hoverout",e.namespace="elliptical.hoverout",n.apply(this,arguments)})}function t(e,t){var n=t.handler,r=t.selector;e.on("touchend",r,function(t){return t.preventDefault(),e.hasClass("over")?(t.type="hoverout",t.namespace="elliptical.hoverout",e.removeClass("over")):(t.type="hoverover",t.namespace="elliptical.hoverover",e.addClass("over")),n.apply(this,arguments)})}function n(e,t){var n=t.selector;e.off("mouseenter",n),e.off("mouseleave",n)}function r(e,t){var n=t.selector;e.off("touchend",n)}var i=!1;$.event.special.touchhover={setup:function(){i=$.device.touch},add:function(n){i?t($(this),n):e($(this),n)},remove:function(e){i?r($(this),e):n($(this),e)}}}(),function(){function e(e){e.addClass("hide")}function t(e){e.removeClass("hide")}if($.device.ios){var n=$("input, textarea"),r=$("ui-navbar, ui-topbar");r[0]&&(n.on("focusin",function(t){e(r)}),n.on("focusout",function(e){t(r)}))}}()}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):e.returnExports=t()}(this,function(){var e={};return e.setHardwareAcceleration=function(e,t){var n;return e.hasClass(t)?n=!1:(n=!0,e.addClass(t)),n},e.resetHardwareAcceleration=function(e,t,n){t&&e.removeClass(n)},e.setContainerOverflow=function(e,t){var n;return e.hasClass(t)?n=!1:(n=!0,e.addClass(t)),n},e.resetContainerOverflow=function(e,t,n){t&&e.removeClass(n)},e.resetContainer=function(e,t,n){e&&e.css({transition:"","-webkit-transition":"","-webkit-transform":"","-moz-transition":"","-moz-transform":"",transform:"",height:""}).removeClass(t).removeClass(n)},e.resetTransition=function(e){e.css({transition:"","-webkit-transition":"","-moz-transition":""})},e.resetTransform=function(e){e.css({transition:"","-webkit-transition":"","-webkit-transform":"","-moz-transition":"","-moz-transform":"",transform:""})},e.transform=function(e,t){var n={"-webkit-transform":"translate3d("+t.x+","+t.y+","+t.z+")","-moz-transform":"translate3d("+t.x+","+t.y+","+t.z+")",transform:"translate3d("+t.x+","+t.y+","+t.z+")"};e.css(n)},e.transition3d=function(e,t,n){var r=$.transit.CSS3,i=r.transitionEndEvent(),o=t.coordinates;o.x=o.x.toPixel(),o.y=o.y.toPixel(),o.z=o.z.toPixel();var a=t.easing||"ease-in-out";t.duration=t.duration.toMillisecond()||"300ms",t.delay=t.delay.toMillisecond()||0,t.transitionEnd=t.transitionEnd||!1;var s={transition:"transform "+t.duration+" "+t.delay+" "+a,"-webkit-transition":"-webkit-transform "+t.duration+" "+t.delay+" "+a,"-moz-transition":"-moz-transform "+t.duration+" "+t.delay+" "+a,"-webkit-transform":"translate3d("+o.x+","+o.y+","+o.z+")","-moz-transform":"translate3d("+o.x+","+o.y+","+o.z+")",transform:"translate3d("+o.x+","+o.y+","+o.z+")"};e.on(i,function(){t.transitionEnd&&$(this).off(i),n&&n()}).css(s)},$.transforms=$.transforms||{},$.extend($.transforms,e),$});var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},MutationObserverCtor;if(MutationObserverCtor="undefined"!=typeof WebKitMutationObserver?WebKitMutationObserver:MutationObserver,void 0===MutationObserverCtor)throw console.error("DOM Mutation Observers are required."),console.error("https://developer.mozilla.org/en-US/docs/DOM/MutationObserver"),Error("DOM Mutation Observers are required");var NodeMap=function(){function e(){this.nodes=[],this.values=[]}return e.prototype.isIndex=function(e){return+e===e>>>0},e.prototype.nodeId=function(t){var n=t[e.ID_PROP];return n||(n=t[e.ID_PROP]=e.nextId_++),n},e.prototype.set=function(e,t){var n=this.nodeId(e);this.nodes[n]=e,this.values[n]=t},e.prototype.get=function(e){var t=this.nodeId(e);return this.values[t]},e.prototype.has=function(e){return this.nodeId(e)in this.nodes},e.prototype["delete"]=function(e){var t=this.nodeId(e);delete this.nodes[t],this.values[t]=void 0},e.prototype.keys=function(){var e=[];for(var t in this.nodes)this.isIndex(t)&&e.push(this.nodes[t]);return e},e.ID_PROP="__mutation_summary_node_map_id__",e.nextId_=1,e}(),Movement;!function(e){e[e.STAYED_OUT=0]="STAYED_OUT",e[e.ENTERED=1]="ENTERED",e[e.STAYED_IN=2]="STAYED_IN",e[e.REPARENTED=3]="REPARENTED",e[e.REORDERED=4]="REORDERED",e[e.EXITED=5]="EXITED"}(Movement||(Movement={}));var NodeChange=function(){function e(e,t,n,r,i,o,a,s){void 0===t&&(t=!1),void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=null),void 0===o&&(o=!1),void 0===a&&(a=null),void 0===s&&(s=null),this.node=e,this.childList=t,this.attributes=n,this.characterData=r,this.oldParentNode=i,this.added=o,this.attributeOldValues=a,this.characterDataOldValue=s,this.isCaseInsensitive=this.node.nodeType===Node.ELEMENT_NODE&&this.node instanceof HTMLElement&&this.node.ownerDocument instanceof HTMLDocument}return e.prototype.getAttributeOldValue=function(e){return this.attributeOldValues?(this.isCaseInsensitive&&(e=e.toLowerCase()),this.attributeOldValues[e]):void 0},e.prototype.getAttributeNamesMutated=function(){var e=[];if(!this.attributeOldValues)return e;for(var t in this.attributeOldValues)e.push(t);return e},e.prototype.attributeMutated=function(e,t){this.attributes=!0,this.attributeOldValues=this.attributeOldValues||{},e in this.attributeOldValues||(this.attributeOldValues[e]=t)},e.prototype.characterDataMutated=function(e){this.characterData||(this.characterData=!0,this.characterDataOldValue=e)},e.prototype.removedFromParent=function(e){this.childList=!0,this.added||this.oldParentNode?this.added=!1:this.oldParentNode=e},e.prototype.insertedIntoParent=function(){this.childList=!0,this.added=!0},e.prototype.getOldParent=function(){if(this.childList){if(this.oldParentNode)return this.oldParentNode;if(this.added)return null}return this.node.parentNode},e}(),ChildListChange=function(){function e(){this.added=new NodeMap,this.removed=new NodeMap,this.maybeMoved=new NodeMap,this.oldPrevious=new NodeMap,this.moved=void 0}return e}(),TreeChanges=function(e){function t(t,n){e.call(this),this.rootNode=t,this.reachableCache=void 0,this.wasReachableCache=void 0,this.anyParentsChanged=!1,this.anyAttributesChanged=!1,this.anyCharacterDataChanged=!1;for(var r=0;r<n.length;r++){var i=n[r];switch(i.type){case"childList":this.anyParentsChanged=!0;for(var o=0;o<i.removedNodes.length;o++){var a=i.removedNodes[o];this.getChange(a).removedFromParent(i.target)}for(var o=0;o<i.addedNodes.length;o++){var a=i.addedNodes[o];this.getChange(a).insertedIntoParent()}break;case"attributes":this.anyAttributesChanged=!0;var s=this.getChange(i.target);s.attributeMutated(i.attributeName,i.oldValue);break;case"characterData":this.anyCharacterDataChanged=!0;var s=this.getChange(i.target);s.characterDataMutated(i.oldValue)}}}return __extends(t,e),t.prototype.getChange=function(e){var t=this.get(e);return t||(t=new NodeChange(e),this.set(e,t)),t},t.prototype.getOldParent=function(e){var t=this.get(e);return t?t.getOldParent():e.parentNode},t.prototype.getIsReachable=function(e){if(e===this.rootNode)return!0;if(!e)return!1;this.reachableCache=this.reachableCache||new NodeMap;var t=this.reachableCache.get(e);return void 0===t&&(t=this.getIsReachable(e.parentNode),this.reachableCache.set(e,t)),t},t.prototype.getWasReachable=function(e){if(e===this.rootNode)return!0;if(!e)return!1;this.wasReachableCache=this.wasReachableCache||new NodeMap;var t=this.wasReachableCache.get(e);return void 0===t&&(t=this.getWasReachable(this.getOldParent(e)),this.wasReachableCache.set(e,t)),t},t.prototype.reachabilityChange=function(e){return this.getIsReachable(e)?this.getWasReachable(e)?Movement.STAYED_IN:Movement.ENTERED:this.getWasReachable(e)?Movement.EXITED:Movement.STAYED_OUT},t}(NodeMap),MutationProjection=function(){function e(e,t,n,r,i){this.rootNode=e,this.mutations=t,this.selectors=n,this.calcReordered=r,this.calcOldPreviousSibling=i,this.treeChanges=new TreeChanges(e,t),this.entered=[],this.exited=[],this.stayedIn=new NodeMap,this.visited=new NodeMap,this.childListChangeMap=void 0,this.characterDataOnly=void 0,this.matchCache=void 0,this.processMutations()}return e.prototype.processMutations=function(){if(this.treeChanges.anyParentsChanged||this.treeChanges.anyAttributesChanged)for(var e=this.treeChanges.keys(),t=0;t<e.length;t++)this.visitNode(e[t],void 0)},e.prototype.visitNode=function(e,t){if(!this.visited.has(e)){this.visited.set(e,!0);var n=this.treeChanges.get(e),r=t;if((n&&n.childList||void 0==r)&&(r=this.treeChanges.reachabilityChange(e)),r!==Movement.STAYED_OUT){if(this.matchabilityChange(e),r===Movement.ENTERED)this.entered.push(e);else if(r===Movement.EXITED)this.exited.push(e),this.ensureHasOldPreviousSiblingIfNeeded(e);else if(r===Movement.STAYED_IN){var i=Movement.STAYED_IN;n&&n.childList&&(n.oldParentNode!==e.parentNode?(i=Movement.REPARENTED,this.ensureHasOldPreviousSiblingIfNeeded(e)):this.calcReordered&&this.wasReordered(e)&&(i=Movement.REORDERED)),this.stayedIn.set(e,i)}if(r!==Movement.STAYED_IN)for(var o=e.firstChild;o;o=o.nextSibling)this.visitNode(o,r)}}},e.prototype.ensureHasOldPreviousSiblingIfNeeded=function(e){if(this.calcOldPreviousSibling){this.processChildlistChanges();var t=e.parentNode,n=this.treeChanges.get(e);n&&n.oldParentNode&&(t=n.oldParentNode);var r=this.childListChangeMap.get(t);r||(r=new ChildListChange,this.childListChangeMap.set(t,r)),r.oldPrevious.has(e)||r.oldPrevious.set(e,e.previousSibling)}},e.prototype.getChanged=function(e,t,n){this.selectors=t,this.characterDataOnly=n;for(var r=0;r<this.entered.length;r++){var i=this.entered[r],o=this.matchabilityChange(i);(o===Movement.ENTERED||o===Movement.STAYED_IN)&&e.added.push(i)}for(var a=this.stayedIn.keys(),r=0;r<a.length;r++){var i=a[r],o=this.matchabilityChange(i);if(o===Movement.ENTERED)e.added.push(i);else if(o===Movement.EXITED)e.removed.push(i);else if(o===Movement.STAYED_IN&&(e.reparented||e.reordered)){var s=this.stayedIn.get(i);e.reparented&&s===Movement.REPARENTED?e.reparented.push(i):e.reordered&&s===Movement.REORDERED&&e.reordered.push(i)}}for(var r=0;r<this.exited.length;r++){var i=this.exited[r],o=this.matchabilityChange(i);(o===Movement.EXITED||o===Movement.STAYED_IN)&&e.removed.push(i)}},e.prototype.getOldParentNode=function(e){var t=this.treeChanges.get(e);if(t&&t.childList)return t.oldParentNode?t.oldParentNode:null;var n=this.treeChanges.reachabilityChange(e);if(n===Movement.STAYED_OUT||n===Movement.ENTERED)throw Error("getOldParentNode requested on invalid node.");return e.parentNode},e.prototype.getOldPreviousSibling=function(e){var t=e.parentNode,n=this.treeChanges.get(e);n&&n.oldParentNode&&(t=n.oldParentNode);var r=this.childListChangeMap.get(t);if(!r)throw Error("getOldPreviousSibling requested on invalid node.");return r.oldPrevious.get(e)},e.prototype.getOldAttribute=function(e,t){var n=this.treeChanges.get(e);if(!n||!n.attributes)throw Error("getOldAttribute requested on invalid node.");var r=n.getAttributeOldValue(t);if(void 0===r)throw Error("getOldAttribute requested for unchanged attribute name.");return r},e.prototype.attributeChangedNodes=function(e){if(!this.treeChanges.anyAttributesChanged)return{};var t,n;if(e){t={},n={};for(var r=0;r<e.length;r++){var i=e[r];t[i]=!0,n[i.toLowerCase()]=i}}for(var o={},a=this.treeChanges.keys(),r=0;r<a.length;r++){var s=a[r],u=this.treeChanges.get(s);if(u.attributes&&Movement.STAYED_IN===this.treeChanges.reachabilityChange(s)&&Movement.STAYED_IN===this.matchabilityChange(s))for(var c=s,l=u.getAttributeNamesMutated(),d=0;d<l.length;d++){var i=l[d];if(!t||t[i]||u.isCaseInsensitive&&n[i]){var f=u.getAttributeOldValue(i);f!==c.getAttribute(i)&&(n&&u.isCaseInsensitive&&(i=n[i]),o[i]=o[i]||[],o[i].push(c))}}}return o},e.prototype.getOldCharacterData=function(e){var t=this.treeChanges.get(e);if(!t||!t.characterData)throw Error("getOldCharacterData requested on invalid node.");return t.characterDataOldValue},e.prototype.getCharacterDataChanged=function(){if(!this.treeChanges.anyCharacterDataChanged)return[];for(var e=this.treeChanges.keys(),t=[],n=0;n<e.length;n++){var r=e[n];if(Movement.STAYED_IN===this.treeChanges.reachabilityChange(r)){var i=this.treeChanges.get(r);i.characterData&&r.textContent!=i.characterDataOldValue&&t.push(r)}}return t},e.prototype.computeMatchabilityChange=function(e,t){this.matchCache||(this.matchCache=[]),this.matchCache[e.uid]||(this.matchCache[e.uid]=new NodeMap);var n=this.matchCache[e.uid],r=n.get(t);return void 0===r&&(r=e.matchabilityChange(t,this.treeChanges.get(t)),n.set(t,r)),r},e.prototype.matchabilityChange=function(e){var t=this;if(this.characterDataOnly)switch(e.nodeType){case Node.COMMENT_NODE:case Node.TEXT_NODE:return Movement.STAYED_IN;default:return Movement.STAYED_OUT}if(!this.selectors)return Movement.STAYED_IN;if(e.nodeType!==Node.ELEMENT_NODE)return Movement.STAYED_OUT;for(var n=e,r=this.selectors.map(function(e){return t.computeMatchabilityChange(e,n)}),i=Movement.STAYED_OUT,o=0;i!==Movement.STAYED_IN&&o<r.length;){switch(r[o]){case Movement.STAYED_IN:i=Movement.STAYED_IN;break;case Movement.ENTERED:i=i===Movement.EXITED?Movement.STAYED_IN:Movement.ENTERED;break;case Movement.EXITED:i=i===Movement.ENTERED?Movement.STAYED_IN:Movement.EXITED}o++}return i},e.prototype.getChildlistChange=function(e){var t=this.childListChangeMap.get(e);return t||(t=new ChildListChange,this.childListChangeMap.set(e,t)),t},e.prototype.processChildlistChanges=function(){function e(e,t){!e||r.oldPrevious.has(e)||r.added.has(e)||r.maybeMoved.has(e)||t&&(r.added.has(t)||r.maybeMoved.has(t))||r.oldPrevious.set(e,t)}if(!this.childListChangeMap){this.childListChangeMap=new NodeMap;for(var t=0;t<this.mutations.length;t++){var n=this.mutations[t];if("childList"==n.type&&(this.treeChanges.reachabilityChange(n.target)===Movement.STAYED_IN||this.calcOldPreviousSibling)){for(var r=this.getChildlistChange(n.target),i=n.previousSibling,o=0;o<n.removedNodes.length;o++){var a=n.removedNodes[o];e(a,i),r.added.has(a)?r.added["delete"](a):(r.removed.set(a,!0),r.maybeMoved["delete"](a)),i=a}e(n.nextSibling,i);for(var o=0;o<n.addedNodes.length;o++){var a=n.addedNodes[o];r.removed.has(a)?(r.removed["delete"](a),r.maybeMoved.set(a,!0)):r.added.set(a,!0)}}}}},e.prototype.wasReordered=function(e){function t(e){if(!e)return!1;if(!a.maybeMoved.has(e))return!1;var t=a.moved.get(e);return void 0!==t?t:(s.has(e)?t=!0:(s.set(e,!0),t=r(e)!==n(e)),s.has(e)?(s["delete"](e),a.moved.set(e,t)):t=a.moved.get(e),t)}function n(e){var r=u.get(e);if(void 0!==r)return r;for(r=a.oldPrevious.get(e);r&&(a.removed.has(r)||t(r));)r=n(r);return void 0===r&&(r=e.previousSibling),u.set(e,r),r}function r(e){if(c.has(e))return c.get(e);for(var n=e.previousSibling;n&&(a.added.has(n)||t(n));)n=n.previousSibling;return c.set(e,n),n}if(!this.treeChanges.anyParentsChanged)return!1;this.processChildlistChanges();var i=e.parentNode,o=this.treeChanges.get(e);o&&o.oldParentNode&&(i=o.oldParentNode);var a=this.childListChangeMap.get(i);if(!a)return!1;if(a.moved)return a.moved.get(e);a.moved=new NodeMap;var s=new NodeMap,u=new NodeMap,c=new NodeMap;return a.maybeMoved.keys().forEach(t),a.moved.get(e)},e}(),Summary=function(){function e(e,t){var n=this;if(this.projection=e,this.added=[],this.removed=[],this.reparented=t.all||t.element||t.characterData?[]:void 0,this.reordered=t.all?[]:void 0,e.getChanged(this,t.elementFilter,t.characterData),t.all||t.attribute||t.attributeList){var r=t.attribute?[t.attribute]:t.attributeList,i=e.attributeChangedNodes(r);t.attribute?this.valueChanged=i[t.attribute]||[]:(this.attributeChanged=i,t.attributeList&&t.attributeList.forEach(function(e){n.attributeChanged.hasOwnProperty(e)||(n.attributeChanged[e]=[])}))}if(t.all||t.characterData){var o=e.getCharacterDataChanged();t.characterData?this.valueChanged=o:this.characterDataChanged=o}this.reordered&&(this.getOldPreviousSibling=e.getOldPreviousSibling.bind(e))}return e.prototype.getOldParentNode=function(e){return this.projection.getOldParentNode(e)},e.prototype.getOldAttribute=function(e,t){return this.projection.getOldAttribute(e,t)},e.prototype.getOldCharacterData=function(e){return this.projection.getOldCharacterData(e)},e.prototype.getOldPreviousSibling=function(e){return this.projection.getOldPreviousSibling(e)},e}(),validNameInitialChar=/[a-zA-Z_]+/,validNameNonInitialChar=/[a-zA-Z0-9_\-]+/,Qualifier=function(){function e(){}return e.prototype.matches=function(e){if(null===e)return!1;if(void 0===this.attrValue)return!0;if(!this.contains)return this.attrValue==e;for(var t=e.split(" "),n=0;n<t.length;n++)if(this.attrValue===t[n])return!0;return!1},e.prototype.toString=function(){return"class"===this.attrName&&this.contains?"."+this.attrValue:"id"!==this.attrName||this.contains?this.contains?"["+this.attrName+"~="+escapeQuotes(this.attrValue)+"]":"attrValue"in this?"["+this.attrName+"="+escapeQuotes(this.attrValue)+"]":"["+this.attrName+"]":"#"+this.attrValue},e}(),Selector=function(){function e(){this.uid=e.nextUid++,this.qualifiers=[]}return Object.defineProperty(e.prototype,"caseInsensitiveTagName",{get:function(){return this.tagName.toUpperCase()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectorString",{get:function(){return this.tagName+this.qualifiers.join("")},enumerable:!0,configurable:!0}),e.prototype.isMatching=function(t){return t[e.matchesSelector](this.selectorString)},e.prototype.wasMatching=function(e,t,n){if(!t||!t.attributes)return n;var r=t.isCaseInsensitive?this.caseInsensitiveTagName:this.tagName;if("*"!==r&&r!==e.tagName)return!1;for(var i=[],o=!1,a=0;a<this.qualifiers.length;a++){var s=this.qualifiers[a],u=t.getAttributeOldValue(s.attrName);i.push(u),o=o||void 0!==u}if(!o)return n;for(var a=0;a<this.qualifiers.length;a++){var s=this.qualifiers[a],u=i[a];if(void 0===u&&(u=e.getAttribute(s.attrName)),!s.matches(u))return!1}return!0},e.prototype.matchabilityChange=function(e,t){var n=this.isMatching(e);return n?this.wasMatching(e,t,n)?Movement.STAYED_IN:Movement.ENTERED:this.wasMatching(e,t,n)?Movement.EXITED:Movement.STAYED_OUT},e.parseSelectors=function(t){function n(){i&&(o&&(i.qualifiers.push(o),o=void 0),s.push(i)),i=new e}function r(){o&&i.qualifiers.push(o),o=new Qualifier}for(var i,o,a,s=[],u=/\s/,c="Invalid or unsupported selector syntax.",l=1,d=2,f=3,h=4,p=5,v=6,m=7,g=8,b=9,y=10,_=11,w=12,x=13,C=14,E=l,O=0;O<t.length;){var k=t[O++];switch(E){case l:if(k.match(validNameInitialChar)){n(),i.tagName=k,E=d;break}if("*"==k){n(),i.tagName="*",E=f;break}if("."==k){n(),r(),i.tagName="*",o.attrName="class",o.contains=!0,E=h;break}if("#"==k){n(),r(),i.tagName="*",o.attrName="id",E=h;break}if("["==k){n(),r(),i.tagName="*",o.attrName="",E=v;break}if(k.match(u))break;throw Error(c);case d:if(k.match(validNameNonInitialChar)){i.tagName+=k;break}if("."==k){r(),o.attrName="class",o.contains=!0,E=h;break}if("#"==k){r(),o.attrName="id",E=h;break}if("["==k){r(),o.attrName="",E=v;break}if(k.match(u)){E=C;break}if(","==k){E=l;break}throw Error(c);case f:if("."==k){r(),o.attrName="class",o.contains=!0,E=h;break}if("#"==k){r(),o.attrName="id",E=h;break}if("["==k){r(),o.attrName="",E=v;break}if(k.match(u)){E=C;break}if(","==k){E=l;break}throw Error(c);case h:if(k.match(validNameInitialChar)){o.attrValue=k,E=p;break}throw Error(c);case p:if(k.match(validNameNonInitialChar)){o.attrValue+=k;break}if("."==k){r(),o.attrName="class",o.contains=!0,E=h;break}if("#"==k){r(),o.attrName="id",E=h;break}if("["==k){r(),E=v;break}if(k.match(u)){E=C;break}if(","==k){E=l;break}throw Error(c);case v:if(k.match(validNameInitialChar)){o.attrName=k,E=m;break}if(k.match(u))break;throw Error(c);case m:if(k.match(validNameNonInitialChar)){o.attrName+=k;break}if(k.match(u)){E=g;break}if("~"==k){o.contains=!0,E=b;break}if("="==k){o.attrValue="",E=_;break}if("]"==k){E=f;break}throw Error(c);case g:if("~"==k){o.contains=!0,E=b;break}if("="==k){o.attrValue="",E=_;break}if("]"==k){E=f;break}if(k.match(u))break;throw Error(c);case b:if("="==k){o.attrValue="",E=_;break}throw Error(c);case y:if("]"==k){E=f;
break}if(k.match(u))break;throw Error(c);case _:if(k.match(u))break;if('"'==k||"'"==k){a=k,E=x;break}o.attrValue+=k,E=w;break;case w:if(k.match(u)){E=y;break}if("]"==k){E=f;break}if("'"==k||'"'==k)throw Error(c);o.attrValue+=k;break;case x:if(k==a){E=y;break}o.attrValue+=k;break;case C:if(k.match(u))break;if(","==k){E=l;break}throw Error(c)}}switch(E){case l:case d:case f:case p:case C:n();break;default:throw Error(c)}if(!s.length)throw Error(c);return s},e.nextUid=1,e.matchesSelector=function(){var e=document.createElement("div");return"function"==typeof e.webkitMatchesSelector?"webkitMatchesSelector":"function"==typeof e.mozMatchesSelector?"mozMatchesSelector":"function"==typeof e.msMatchesSelector?"msMatchesSelector":"matchesSelector"}(),e}(),attributeFilterPattern=/^([a-zA-Z:_]+[a-zA-Z0-9_\-:\.]*)$/,MutationSummary=function(){function e(t){var n=this;this.connected=!1,this.options=e.validateOptions(t),this.observerOptions=e.createObserverOptions(this.options.queries),this.root=this.options.rootNode,this.callback=this.options.callback,this.elementFilter=Array.prototype.concat.apply([],this.options.queries.map(function(e){return e.elementFilter?e.elementFilter:[]})),this.elementFilter.length||(this.elementFilter=void 0),this.calcReordered=this.options.queries.some(function(e){return e.all}),this.queryValidators=[],e.createQueryValidator&&(this.queryValidators=this.options.queries.map(function(t){return e.createQueryValidator(n.root,t)})),this.observer=new MutationObserverCtor(function(e){n.observerCallback(e)}),this.reconnect()}return e.createObserverOptions=function(e){function t(e){if(!r.attributes||n){if(r.attributes=!0,r.attributeOldValue=!0,!e)return void(n=void 0);n=n||{},e.forEach(function(e){n[e]=!0,n[e.toLowerCase()]=!0})}}var n,r={childList:!0,subtree:!0};return e.forEach(function(e){if(e.characterData)return r.characterData=!0,void(r.characterDataOldValue=!0);if(e.all)return t(),r.characterData=!0,void(r.characterDataOldValue=!0);if(e.attribute)return void t([e.attribute.trim()]);var n=elementFilterAttributes(e.elementFilter).concat(e.attributeList||[]);n.length&&t(n)}),n&&(r.attributeFilter=Object.keys(n)),r},e.validateOptions=function(t){for(var n in t)if(!(n in e.optionKeys))throw Error("Invalid option: "+n);if("function"!=typeof t.callback)throw Error("Invalid options: callback is required and must be a function");if(!t.queries||!t.queries.length)throw Error("Invalid options: queries must contain at least one query request object.");for(var r={callback:t.callback,rootNode:t.rootNode||document,observeOwnChanges:!!t.observeOwnChanges,oldPreviousSibling:!!t.oldPreviousSibling,queries:[]},i=0;i<t.queries.length;i++){var o=t.queries[i];if(o.all){if(Object.keys(o).length>1)throw Error("Invalid request option. all has no options.");r.queries.push({all:!0})}else if("attribute"in o){var a={attribute:validateAttribute(o.attribute)};if(a.elementFilter=Selector.parseSelectors("*["+a.attribute+"]"),Object.keys(o).length>1)throw Error("Invalid request option. attribute has no options.");r.queries.push(a)}else if("element"in o){var s=Object.keys(o).length,a={element:o.element,elementFilter:Selector.parseSelectors(o.element)};if(o.hasOwnProperty("elementAttributes")&&(a.attributeList=validateElementAttributes(o.elementAttributes),s--),s>1)throw Error("Invalid request option. element only allows elementAttributes option.");r.queries.push(a)}else{if(!o.characterData)throw Error("Invalid request option. Unknown query request.");if(Object.keys(o).length>1)throw Error("Invalid request option. characterData has no options.");r.queries.push({characterData:!0})}}return r},e.prototype.createSummaries=function(e){if(!e||!e.length)return[];for(var t=new MutationProjection(this.root,e,this.elementFilter,this.calcReordered,this.options.oldPreviousSibling),n=[],r=0;r<this.options.queries.length;r++)n.push(new Summary(t,this.options.queries[r]));return n},e.prototype.checkpointQueryValidators=function(){this.queryValidators.forEach(function(e){e&&e.recordPreviousState()})},e.prototype.runQueryValidators=function(e){this.queryValidators.forEach(function(t,n){t&&t.validate(e[n])})},e.prototype.changesToReport=function(e){return e.some(function(e){var t=["added","removed","reordered","reparented","valueChanged","characterDataChanged"];if(t.some(function(t){return e[t]&&e[t].length}))return!0;if(e.attributeChanged){var n=Object.keys(e.attributeChanged),r=n.some(function(t){return!!e.attributeChanged[t].length});if(r)return!0}return!1})},e.prototype.observerCallback=function(e){this.options.observeOwnChanges||this.observer.disconnect();var t=this.createSummaries(e);this.runQueryValidators(t),this.options.observeOwnChanges&&this.checkpointQueryValidators(),this.changesToReport(t)&&this.callback(t),!this.options.observeOwnChanges&&this.connected&&(this.checkpointQueryValidators(),this.observer.observe(this.root,this.observerOptions))},e.prototype.reconnect=function(){if(this.connected)throw Error("Already connected");this.observer.observe(this.root,this.observerOptions),this.connected=!0,this.checkpointQueryValidators()},e.prototype.takeSummaries=function(){if(!this.connected)throw Error("Not connected");var e=this.createSummaries(this.observer.takeRecords());return this.changesToReport(e)?e:void 0},e.prototype.disconnect=function(){var e=this.takeSummaries();return this.observer.disconnect(),this.connected=!1,e},e.NodeMap=NodeMap,e.parseElementFilter=Selector.parseSelectors,e.optionKeys={callback:!0,queries:!0,rootNode:!0,oldPreviousSibling:!0,observeOwnChanges:!0},e}();!function(e,t){"use strict";var n="JqueryMutationSummary",r=function(t,n){this.$element=e(t),this.options=e.extend(!0,{},this.internalDefaults,e.fn.mutationSummary.defaults,n)},i=function(e,t){this.$element=e,this.configuration=t},o={};e.extend(!0,o,{getConfiguration:function(t,n,r){var i;return e.isFunction(t)?(e.isArray(n)&&(r=n,n=!1),i={callback:t,observeOwnChanges:n===!0,queries:r||[]}):i=t,i}}),r.prototype={constructor:r,internalDefaults:{mutationSummaries:[]},connect:function(e,t,n){var r=o.getConfiguration(e,t,n),a=new i(this.$element,r);this.options.mutationSummaries.push(a),a.start()},disconnect:function(t,n,r){var i=this.options.mutationSummaries;e.each(i,function(e){void 0!==this&&this.configurationMatches(t,n,r)&&(this.stop(),delete i[e])})}},i.prototype={constructor:i,getCallbackWrapper:function(){function t(t){t.observer=this.observer,t.configuration=e.extend(!0,{},this.configuration),this.originalCallback(t)}return e.proxy(t,this)},configurationMatches:function(e,t,n){var r=o.getConfiguration(e,t,n),i=!0;return i=i&&(void 0===e||this.configuration.callback===r.callback),i=i&&(void 0===t||this.configuration.observeOwnChanges===r.observeOwnChanges),i=i&&(void 0===n||this.configuration.queries===r.queries)},start:function(){var n=this.$element.get(0);this.originalCallback=this.configuration.callback,this.wrappedCallback=this.getCallbackWrapper(),this.wrappedConfiguration=e.extend(!0,{},this.configuration),1===this.$element.length&&n!==t&&(this.wrappedConfiguration.rootNode=n),this.wrappedConfiguration.callback=this.wrappedCallback,this.observer=new MutationSummary(this.wrappedConfiguration)},stop:function(){var e=this.observer.disconnect();void 0!==e&&this.wrappedCallback(e),delete this.observer}},e.fn.extend({mutationSummary:function(t){var i=arguments;return this.each(function(){var o=e(this),a=o.data(n),s="object"==typeof t&&t;a||o.data(n,a=new r(this,s)),"string"==typeof t&&a[t].apply(a,Array.prototype.slice.call(i,1))})}}),e.fn.mutationSummary.defaults={},e.fn.mutationSummary.Constructor=r}(jQuery,this),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery-mutation-summary")):"function"==typeof define&&define.amd?define(["jquery-mutation-summary"],t):(e.elliptical=e.elliptical||{},e.elliptical.mutation=e.elliptical.mutation||{},e.elliptical.mutation.summary=t(e),e.returnExports=e.elliptical.mutation.summary)}(this,function(e){function t(e){u.trigger(o,e)}function n(e){u.trigger(a,{summary:e})}function r(e){u.trigger(s,{summary:e})}function i(e){t(e);var i=e[0];i.added&&n(i.added),i.removed&&r(i.removed)}var o="OnDocumentMutation",a="OnDocumentAddedMutation",s="OnDocumentRemovedMutation",u=$(document);return{_running:!1,connect:function(){this._running||(this._running=!0,$(document).mutationSummary("connect",i,[{all:!0}]))},disconnect:function(){this._running=!1,$(document).mutationSummary("disconnect")}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical=e.elliptical||{},e.elliptical.extensions=e.elliptical.extensions||{},e.elliptical.extensions.utils=t(),e.returnExports=e.elliptical.extensions.utils)}(this,function(){return{_utils:$.utils,_DOMParser:function(e){return(new DOMParser).parseFromString(e,"text/html")},_preloadImages:function(e,t){var n=[],r={},i={},o=e.find("img").not("[data-src]"),a=o.length,s=0;return 0===a?(t&&(r.message="No images found in element",t(r,null)),!1):($.each(o,function(e,r){var o=new Image;$(o).bind("load",function(e){s++,n.push(o),s===a&&t&&(i.images=n,i.length=s,t(null,i))}),o.src=r.src}),!0)},_scrollTop:function(e,t){"number"!=typeof e?e=0:"undefined"==typeof t&&(t="scrollTop"),setTimeout(function(){window.scrollTo(0,e),$(document).trigger(t,{x:0,y:e})},20)},_setModal:function(e,t,n){var r=arguments.length;0===r?(e=$("body"),t={},n=null):1===r?"function"==typeof e?(n=e,e=$("body"),t={}):e.context?(t={},n=null):(t=e,e=$("body")):2===r&&("function"==typeof t?(n=t,void 0===e.context?(t=e,e=$("body")):t={}):n=null);var i=$('<div class="ui-modal"></div>');t.cssClass&&i.addClass(t.cssClass),t.zIndex&&i.css({"z-index":t.zIndex}),this._data?this._data.set("modal",i):this._modal=i;var o=t.opacity?t.opacity:.3;i.css({opacity:0}),e.append(i),this._transition(i,{opacity:o,duration:250},function(){n&&n()})},_removeModal:function(e){var t=this,n=null;n=this._data?this._data.get("modal"):this._modal,n&&void 0!==n&&this._transition(n,{opacity:0,duration:250},function(){n.remove(),t._data?t._data.set("modal",null):t._modal=null,e&&e()})},_resetSemanticState:function(){this.element.removeClass("error").removeClass("warning").removeClass("success").removeClass("info")},_setChildrenAttributes:function(){var e=this.element;e[0].hasAttribute&&e[0].hasAttribute("disabled")&&e.query("input,textarea,select",function(e){e[0]&&e.attr("disabled",!0)}),e[0].hasAttribute&&e[0].hasAttribute("readonly")&&e.query("input,textarea,select",function(e){e[0]&&e.attr("readonly",!0)})},_enableChildrenAttributes:function(){var e=this.element;e.query("input,textarea,select",function(e){e[0]&&e.attr("disabled",!1)}),e.query("input,textarea,select",function(e){e[0]&&e.attr("readonly",!1)})},_find:function(e){return this.element.find(e)},_jsonParseMessage:function(e){try{var t=JSON.parse(e);return t.message?t.message:e}catch(n){return e}}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical=e.elliptical||{},e.elliptical.extensions=e.elliptical.extensions||{},e.elliptical.extensions.device=t(),e.returnExports=elliptical.extensions.device)}(this,function(){return{_device:$.device,_mq:$.device.mq,_press:function(){return"ontouchend"in document?"touchstart":"click"},_mode:function(){return this._device.viewport.width>768?"desktop":"touch"}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical=e.elliptical||{},e.elliptical.extensions=e.elliptical.extensions||{},e.elliptical.extensions.drawer=t(),e.returnExports=elliptical.extensions.drawer)}(this,function(){return{_createDrawer:function(e,t){if(!this._data.get("locked")){this._data.set("locked",!0);var n=$("ui-container");this._data.set("container",n);var r=n.parent();this._data.set("transformContainer",r);var i=$("<touch-ui-drawer></touch-ui-drawer>");t&&i.addClass(t);var o=this._device.viewport.height;i.css({"min-height":o+"px"}),this._device.touch||i.css({position:"relative"});var a=$("<header></header>"),s=this.element.find("touch-header");s[0]&&a.append(s),i.append(a);var u=$("<section></section>");i.append(u),n.before(i),this._data.set("drawer",i),this._data.set("drawerHeader",a),this._data.set("drawerSection",u)}},_openDrawer:function(e,t){this._showDrawer();var n=this._device.viewport.height;this.options?this.options.height=n:this.height=n;var r=this,i=this._data.get("container"),o=this._data.get("transformContainer");this._setHardwareAcceleration(o),i.addClass("ui-fixed-toggle-container").css({height:n+"px"}).addClass("ui-drawer-box-shadow");var a=$("<ui-overlay></ui-overlay>");a.addClass("show"),i.append(a),this._data.set("overlay",a);var s=this.options?this.options.overlayBackground:this.overlayBackground,u=this.options?this.options.overlayOpacity:this.overlayOpacity,c=this.options?this.options.overlayOpenDuration:this.overlayOpenDuration,l=this.options?this.options.transformDuration:this.transformDuration,d=this.options?this.options.transformDelay:this.transformDelay,f=this.options?this.options.translateX:this.translateX;a.transition({background:s,opacity:u,duration:c});var h={};h.duration=l,h.delay=d,h.easing="ease-in-out";var p={};p.x=f,p.y=0,p.z=0,h.coordinates=p,h.transitionEnd=!0;var v=this._data.click,m=this._closeDrawer.bind(this);this.element.trigger("drawer.open",{open:!0,closeEvent:m}),this._3dTransition(i,h,function(){r._resetHardwareAcceleration(o),r._resetTransition($(this)),e&&e()}),a.on(v,function(){t&&t()})},_closeDrawer:function(e){var t=this.options?this.options.height:this.height,n=this._data.get("container"),r=window.scrollY;if(r>0){t+=r,n.css({height:t+"px"}),this.element.css({top:r+"px"});var i=this._data.get("drawerHeader");i.css({top:r+"px"})}var o=this._data.get("transformContainer"),a=this.options?this.options.overlayBackground:this.overlayBackground,s=this.options?this.options.overlayCloseDuration:this.overlayCloseDuration,u=this.options?this.options.transformDuration:this.transformDuration,c=this.options?this.options.transformDelay:this.transformDelay,l=this._data.get("overlay"),d=this;this._setHardwareAcceleration(o);var f={};f.duration=u,f.delay=c,f.easing="ease-in-out";var h={};h.x=0,h.y=0,h.z=0,f.coordinates=h,f.transitionEnd=!0,this.element.trigger("drawer.close",{open:!1}),this._3dTransition(n,f,function(){d._resetHardwareAcceleration(o),d._resetContainer(n),d._hideDrawer(),e&&e()});var p=this._data.click;l.off(p),l.transition({background:a,opacity:0,duration:s},function(){l.remove()})},_showDrawer:function(){var e=this._device.viewport.height,t=this._data.get("drawer");t.css({"min-height":e+"px",display:"block"})},_hideDrawer:function(){var e=this._data.get("drawerHeader");e.css({top:""});var t=this._data.get("drawer");t.hide()},_removeDrawer:function(){var e=this._data.get("drawer");e&&(e.remove(),this._data.set("drawer",null)),this._data.set("locked",!1);var t=this._data.get("container");this._resetContainer(t);var n=this._data.get("overlay");n&&n.remove();var r=this._data.get("transformContainer");this._resetHardwareAcceleration(r)},showDrawer:function(){this._showDrawer()},hideDrawer:function(){this._hideDrawer()}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical=e.elliptical||{},e.elliptical.extensions=e.elliptical.extensions||{},e.elliptical.extensions.navigation=t(),e.returnExports=e.elliptical.extensions.navigation)}(this,function(){return{_createTouchNavigation:function(e,t){this._data.set("input",null),this._data.set("touchInput",null),this._createDrawer(e,t),this._createTouchMenu(e)},_removeTouchNavigation:function(e){var t=this._data.get("touchInput");t&&this._unbindSearch(t),this._removeDrawer(),this.element.css({position:""}),this._data.set("navLocked",!1)},_createTouchMenu:function(e){if(!this._data.get("navLocked")){this._data.set("navLocked",!0);var t=(this._data.get("drawer"),this._data.get("drawerSection"));if(t){var n=this._data.get("drawerHeader"),r=$("<touch-ui-menu></touch-ui-menu>"),i=this.options?this.options.includeHome:this.includeHome,o=this.options?this.options.homeUrl:this.homeUrl,a=this.options?this.options.homeIcon:this.homeIcon,s=this.options?this.options.touchMenu:this.touchMenu;if(i&&r.append(this._methods.createHomeListItem(o,a)),void 0!==s&&s===!1)return t.append(r),void this._data.set("drawerMenu",r);var u=this._getMenu(e),c=u.clone(),l=this._extractMenuItems(c);l.find("ui-button-dropdown").contents().unwrap(),l=this._methods.replaceWithMenuItemTags(l),this._methods.touchifyUIDropdowns(l),this._methods.iconifyTouchMenuItems(l),r.append(l),r=this._methods.addParentNodesToChildDropDowns(r,"ui-dropdown"),this._appendSearch(r,n);var d=this.options?this.options.model:this.model,f=this._methods.createMenuItemsFromArray(d);f&&r.append(f);var h=this.element.find("touch-section[header]");if(h[0]){var p=h.clone();t.append(p)}t.append(r);var v=this.element.find("touch-section[footer]");if(v[0]){var m=v.clone();t.append(m)}this._data.set("drawerMenu",r)}}},_getMenu:function(e){return e.find("ui-menu").not('[touch-menu="false"]').add(e.find('[role="menu"]'))},_extractMenuItems:function(e){var t='[touch-menu-item="false"]',n=e.children().not(t).add(e.find('[data-role="menu-item-dropdown"]'));return this._methods.filterMenuItems(n)},_appendSearch:function(e,t){var n=this;setTimeout(function(){var e=n.element.find("[role=search]");if(e[0]){var r=e.clone();t.append(r)}},1e3)},_appendMenuModel:function(){var e=this.options?this.options.model:this.model;if(this._mq.touch){var t=this._data.get("drawerMenu"),n=this._methods.createMenuItemsFromArray(e);n&&t.append(n)}},_addMenuModel:function(e){var t=$("touch-ui-menu"),n=this._methods.createMenuItemsFromArray(e);t.append(n)},_initSearchHandler:function(){var e="ui-search",t=this.element.find(e);if(t[0]){var n=t.find("input");return this._data.set("input",n),this._onSearch(n,"desktop"),t}return null},_initTouchSearchHandler:function(e,t){var n=e.clone(),r=n.find("input");r[0]&&(this._data.set("touchInput",r),t.append(n),this._onSearch(r,"touch"))},_onSearch:function(e,t){if("desktop"===t){if(this._data.get("searchRegistered"))return!1;this._data.set("searchRegistered",!0),this._onDesktopSearch(e)}else{if(this._data.get("touchSearchRegistered"))return!1;this._data.set("touchSearchRegistered",!0)}},_onDesktopSearch:function(e){function t(e){var t=e.val(),r={value:t};n("search",r)}var n=this._onEventTrigger.bind(this);e.on("focus",function(){e.on("click",function(n){$(this).hasClass("focused")?t(e):e.addClass("focused")}),e.keypress(function(n){return 13===n.which?(t(e),!0):void 0})}),e.on("blur",function(){e.removeClass("focused"),e.off("click")})},_onTouchSearch:function(e){function t(e){var t=e.val(),r={value:t};n("search",r)}var n=this._onEventTrigger.bind(this);e.on("focus",function(){e.on("tap",function(n){$(this).hasClass("focused")?t(e):e.addClass("focused")})}),e.on("blur",function(){e.removeClass("focused"),e.off("tap")})},__dropdownSelector:function(){return"touch-ui-dropdown"},__menuItemSelector:function(){return"menu-item-dropdown"},_touchToggleDropdown:function(e){var t=this.__dropdownSelector(),n=e.find(t);n.hasClass("show")?(e.removeClass("close"),n.removeClass("show")):(e.addClass("close"),n.addClass("show"))},_touchMenuItem:function(e,t){var n=this,r=this.options?this.options.transformDuration:this.transformDuration;r+=100;var i=e.attr("data-id"),o=e.attr("href"),a=e.attr("data-action"),s=e.attr("data-route");if(s&&"false"===s&&(t=!0),this._hide(),void 0!==o&&"#"!==o&&void 0===a&&t)setTimeout(function(){"undefined"!=typeof o&&(n._location?n._location(o):location.href=o)},r);else{var u={id:i,action:a,mode:"touch",href:o};this._onEventTrigger("selected",u)}},_touchMenuLink:function(e,t){var n=e.attr("href");if(void 0===n||"#"===n){var r=e.parent("menu-item-dropdown");r[0]&&this._touchToggleDropdown(r)}else this._touchMenuItem(e,t)},_resetMenu:function(){var e=this._data.get("drawerMenu");e.find(".show").removeClass("show"),e.find(".close").removeClass("close")},_methods:{listItem:function(){return"menu-item"},dropdownListItem:function(){return"menu-item-dropdown"},iconAttribute:function(){return"touch-icon"},dropdownElement:function(){return"<ui-dropdown></ui-dropdown>"},createSpanItem:function(e){return $("<span>"+e+"</span>")},createCloneListItem:function(e,t){return $("<"+this.listItem()+'<a href="'+e+'">'+t+"</a></"+this.listItem()+">")},addParentNodesToChildDropDowns:function(e,t){var n=e.find(this.dropdownListItem()),r=this;return n.each(function(e,n){var i=$(n).children("a"),o=i.attr("href");if("undefined"!=typeof o&&"#"!=o){var a=i.html(),s=r.createCloneListItem(o,a),u=$(n).find("."+t);u.prepend(s);var c=r.createSpanItem(a);i.replaceWith(c)}}),e},createMenuItemsFromArray:function(e){if(0===e.length)return null;for(var t,n=[],r=0;r<e.length;r++)if(e[r].dropdown&&e[r].dropdown.length>0){t="undefined"!=typeof e[r].icon?$('<menu-item-dropdown><span class="touch-icon '+e[r].icon+'"></span><a>'+e[r].label+"</a></menu-item-dropdown>"):$("<menu-item-dropdown><a>"+e[r].label+"</a></menu-item-dropdown>");for(var i=$("<touch-ui-dropdown></touch-ui-dropdown>"),o=0;o<e[r].dropdown.length;o++){var a=$('<menu-item><a href="'+e[r].dropdown[o].url+'">'+e[r].dropdown[o].label+"</a></menu-item>");i.append(a)}t.append(i),n.push(t)}else t="undefined"!=typeof e[r].icon?$('<menu-item><span class="touch '+e[r].icon+'"><a href="'+e[r].url+'">'+e[r].label+"</a></span></menu-item>"):$('<menu-item><a href="'+e[r].url+'">'+e[r].label+"</a></menu-item>"),n.push(t);return n},createHomeListItem:function(e,t){var n,r=this.listItem(),i="home";return n=null===t?$("<"+r+" "+i+'><a href="'+e+'">Home</a></'+r+">"):$("<"+r+" "+i+'><span class="touch-icon '+t+'"></span><a href="'+e+'">Home</a></'+r+">")},filterMenuItems:function(e){var t=e.find('[data-touch="false"]');return $.each(t,function(e,t){$(t).remove()}),e},touchifyUIDropdowns:function(e){var t=this;$.each(e,function(e,n){var r=$(n).find("ui-dropdown"),i=$(n).find("ui-mega-dropdown");r&&r.length>0?(r.replaceWith("<touch-ui-dropdown>"+r.html()+"</touch-ui-dropdown>"),i&&i.length>0&&(t.createTouchMenuItemsFromMegaDropdown(i,r),i.remove())):i&&i.length>0&&(r=$("<touch-ui-dropdown></touch-ui-dropdown>"),t.createTouchMenuItemsFromMegaDropdown(i,r),i.replaceWith(r))})},replaceWithMenuItemTags:function(e){for(var t=[],n=0;n<e.length;n++){var r=$(e[n]),i=r.find("ui-dropdown"),o=r.find("ui-mega-dropdown");if(i[0]||o[0]){var a=r.html(),s=$("<menu-item-dropdown>"+a+"</menu-item-dropdown>");t.push(s[0])}else t.push(r[0])}return t},iconifyTouchMenuItems:function(e){var t=this.iconAttribute();$.each(e,function(e,n){var r=$(n),i=r.attr(t);if(void 0!==i){var o=$('<span class="touch '+i+'"></span>');r.prepend(o)}})},createTouchMenuItemsFromMegaDropdown:function(e,t){var n=e.find("a").not('[touch-menu-item="false"]');$.each(n,function(e,n){var r=$("<menu-item></menu-item>");r.append(n),t.append(r)})}},_unbindSearch:function(e){e.off("focus"),e.off("blur")},_onDestroy:function(){this._unbindSearch()},show:function(){this._show()},hide:function(){this._hide()}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical=e.elliptical||{},e.elliptical.extensions=e.elliptical.extensions||{},e.elliptical.extensions.transition=t(),e.returnExports=e.elliptical.extensions.transition)}(this,function(){return{_transition:function(e,t,n){return $.transition=$.transition||$.transit,e instanceof jQuery||(e=$(e)),t=t||{},t==={}&&(t.duration=300,t.preset="fadeIn"),"none"===t.preset?void e.hide():void e.transition(t,function(){n&&n.call(e[0])})}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical=e.elliptical||{},e.elliptical.extensions=e.elliptical.extensions||{},e.elliptical.extensions.transform=t(),e.returnExports=e.elliptical.extensions.transform)}(this,function(){var e=$.transforms,t="ui-hardware-accelerated",n="ui-overflow-container",r="ui-fixed-toggle-container",i="ui-drawer-box-shadow";return{_setHardwareAcceleration:function(n){this._data.set("toggleAcceleration",e.setHardwareAcceleration(n,t))},_resetHardwareAcceleration:function(n){e.resetHardwareAcceleration(n,this._data.get("toggleAcceleration"),t)},_setContainerOverflow:function(t){this._data.set("toggleOverflow",e.setContainerOverflow(t,n))},_resetContainerOverflow:function(t){e.resetContainerOverflow(t,n)},_resetContainer:function(t){e.resetContainer(t,i,r)},_resetTransition:function(t){e.resetTransition(t)},_resetTransform:function(t){e.resetTransform(t)},_transform:function(t,n){e.transform(t,n)},_3dTransition:function(t,n,r){e.transition3d(t,n,r)}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils"),require("dustjs")):"function"==typeof define&&define.amd?define(["elliptical-utils","dustjs"],t):(e.elliptical=e.elliptical||{},e.elliptical.extensions=e.elliptical.extensions||{},e.elliptical.extensions.template=t(e.elliptical.utils,e.dust),e.returnExports=e.elliptical.extensions.template)}(this,function(e,t){var n=e.random;return{__precompile:function(e,n){e=e.replace(/&quot;/g,'"');var r=t.compile(e,n);t.loadSource(r)},_precompileTemplate:function(e,t){var n=e.innerHTML;this.__precompile(n,t)},_verifyTemplateExists:function(e){void 0===t.cache[e]&&console.log("warning: template "+e+" does not exist")},_templateExists:function(e){return void 0!==t.cache[e]},_render:function(e,n,r,i){this._verifyTemplateExists(n),t.render(n,r,function(t,n){(n||""===n)&&(e.innerHTML=n),i&&i(t,n)})},_renderTemplate:function(e,n,r){this._verifyTemplateExists(e),t.render(e,n,r)},_renderTemplateString:function(e,t,r){var i="template-"+n.str(6);this.__precompile(e,i),this._renderTemplate(i,t,r)}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical=e.elliptical||{},e.elliptical.extensions=e.elliptical.extensions||{},e.elliptical.extensions.event=t(),e.returnExports=e.elliptical.extensions.event)}(this,function(){return{_onEventTrigger:function(e,t){this._triggerEvent(e,t)},_triggerEvent:function(e,t){var n=$.Event(e);this._trigger(e,n,t)},_trigger:function(e,t,n){this.options?this._jqTrigger(e,t,n):this.__triggerEvent(e,n)},__triggerEvent:function(e,t){var n=this._utils.string.tagNameToNamespace(tagName);e=n+"."+e,this.element.trigger(e,t)},_jqTrigger:function(e,t,n){try{var r,i,o=this.options[e];n=n||{};var a=this.widgetEventPrefix,s=this.bindings[0].tagName.toLowerCase(),u=s.split("-"),c=u.length,l=this._utils.string.tagNameToNamespace(s),d=a.toArrayFromCamelCase(),f=this._utils.array.toNamespaceFromArray(d);if(a=f===l?f:c>1?l+"."+a:this.namespace+"."+a,t=$.Event(t),t.type=(e===a?e:a+"."+e).toLowerCase(),t.target=this.element[0],i=t.originalEvent)for(r in i)r in t||(t[r]=i[r]);return this.element.trigger(t,n),!($.isFunction(o)&&o.apply(this.element[0],[t].concat(n))===!1||t.isDefaultPrevented())}catch(h){}}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils")):"function"==typeof define&&define.amd?define(["elliptical-utils"],t):(e.elliptical.extensions=e.elliptical.extensions||{},e.elliptical.extensions.options=t(e.elliptical.utils),e.returnExports=e.elliptical.extensions.options)}(this,function(e){return{_setOptionsFromAttribute:function(){var e=this.options?this.options.opts:this.opts;void 0!==e&&(e=JSON.parse(e),this.options?this.options.opts=e:this.opts=e)}}}),function(e,t){if("undefined"!=typeof module&&module.exports)module.exports=t(require("elliptical-utils"),require("jquery-extensions"),require("./prototype.device"),require("./prototype.template"),require("./prototype.transition"),require("./prototype.transform"),require("./prototype.utils"),require("./prototype.event"),require("./prototype.options"));else if("function"==typeof define&&define.amd)define(["elliptical-utils","jquery-extensions","./prototype.device","./prototype.template","./prototype.transition","./prototype.transform","./prototype.utils","./prototype.event","./prototype.options"],t);else{var n=e.elliptical.extensions;e.elliptical.extensions.base=t(e.elliptical.utils,e,n.device,n.template,n.transition,n.transform,n.utils,n.event,n.options),e.returnExports=e.elliptical.extensions.base}}(this,function(e,t,n,r,i,o,a,s,u){var c={};return Object.assign(c,a,n,r,i,o,s,u),c}),function(e){"use strict";function t(){function e(e){t=e}if("function"!=typeof Object.observe||"function"!=typeof Array.observe)return!1;var t=[],n={},r=[];return Object.observe(n,e),Array.observe(r,e),n.id=1,n.id=2,delete n.id,r.push(1,2),r.length=0,Object.deliverChangeRecords(e),5!==t.length?!1:"add"!=t[0].type||"update"!=t[1].type||"delete"!=t[2].type||"splice"!=t[3].type||"splice"!=t[4].type?!1:(Object.unobserve(n,e),Array.unobserve(r,e),!0)}function n(){if("undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime)return!1;if("undefined"!=typeof navigator&&navigator.getDeviceStorage)return!1;try{var e=new Function("","return true;");return e()}catch(t){return!1}}function r(e){return+e===e>>>0&&""!==e}function i(e){return+e}function o(e){return e===Object(e)}function a(e,t){return e===t?0!==e||1/e===1/t:B(e)&&B(t)?!0:e!==e&&t!==t}function s(e){if(void 0===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:case 48:return e;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return t>=97&&122>=t||t>=65&&90>=t?"ident":t>=49&&57>=t?"number":"else"}function u(){}function c(e){function t(){if(!(f>=e.length)){var t=e[f+1];return"inSingleQuote"==h&&"'"==t||"inDoubleQuote"==h&&'"'==t?(f++,r=t,p.append(),!0):void 0}}for(var n,r,i,o,a,c,l,d=[],f=-1,h="beforePath",p={push:function(){void 0!==i&&(d.push(i),i=void 0)},append:function(){void 0===i?i=r:i+=r}};h;)if(f++,n=e[f],"\\"!=n||!t(h)){if(o=s(n),l=Q[h],a=l[o]||l["else"]||"error","error"==a)return;if(h=a[0],c=p[a[1]]||u,r=void 0===a[2]?n:a[2],c(),"afterPath"===h)return d}}function l(e){return Y.test(e)}function d(e,t){if(t!==G)throw Error("Use Path.get to retrieve path objects");for(var n=0;n<e.length;n++)this.push(String(e[n]));V&&this.length&&(this.getValueFrom=this.compiledGetValueFromFn())}function f(e){if(e instanceof d)return e;if((null==e||0==e.length)&&(e=""),"string"!=typeof e){if(r(e.length))return new d(e,G);e=String(e)}var t=X[e];if(t)return t;var n=c(e);return n?(t=new d(n,G),X[e]=t,t):Z}function h(e){return r(e)?"["+e+"]":'["'+e.replace(/"/g,'\\"')+'"]'}function p(t){for(var n=0;K>n&&t.check_();)n++;return q&&(e.dirtyCheckCycleCount=n),n>0}function v(e){for(var t in e)return!1;return!0}function m(e){return v(e.added)&&v(e.removed)&&v(e.changed)}function g(e,t){var n,r={},i={},o={};for(n in t){var a=e[n];(void 0===a||a!==t[n])&&(n in e?a!==t[n]&&(o[n]=a):i[n]=void 0)}for(n in e)n in t||(r[n]=e[n]);return Array.isArray(e)&&e.length!==t.length&&(o.length=e.length),{added:r,removed:i,changed:o}}function b(){if(!ee.length)return!1;for(var e=0;e<ee.length;e++)ee[e]();return ee.length=0,!0}function y(){function e(e){t&&t.state_===oe&&!r&&t.check_(e)}var t,n,r=!1,i=!0;return{open:function(n){if(t)throw Error("ObservedObject in use");i||Object.deliverChangeRecords(e),t=n,i=!1},observe:function(t,r){n=t,r?Array.observe(n,e):Object.observe(n,e)},deliver:function(t){r=t,Object.deliverChangeRecords(e),r=!1},close:function(){t=void 0,Object.unobserve(n,e),ne.push(this)}}}function _(e,t,n){var r=ne.pop()||y();return r.open(e),r.observe(t,n),r}function w(){function e(t,o){t&&(t===r&&(i[o]=!0),s.indexOf(t)<0&&(s.push(t),Object.observe(t,n)),e(Object.getPrototypeOf(t),o))}function t(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.object!==r||i[n.name]||"setPrototype"===n.type)return!1}return!0}function n(n){
if(!t(n)){var r,i;for(r=0;r<a.length;r++)i=a[r],i.state_==oe&&i.iterateObjects_(e);for(r=0;r<a.length;r++)i=a[r],i.state_==oe&&i.check_()}}var r,i,o=0,a=[],s=[],u={objects:s,get rootObject(){return r},set rootObject(e){r=e,i={}},open:function(t,n){a.push(t),o++,t.iterateObjects_(e)},close:function(e){if(o--,!(o>0)){for(var t=0;t<s.length;t++)Object.unobserve(s[t],n),C.unobservedCount++;a.length=0,s.length=0,r=void 0,i=void 0,re.push(this),J===this&&(J=null)}}};return u}function x(e,t){return J&&J.rootObject===t||(J=re.pop()||w(),J.rootObject=t),J.open(e,t),J}function C(){this.state_=ie,this.callback_=void 0,this.target_=void 0,this.directObserver_=void 0,this.value_=void 0,this.id_=ue++}function E(e){C._allObserversCount++,le&&ce.push(e)}function O(e){C._allObserversCount--}function k(e){C.call(this),this.value_=e,this.oldObject_=void 0}function N(e){if(!Array.isArray(e))throw Error("Provided object is not an Array");k.call(this,e)}function S(e,t,n){C.call(this),this.object_=e,this.path_=f(t),this.defaultValue_=n,this.directObserver_=void 0}function $(e){C.call(this),this.reportChangesOnOpen_=e,this.value_=[],this.directObserver_=void 0,this.observed_=[]}function A(e){return e}function j(e,t,n,r){this.callback_=void 0,this.target_=void 0,this.value_=void 0,this.observable_=e,this.getValueFn_=t||A,this.setValueFn_=n||A,this.dontPassThroughSet_=r}function T(e,t,n){for(var r={},i={},o=0;o<t.length;o++){var a=t[o];he[a.type]?(a.name in n||(n[a.name]=a.oldValue),"update"!=a.type&&("add"!=a.type?a.name in r?(delete r[a.name],delete n[a.name]):i[a.name]=!0:a.name in i?delete i[a.name]:r[a.name]=!0)):(console.error("Unknown changeRecord type: "+a.type),console.error(a))}var s;for(s in r)r[s]=e[s];for(s in i)i[s]=void 0;var u={};for(s in n)if(!(s in r||s in i)){var c=e[s];n[s]!==c&&(u[s]=c)}return{added:r,removed:i,changed:u}}function P(e,t,n){return{index:e,removed:t,addedCount:n}}function M(){}function I(e,t,n,r,i,o){return be.calcSplices(e,t,n,r,i,o)}function D(e,t,n,r){return n>t||e>r?-1:t==n||r==e?0:n>e?r>t?t-n:r-n:t>r?r-e:t-e}function R(e,t,n,r){for(var i=P(t,n,r),o=!1,a=0,s=0;s<e.length;s++){var u=e[s];if(u.index+=a,!o){var c=D(i.index,i.index+i.removed.length,u.index,u.index+u.addedCount);if(c>=0){e.splice(s,1),s--,a-=u.addedCount-u.removed.length,i.addedCount+=u.addedCount-c;var l=i.removed.length+u.removed.length-c;if(i.addedCount||l){if(n=u.removed,i.index<u.index){var d=i.removed.slice(0,u.index-i.index);Array.prototype.push.apply(d,n),n=d}if(i.index+i.removed.length>u.index+u.addedCount){var f=i.removed.slice(u.index+u.addedCount-i.index);Array.prototype.push.apply(n,f)}i.removed=n,u.index<i.index&&(i.index=u.index)}else o=!0}else if(i.index<u.index){o=!0,e.splice(s,0,i),s++;var h=i.addedCount-i.removed.length;u.index+=h,a+=h}}}o||e.push(i)}function L(e,t){for(var n=[],o=0;o<t.length;o++){var a=t[o];switch(a.type){case"splice":R(n,a.index,a.removed.slice(),a.addedCount);break;case"add":case"update":case"delete":if(!r(a.name))continue;var s=i(a.name);if(0>s)continue;R(n,s,[a.oldValue],1);break;default:console.error("Unexpected record type: "+JSON.stringify(a))}}return n}function F(e,t){var n=[];return L(e,t).forEach(function(t){return 1==t.addedCount&&1==t.removed.length?void(t.removed[0]!==e[t.index]&&n.push(t)):void(n=n.concat(I(e,t.index,t.index+t.addedCount,t.removed,0,t.removed.length)))}),n}var q=e.testingExposeCycleCount,z=t(),V=n(),B=e.Number.isNaN||function(t){return"number"==typeof t&&e.isNaN(t)},H="__proto__"in{}?function(e){return e}:function(e){var t=e.__proto__;if(!t)return e;var n=Object.create(t);return Object.getOwnPropertyNames(e).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}),n},W="[$_a-zA-Z]",U="[$_a-zA-Z0-9]",Y=new RegExp("^"+W+"+"+U+"*$"),Q={beforePath:{ws:["beforePath"],ident:["inIdent","append"],"[":["beforeElement"],eof:["afterPath"]},inPath:{ws:["inPath"],".":["beforeIdent"],"[":["beforeElement"],eof:["afterPath"]},beforeIdent:{ws:["beforeIdent"],ident:["inIdent","append"]},inIdent:{ident:["inIdent","append"],0:["inIdent","append"],number:["inIdent","append"],ws:["inPath","push"],".":["beforeIdent","push"],"[":["beforeElement","push"],eof:["afterPath","push"]},beforeElement:{ws:["beforeElement"],0:["afterZero","append"],number:["inIndex","append"],"'":["inSingleQuote","append",""],'"':["inDoubleQuote","append",""]},afterZero:{ws:["afterElement","push"],"]":["inPath","push"]},inIndex:{0:["inIndex","append"],number:["inIndex","append"],ws:["afterElement"],"]":["inPath","push"]},inSingleQuote:{"'":["afterElement"],eof:["error"],"else":["inSingleQuote","append"]},inDoubleQuote:{'"':["afterElement"],eof:["error"],"else":["inDoubleQuote","append"]},afterElement:{ws:["afterElement"],"]":["inPath","push"]}},G={},X={};d.get=f,d.prototype=H({__proto__:[],valid:!0,toString:function(){for(var e="",t=0;t<this.length;t++){var n=this[t];e+=l(n)?t?"."+n:n:h(n)}return e},getValueFrom:function(e,t){for(var n=0;n<this.length;n++){var r=this[n];if(null==e||!(r in e))return t;e=e[r]}return e},iterateObjects:function(e,t){for(var n=0;n<this.length;n++){if(n&&(e=e[this[n-1]]),!o(e))return;t(e,this[n])}},compiledGetValueFromFn:function(){var e="",t="obj";e+="if (obj != null";for(var n,r=0;r<this.length-1;r++)n=this[r],t+=l(n)?"."+n:h(n),e+=" &&\n    "+t+" != null";n=this[r];var i=l(n),o=i?'"'+n.replace(/"/g,'\\"')+'"':n;return e+=" &&\n    "+o+" in "+t+")\n",t+=i?"."+n:h(n),e+="  return "+t+";\nelse\n  return defaultValue;",new Function("obj","defaultValue",e)},setValueFrom:function(e,t){if(!this.length)return!1;for(var n=0;n<this.length-1;n++){if(!o(e))return!1;e=e[this[n]]}return o(e)?(e[this[n]]=t,!0):!1}});var Z=new d("",G);Z.valid=!1,Z.getValueFrom=Z.setValueFrom=function(){};var J,K=1e3,ee=[],te=z?function(){return function(e){return Promise.resolve().then(e)}}():function(){return function(e){ee.push(e)}}(),ne=[],re=[],ie=0,oe=1,ae=2,se=3,ue=1;C.prototype={open:function(e,t){if(this.state_!=ie)throw Error("Observer has already been opened.");return E(this),this.callback_=e,this.target_=t,this.connect_(),this.state_=oe,this.value_},close:function(){this.state_==oe&&(O(this),this.disconnect_(),this.value_=void 0,this.callback_=void 0,this.target_=void 0,this.state_=ae)},deliver:function(){this.state_==oe&&p(this)},report_:function(e){try{this.callback_.apply(this.target_,e)}catch(t){C._errorThrownDuringCallback=!0,console.error("Exception caught during observer callback: "+(t.stack||t))}},discardChanges:function(){return this.check_(void 0,!0),this.value_}};var ce,le=!z;C._allObserversCount=0,le&&(ce=[]);var de=!1;e.Platform=e.Platform||{},e.Platform.performMicrotaskCheckpoint=function(){if(!de&&le){de=!0;var t,n,r=0;do{r++,n=ce,ce=[],t=!1;for(var i=0;i<n.length;i++){var o=n[i];o.state_==oe&&(o.check_()&&(t=!0),ce.push(o))}b()&&(t=!0)}while(K>r&&t);q&&(e.dirtyCheckCycleCount=r),de=!1}},le&&(e.Platform.clearObservers=function(){ce=[]}),k.prototype=H({__proto__:C.prototype,arrayObserve:!1,connect_:function(e,t){z?this.directObserver_=_(this,this.value_,this.arrayObserve):this.oldObject_=this.copyObject(this.value_)},copyObject:function(e){var t=Array.isArray(e)?[]:{};for(var n in e)t[n]=e[n];return Array.isArray(e)&&(t.length=e.length),t},check_:function(e,t){var n,r;if(z){if(!e)return!1;r={},n=T(this.value_,e,r)}else r=this.oldObject_,n=g(this.value_,this.oldObject_);return m(n)?!1:(z||(this.oldObject_=this.copyObject(this.value_)),this.report_([n.added||{},n.removed||{},n.changed||{},function(e){return r[e]}]),!0)},disconnect_:function(){z?(this.directObserver_.close(),this.directObserver_=void 0):this.oldObject_=void 0},deliver:function(){this.state_==oe&&(z?this.directObserver_.deliver(!1):p(this))},discardChanges:function(){return this.directObserver_?this.directObserver_.deliver(!0):this.oldObject_=this.copyObject(this.value_),this.value_}}),N.prototype=H({__proto__:k.prototype,arrayObserve:!0,copyObject:function(e){return e.slice()},check_:function(e){var t;if(z){if(!e)return!1;t=F(this.value_,e)}else t=I(this.value_,0,this.value_.length,this.oldObject_,0,this.oldObject_.length);return t&&t.length?(z||(this.oldObject_=this.copyObject(this.value_)),this.report_([t]),!0):!1}}),N.applySplices=function(e,t,n){n.forEach(function(n){for(var r=[n.index,n.removed.length],i=n.index;i<n.index+n.addedCount;)r.push(t[i]),i++;Array.prototype.splice.apply(e,r)})},S.prototype=H({__proto__:C.prototype,get path(){return this.path_},connect_:function(){z&&(this.directObserver_=x(this,this.object_)),this.check_(void 0,!0)},disconnect_:function(){this.value_=void 0,this.directObserver_&&(this.directObserver_.close(this),this.directObserver_=void 0)},iterateObjects_:function(e){this.path_.iterateObjects(this.object_,e)},check_:function(e,t){var n=this.value_;return this.value_=this.path_.getValueFrom(this.object_,this.defaultValue_),t||a(this.value_,n)?!1:(this.report_([this.value_,n,this]),!0)},setValue:function(e){this.path_&&this.path_.setValueFrom(this.object_,e)}});var fe={};$.prototype=H({__proto__:C.prototype,connect_:function(){if(z){for(var e,t=!1,n=0;n<this.observed_.length;n+=2)if(e=this.observed_[n],e!==fe){t=!0;break}t&&(this.directObserver_=x(this,e))}this.check_(void 0,!this.reportChangesOnOpen_)},disconnect_:function(){for(var e=0;e<this.observed_.length;e+=2)this.observed_[e]===fe&&this.observed_[e+1].close();this.observed_.length=0,this.value_.length=0,this.directObserver_&&(this.directObserver_.close(this),this.directObserver_=void 0)},addPath:function(e,t){if(this.state_!=ie&&this.state_!=se)throw Error("Cannot add paths once started.");if(t=f(t),this.observed_.push(e,t),this.reportChangesOnOpen_){var n=this.observed_.length/2-1;this.value_[n]=t.getValueFrom(e)}},addObserver:function(e){if(this.state_!=ie&&this.state_!=se)throw Error("Cannot add observers once started.");if(this.observed_.push(fe,e),this.reportChangesOnOpen_){var t=this.observed_.length/2-1;this.value_[t]=e.open(this.deliver,this)}},startReset:function(){if(this.state_!=oe)throw Error("Can only reset while open");this.state_=se,this.disconnect_()},finishReset:function(){if(this.state_!=se)throw Error("Can only finishReset after startReset");return this.state_=oe,this.connect_(),this.value_},iterateObjects_:function(e){for(var t,n=0;n<this.observed_.length;n+=2)t=this.observed_[n],t!==fe&&this.observed_[n+1].iterateObjects(t,e)},check_:function(e,t){for(var n,r=0;r<this.observed_.length;r+=2){var i,o=this.observed_[r],s=this.observed_[r+1];if(o===fe){var u=s;i=this.state_===ie?u.open(this.deliver,this):u.discardChanges()}else i=s.getValueFrom(o);t?this.value_[r/2]=i:a(i,this.value_[r/2])||(n=n||[],n[r/2]=this.value_[r/2],this.value_[r/2]=i)}return n?(this.report_([this.value_,n,this.observed_]),!0):!1}}),j.prototype={open:function(e,t){return this.callback_=e,this.target_=t,this.value_=this.getValueFn_(this.observable_.open(this.observedCallback_,this)),this.value_},observedCallback_:function(e){if(e=this.getValueFn_(e),!a(e,this.value_)){var t=this.value_;this.value_=e,this.callback_.call(this.target_,this.value_,t)}},discardChanges:function(){return this.value_=this.getValueFn_(this.observable_.discardChanges()),this.value_},deliver:function(){return this.observable_.deliver()},setValue:function(e){return e=this.setValueFn_(e),!this.dontPassThroughSet_&&this.observable_.setValue?this.observable_.setValue(e):void 0},close:function(){this.observable_&&this.observable_.close(),this.callback_=void 0,this.target_=void 0,this.observable_=void 0,this.value_=void 0,this.getValueFn_=void 0,this.setValueFn_=void 0}};var he={add:!0,update:!0,"delete":!0},pe=0,ve=1,me=2,ge=3;M.prototype={calcEditDistances:function(e,t,n,r,i,o){var a,s,u=o-i+1,c=n-t+1,l=new Array(u);for(a=0;u>a;a++)l[a]=new Array(c),l[a][0]=a;for(s=0;c>s;s++)l[0][s]=s;for(a=1;u>a;a++)for(s=1;c>s;s++)if(this.equals(e[t+s-1],r[i+a-1]))l[a][s]=l[a-1][s-1];else{var d=l[a-1][s]+1,f=l[a][s-1]+1;l[a][s]=f>d?d:f}return l},spliceOperationsFromEditDistances:function(e){for(var t=e.length-1,n=e[0].length-1,r=e[t][n],i=[];t>0||n>0;)if(0!=t)if(0!=n){var o,a=e[t-1][n-1],s=e[t-1][n],u=e[t][n-1];o=u>s?a>s?s:a:a>u?u:a,o==a?(a==r?i.push(pe):(i.push(ve),r=a),t--,n--):o==s?(i.push(ge),t--,r=s):(i.push(me),n--,r=u)}else i.push(ge),t--;else i.push(me),n--;return i.reverse(),i},calcSplices:function(e,t,n,r,i,o){var a=0,s=0,u=Math.min(n-t,o-i);if(0==t&&0==i&&(a=this.sharedPrefix(e,r,u)),n==e.length&&o==r.length&&(s=this.sharedSuffix(e,r,u-a)),t+=a,i+=a,n-=s,o-=s,n-t==0&&o-i==0)return[];var c;if(t==n){for(c=P(t,[],0);o>i;)c.removed.push(r[i++]);return[c]}if(i==o)return[P(t,[],n-t)];for(var l=this.spliceOperationsFromEditDistances(this.calcEditDistances(e,t,n,r,i,o)),d=[],f=t,h=i,p=0;p<l.length;p++)switch(l[p]){case pe:c&&(d.push(c),c=void 0),f++,h++;break;case ve:c||(c=P(f,[],0)),c.addedCount++,f++,c.removed.push(r[h]),h++;break;case me:c||(c=P(f,[],0)),c.addedCount++,f++;break;case ge:c||(c=P(f,[],0)),c.removed.push(r[h]),h++}return c&&d.push(c),d},sharedPrefix:function(e,t,n){for(var r=0;n>r;r++)if(!this.equals(e[r],t[r]))return r;return n},sharedSuffix:function(e,t,n){for(var r=e.length,i=t.length,o=0;n>o&&this.equals(e[--r],t[--i]);)o++;return o},calculateSplices:function(e,t){return this.calcSplices(e,0,e.length,t,0,t.length)},equals:function(e,t){return e===t}};var be=new M,ye=e;"undefined"==typeof exports||exports.nodeType||("undefined"!=typeof module&&module.exports&&(exports=module.exports),ye=exports),ye.Observer=C,ye.Observer.runEOM_=te,ye.Observer.observerSentinel_=fe,ye.Observer.hasObjectObserve=z,ye.ArrayObserver=N,ye.ArrayObserver.calculateSplices=function(e,t){return be.calculateSplices(e,t)},ye.ArraySplice=M,ye.ObjectObserver=k,ye.PathObserver=S,ye.CompoundObserver=$,ye.Path=d,ye.ObserverTransform=j}("undefined"!=typeof global&&global&&"undefined"!=typeof module&&module?global:this||window),function(e){"use strict";function t(e){for(;e.parentNode;)e=e.parentNode;return"function"==typeof e.getElementById?e:null}function n(e,t,n){var r=e.bindings_;return r||(r=e.bindings_={}),r[t]&&r[t].close(),r[t]=n}function r(e,t,n){return n}function i(e){return null==e?"":e}function o(e,t){e.data=i(t)}function a(e){return function(t){return o(e,t)}}function s(e,t,n,r){return n?void(r?e.setAttribute(t,""):e.removeAttribute(t)):void e.setAttribute(t,i(r))}function u(e,t,n){return function(r){s(e,t,n,r)}}function c(e){switch(e.type){case"checkbox":return w;case"radio":case"select-multiple":case"select-one":return"change";case"range":if(/Trident|MSIE/.test(navigator.userAgent))return"change";default:return"input"}}function l(e,t,n,r){e[t]=(r||i)(n)}function d(e,t,n){return function(r){return l(e,t,r,n)}}function f(){}function h(e,t,n,r){function i(){var i="value"==t&&"number"==e.type;n.setValue(i?e.valueAsNumber:e[t]),n.discardChanges(),(r||f)(e),Platform.performMicrotaskCheckpoint()}var o=c(e);return e.addEventListener(o,i),{close:function(){e.removeEventListener(o,i),n.close()},observable_:n}}function p(e){return Boolean(e)}function v(e){if(e.form)return y(e.form.elements,function(t){return t!=e&&"INPUT"==t.tagName&&"radio"==t.type&&t.name==e.name});var n=t(e);if(!n)return[];var r=n.querySelectorAll('input[type="radio"][name="'+e.name+'"]');return y(r,function(t){return t!=e&&!t.form})}function m(e){"INPUT"===e.tagName&&"radio"===e.type&&v(e).forEach(function(e){var t=e.bindings_.checked;t&&t.observable_.setValue(!1)})}function g(e,t){var n,r,o,a=e.parentNode;a instanceof HTMLSelectElement&&a.bindings_&&a.bindings_.value&&(n=a,r=n.bindings_.value,o=n.value),e.value=i(t),n&&n.value!=o&&(r.observable_.setValue(n.value),r.observable_.discardChanges(),Platform.performMicrotaskCheckpoint())}function b(e){return function(t){g(e,t)}}var y=Array.prototype.filter.call.bind(Array.prototype.filter);Node.prototype.bind=function(e,t){console.error("Unhandled binding to Node: ",this,e,t)},Node.prototype.bindFinished=function(){};var _=r;Object.defineProperty(Platform,"enableBindingsReflection",{get:function(){return _===n},set:function(e){return _=e?n:r,e},configurable:!0}),Text.prototype.bind=function(e,t,n){if("textContent"!==e)return Node.prototype.bind.call(this,e,t,n);if(n)return o(this,t);var r=t;return o(this,r.open(a(this))),_(this,e,r)},Element.prototype.bind=function(e,t,n){var r="?"==e[e.length-1];if(r&&(this.removeAttribute(e),e=e.slice(0,-1)),n)return s(this,e,r,t);var i=t;return s(this,e,r,i.open(u(this,e,r))),_(this,e,i)};var w;!function(){var e=document.createElement("div"),t=e.appendChild(document.createElement("input"));t.setAttribute("type","checkbox");var n,r=0;t.addEventListener("click",function(e){r++,n=n||"click"}),t.addEventListener("change",function(){r++,n=n||"change"});var i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(i),w=1==r?"change":n}(),HTMLInputElement.prototype.bind=function(e,t,r){if("value"!==e&&"checked"!==e)return HTMLElement.prototype.bind.call(this,e,t,r);this.removeAttribute(e);var o="checked"==e?p:i,a="checked"==e?m:f;if(r)return l(this,e,t,o);var s=t,u=h(this,e,s,a);return l(this,e,s.open(d(this,e,o)),o),n(this,e,u)},HTMLTextAreaElement.prototype.bind=function(e,t,n){if("value"!==e)return HTMLElement.prototype.bind.call(this,e,t,n);if(this.removeAttribute("value"),n)return l(this,"value",t);var r=t,o=h(this,"value",r);return l(this,"value",r.open(d(this,"value",i))),_(this,e,o)},HTMLOptionElement.prototype.bind=function(e,t,n){if("value"!==e)return HTMLElement.prototype.bind.call(this,e,t,n);if(this.removeAttribute("value"),n)return g(this,t);var r=t,i=h(this,"value",r);return g(this,r.open(b(this))),_(this,e,i)},HTMLSelectElement.prototype.bind=function(e,t,r){if("selectedindex"===e&&(e="selectedIndex"),"selectedIndex"!==e&&"value"!==e)return HTMLElement.prototype.bind.call(this,e,t,r);if(this.removeAttribute(e),r)return l(this,e,t);var i=t,o=h(this,e,i);return l(this,e,i.open(d(this,e))),n(this,e,o)}}(this),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils")):"function"==typeof define&&define.amd?define(["elliptical-utils"],t):(e.elliptical=e.elliptical||{},e.elliptical.observable=e.elliptical.observable||{},e.elliptical.observable.report=t(e.elliptical.utils),e.returnExports=e.elliptical.observable.report)}(this,function(e){var t=e.string;return{splitPath:function(e,t){return"undefined"==typeof t&&(t="."),"undefined"==typeof e||""===e?[]:Array.isArray(e)?e.slice(0):e.toString().split(t)},getObjValueByPath:function(e,t){try{var n=this.splitPath(t),r=e;return n.forEach(function(e){var t=r[e];r=t}),r}catch(i){return void 0}},setObjValueByPath:function(e,t,n){try{for(var r=this.splitPath(t),i=e,o=r.length,a=o-1,s=0;o>s;s++)if(s===a)i[r[s]]=n;else{var u=i[r[s]];i=u}}catch(c){}},bracketPathFormat:function(t){var n=this.splitPath(t),r=e.isNumeric;if(n&&n.length){var i=n.map(function(e){return r(e)?"["+e.toString()+"]":e});return i.join(".").replace(/.\[/,"[")}return t},objChangedProps:function(t,n){var r={},i=this.keys(t);return i.forEach(function(i){e.isEqual(t[i],n[i])||(r[i]=t[i])}),r},isPropertyArray:function(e,t){try{var n=e[Object.keys(e)[t]];return!!Array.isArray(n)}catch(r){return!1}},propertyByIndex:function(e,t){return e[Object.keys(e)[t]]},changeRecord:{get entity(){return{object:void 0,value:void 0,oldValue:void 0,path:void 0,name:void 0,root:void 0}},get result(){return{added:[],changed:[],removed:[]}}},keys:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},isArrayList:function(e){if(Array.isArray(e))return e;var t=this.keys(e).length;if(t>1)return null;var n=e[Object.keys(e)[0]];return Array.isArray(n)?n:null},pathReplace:function(e){var n=e.replace(/\//g,".");return"."===t.firstChar(n)&&(n=t.trimFirstChar(n)),n},objDiffReport:function(e,t){var n,r=this.changeRecord.result,i=this,o=this.isArrayList(e);return t&&t.length&&t.forEach(function(e){if(o){if(e.addedCount&&e.addedCount>0&&"splice"===e.type&&r.added.push(e.object[e.index]),e.removed&&e.removed.length>0&&"splice"===e.type&&(r.removed=r.removed.concat(e.removed)),"update"===e.type){n=i.pathReplace(e.path);var t={object:e.object,value:e.value,oldValue:e.oldValue,path:n,name:e.name,root:e.root};r.changed.push(t)}}else{n=i.pathReplace(e.path);var a={object:e.object,value:e.object[e.name],oldValue:e.oldValue,path:n,name:e.name,root:e.root};r.changed.push(a)}}),r}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("observe-js"),require("nested-observe"),require("./report")):"function"==typeof define&&define.amd?define(["observe-js","nested-observe","./report"],t):e.returnExports=t(e,e.Nested,e.elliptical.observable)}(this,function(e,t,n){function r(){function e(e){t=e}if("function"!=typeof Object.observe||"function"!=typeof Array.observe)return!1;var t=[],n={},r=[];return Object.observe(n,e),Array.observe(r,e),n.id=1,n.id=2,delete n.id,r.push(1,2),r.length=0,Object.deliverChangeRecords(e),5!==t.length?!1:"add"!=t[0].type||"update"!=t[1].type||"delete"!=t[2].type||"splice"!=t[3].type||"splice"!=t[4].type?!1:(Object.unobserve(n,e),Array.unobserve(r,e),!0)}function i(e,t){var n,r={},i={},o={};for(n in t){var a=e[n];(void 0===a||a!==t[n])&&(n in e?a!==t[n]&&(o[n]=a):i[n]=void 0)}for(n in e)n in t||(r[n]=e[n]);return Array.isArray(e)&&e.length!==t.length&&(o.length=e.length),{added:r,removed:i,changed:o}}function o(e,t,n){var r=d.pop()||a();return r.open(e),r.observe(t,n),r}function a(){function e(e){t&&t.state_===l&&!r&&t.check_(e)}var t,n,r=!1,i=!0;return{open:function(n){if(t)throw Error("ObservedObject in use");i||Object.deliverChangeRecords(e),t=n,i=!1},observe:function(t,r){n=t,r?Array.observe(n,e):Object.observe(n,e)},deliver:function(t){r=t,Object.deliverChangeRecords(e),r=!1},close:function(){t=void 0,Object.unobserve(n,e),d.push(this)}}}function s(e,t,n){for(var r={},i={},o=0;o<t.length;o++){var a=t[o];f[a.type]?(a.name in n||(n[a.name]=a.oldValue),"update"!=a.type&&("add"!=a.type?a.name in r?(delete r[a.name],delete n[a.name]):i[a.name]=!0:a.name in i?delete i[a.name]:r[a.name]=!0)):(console.error("Unknown changeRecord type: "+a.type),console.error(a))}for(var s in r)r[s]=e[s];for(var s in i)i[s]=void 0;var u={};for(var s in n)if(!(s in r||s in i)){var c=e[s];n[s]!==c&&(u[s]=c)}return{added:r,removed:i,changed:u}}var u=n.report,c=r(),l=1,d=[],f={add:!0,update:!0,"delete":!0},h=ObjectObserver.prototype;return ObjectObserver=function(e,t){Observer.call(this),this.value_=e,this.oldObject_=void 0,this._override=t},ObjectObserver.prototype=h,ObjectObserver.prototype.connect_=function(){void 0!==this._override?t.observe(this.value_,this.check_.bind(this)):c?this.directObserver_=o(this,this.value_,this.arrayObserve):this.oldObject_=this.copyObject(this.value_)},ObjectObserver.prototype.check_=function(e,t){if(void 0!==this._override){var n;return e?(n=u.objDiffReport(this.value_,e),this.callback_.call(this,n),!0):!1}var r,o;if(c){if(!e)return!1;o={},r=s(this.value_,e,o)}else o=this.oldObject_,r=i(this.value_,this.oldObject_);return diffIsEmpty(r)?!1:(c||(this.oldObject_=this.copyObject(this.value_)),this.report_([r.added||{},r.removed||{},r.changed||{},function(e){return o[e]}]),!0)},ObjectObserver.prototype.disconnect_=function(){void 0!==this._override?t.unobserve(this.value_,function(){}):c?(this.directObserver_.close(),this.directObserver_=void 0):this.oldObject_=void 0},e.ObjectObserver=ObjectObserver,e}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical=e.elliptical||{},e.elliptical.observable=e.elliptical.observable||{},e.elliptical.observable.cache=t(),e.returnExports=e.elliptical.observable.cache)}(this,function(){return{_initCache:function(){var e=this.$cache();this._data.set("$cache",e)},$cache:function(){var e={},t=1;return{reset:function(){t=1,e={}},set:function(n,r){n.__data||(n.__data=t++),e[n.__data]=r},get:function(t){return e[t.__data]}}},_disposeCache:function(){var e=this._data.get("$cache");e=null},_dispose:function(){this._disposeCache(),this._super&&this._super()}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-event")):"function"==typeof define&&define.amd?define(["elliptical-event"],t):(e.elliptical.observable=e.elliptical.observable||{},e.elliptical.observable.pubsub=t(e.elliptical.Event),e.returnExports=e.elliptical.observable.pubsub)}(this,function(e){return{_publish:function(t,n){e.emit(t,n)},_subscribe:function(t,n){var r=this._data.get("subscriptions");r||(r=new Map),r.set(t,n),this._data.set("subscriptions",r),e.on(t,n)},_subscriptions:$.noop,_unbindSubscriptions:function(){var t=this._data.get("subscriptions");t.forEach(function(t,n){e.off(n,t)})},_disposePubSub:function(){this._unbindSubscriptions()},_dispose:function(){this._disposePubSub(),this._super&&this._super()}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils"),require("./report")):"function"==typeof define&&define.amd?define(["elliptical-utils","./report"],t):(e.elliptical.observable=e.elliptical.observable||{},e.elliptical.observable.scope=t(e.elliptical.utils,e.elliptical.observable.report),e.returnExports=e.elliptical.observable.scope)}(this,function(e,t){var n=e.object;return{_initScopeElement:function(){var e=this.options?this.options.scopeBind:this.scopeBind,t=this.options?this.options.idProp:this.idProp;void 0===e&&(e=!0),this._data.set("scopeTimeoutId",null),this._data.set("scopeObserver",null),this._data.set("scopeId",t),this.__initScope(),this.__bindByDataAttribute()?this._setObservable():e&&this.__initScopeObservable()},__initScope:function(){var e=this;this.$scope={};var t=this.element[0];this!==t&&Object.defineProperty(t,"$scope",{get:function(){return e.$scope},set:function(t){e.$scope=t},enumerable:!0,configurable:!0})},__initScopeObservable:function(){var e=this,t=5,r=0,i=setInterval(function(){e._data.set("scopeTimeoutId",i);var o=n.isEmpty(e.$scope);o?t>=r?r++:clearInterval(i):(clearInterval(i),e._setObservable())},300)},__bindByDataAttribute:function(){var e=this.options?this.options.data:this.data;if(void 0===e)return!1;e=JSON.parse(e);var t=this.options?this.options.scope:this.scope;return t?this.$scope[t]=e:this.$scope=e,!0},_setObservable:function(){if(!this._data.get("scopeObserver")){var e=this.$scope,t=this,n=new ObjectObserver(e,!0);n.open(function(e){t.__onScopeChange(e)}),this._data.set("scopeObserver",n)}},__destroyObservable:function(){var e=this._data.get("scopeObserver");e&&(e.disconnect_(),e=null,this.$scope=null)},__resetObservable:function(){this.__destroyObservable(),this._setObservable()},__scopeLength:function(e){var n="undefined"==typeof e?this.$scope:e;if(t.isPropertyArray(n,0)){var r=t.propertyByIndex(n,0);return r.length}return-1},__recycle:function(){this.__destroyObservable(),this._setObservable()},__onScopeChange:function(e){this._onScopeChange(e)},_objectChange:function(e){if(void 0!==e){if(e.object&&e.oldObject)return t.objChangedProps(e.object,e.oldObject);var n={};return n[e.name]=e.value,n}},_disposeScope:function(){this.__destroyObservable()},_dispose:function(){this._disposeScope(),this._super&&this._super()},_onScopeChange:function(){},_onScopeBind:function(){},_scopeSetter:function(e,t,n){var r=this.options?this.options.scopeSetterDelay:this.scopeSetterDelay;void 0===r&&(r=300);var i=void 0!==window.__observePolyfill,o=this.$scope;"undefined"==typeof n?i?setTimeout(function(){o[e]=t},r):o[e]=t:i?setTimeout(function(){o[n][e]=t},r):o[n][e]=t},_changeReport:function(e,n){return t.objChangedProps(e,n)},$setScope:function(e){void 0!==e&&(this.$scope=e),this._setObservable(),this._onScopeBind()}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical.observable=e.elliptical.observable||{},e.elliptical.observable.template=t(e.elliptical.utils,e.elliptical.observable.report),e.returnExports=e.elliptical.observable.template)}(this,function(e,t){var n=8,r=500,i=e.random,o=e.object,a=e.string;return{_initTemplateElement:function(){var e=this.options?this.options.scopeBind:this.scopeBind;void 0===e&&(e=!0),e&&this._watch(),this._setAutoRebind(),this._initPathObservers(),this._data.set("templateId",null),this._data.set("templateNode",null)},_setAutoRebind:function(){var e=this.options?this.options.autoRebind:this.autoRebind;void 0===e&&(e=!0),this._data.set("autoRebind",e)},_initPathObservers:function(){this._data.set("pathObservers",[])},_watch:function(){var e=0,t=this,i=setInterval(function(){if(t.__isReady()){var r=t._getTemplateId();if(r)t._data.set("templateId",r),clearInterval(i),t.__render();else{var o=t._getTemplateNode();o?(clearInterval(i),t._data.set("templateNode",o),r=t._setTemplateId(o),t._precompileTemplate(o,r),t.__render()):(e>n&&clearInterval(i),e++)}}else e>n&&clearInterval(i),e++},r)},__isReady:function(){return o.isEmpty(this.$scope)?!1:this._isReady()},_isReady:function(){return!0},_getTemplateId:function(){var e=this._getTemplateNode();if(e){var t=e.getAttribute("template");return""===t?null:t}return null},_getTemplateNode:function(){var e=this.element,t=e.selfFind("[template]");return t[0]?t[0]:null},_setTemplateId:function(e){var t="tmpl-"+i.str(6);return e.setAttribute("template",t),this._data.set("templateId",t),t},_setVisibility:function(){var e=this._data.get("templateNode");e&&e.classList.add("visible")},_connectDOMObserver:function(){var e=this._data.get("templateNode");$(e).mutationSummary("connect",this.__onMutation.bind(this),[{all:!0}])},__onMutation:function(e){e.added&&this._onMutationAdded(e.added),e.removed&&this._onMutationRemoved(e.removed)},_onMutationAdded:function(e){},_onMutationRemoved:function(e){},__render:function(){var e=this,t=this.options?this.options.twoWayBind:this.twoWayBind;void 0===t&&(t=!0);var n=this._data.get("templateNode"),r=this._data.get("templateId");this._render(n,r,this.$scope,function(r,i){t&&e.__dataBind(n),e._setVisibility(),e._connectDOMObserver()})},__dataBind:function(n){var r=this._data.get("pathObservers"),i=this,a=function(e){3!==e.nodeType&&e.hasAttributes&&e.hasAttributes()&&s(e)},s=function(e){$.each(e.attributes,function(t,n){if(n&&"data-bind"===n.name&&void 0!==n.value&&""!==n.value){var r=n.value.trim(),i=r.split(":"),o=i[0];"text"===o?u(e,i):c(e,i)}})},u=function(n,a){var s={};a.length>2&&(s=l(a[2]));var u=a[1],c=t.getObjValueByPath(i.$scope,u);o.isEmpty(s)||(c=d(c,s),e.setObjValueByPath(i.$scope,u,c));var f=i.__createTextNode(n,c);u=t.bracketPathFormat(u);var h=new PathObserver(i.$scope,u);f.bind("textContent",h),r.push(h)},c=function(n,a){var s={},u=a[0];a.length>2&&(s=l(a[2]));var c=a[1],f=t.getObjValueByPath(i.$scope,c);o.isEmpty(s)||(f=d(f,s),e.setObjValueByPath(i.$scope,c,f)),c=t.bracketPathFormat(c);var h=new PathObserver(i.$scope,c);n.bind(u,h),r.push(h)},l=function(e){var t,n=e.match(/\((.*?)\)/g);n||(n="");var r=e.replace(n,"");return n=n.replace("(",""),n=n.replace(")",""),t=n.length<1?[]:n.split(","),{func:r,args:t}},d=function(e,t){var n,r,o=t.func;return window.dust.helpers.inline[o]?(n=window.dust.helpers.inline[o],r=t.args,r.length>0?r.unshift(e):r.push(e),n.apply(this,r)):window[o]?(n=window[o],r=t.args,r.length>0?r.unshift(e):r.push(e),n.apply(this,r)):i[o]?(n=i[o],r=t.args,r.length>0?r.unshift(e):r.push(e),n.apply(i,r)):e};this._traverseDOM(n,a)},_traverseDOM:function(e,t){for(t(e),e=e.firstChild;e;)this._traverseDOM(e,t),e=e.nextSibling},__createTextNode:function(e,t){var n=$(e),r=n.text();r=r?r.replace(t,""):t,n.text(r);var i=document.createTextNode(t);return e.appendChild(i),i},__onScopeChange:function(e){if(this._passScopeFilter(e)){var t=this._data.get("autoRebind");t&&(e.removed&&e.removed.length&&e.removed.length>0?this._rebind():e.added&&e.added.length&&e.added.length>0&&this._rebind()),this._onScopeChange(e)}},_passScopeFilter:function(e){return e.changed.length>0?this._filterScopeChange(e.changed):e.added.length>0?this._filterScopeChange(e.added):e.removed.length>0?this._filterScopeChange(e.removed):void 0;
},_filterScopeChange:function(e){var t=!1;return e.forEach(function(e){"$"!==a.firstChar(e.name)&&(t=!0)}),t},_rebind:function(){this._disposeTemplate(),this._initPathObservers(),this.__render()},_disconnectDOMObserver:function(){var e=this._data.get("templateNode");$(e).mutationSummary("disconnect")},_disconnectPathObservers:function(){var e=this._data.get("pathObservers");e.forEach(function(e){e.disconnect_()}),e=null},_disposeTemplate:function(){this._disconnectDOMObserver(),this._disconnectPathObservers()},_dispose:function(){this._disposeTemplate(),this._super&&this._super()},$rebind:function(){this._rebind()}}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){return e.ui=e.ui||{},e.ui.version="@VERSION"}),function(e){"function"==typeof define&&define.amd?define(["jquery","./version"],e):e(jQuery)}(function(e){var t=0,n=Array.prototype.slice;return e.cleanData=function(t){return function(n){var r,i,o;for(o=0;null!=(i=n[o]);o++)try{r=e._data(i,"events"),r&&r.remove&&e(i).triggerHandler("remove")}catch(a){}t(n)}}(e.cleanData),e.widget=function(t,n,r){var i,o,a,s={},u=t.split(".")[0];t=t.split(".")[1];var c=u+"-"+t;return r||(r=n,n=e.Widget),e.isArray(r)&&(r=e.extend.apply(null,[{}].concat(r))),e.expr[":"][c.toLowerCase()]=function(t){return!!e.data(t,c)},e[u]=e[u]||{},i=e[u][t],o=e[u][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,i,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),a=new n,a.options=e.widget.extend({},a.options),e.each(r,function(t,r){return e.isFunction(r)?void(s[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function i(e){return n.prototype[t].apply(this,e)}return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=i,t=r.apply(this,arguments),this._super=n,this._superApply=o,t}}()):void(s[t]=r)}),o.prototype=e.widget.extend(a,{widgetEventPrefix:i?a.widgetEventPrefix||t:t},s,{constructor:o,namespace:u,widgetName:t,widgetFullName:c}),i?(e.each(i._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete i._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var r,i,o=n.call(arguments,1),a=0,s=o.length;s>a;a++)for(r in o[a])i=o[a][r],o[a].hasOwnProperty(r)&&void 0!==i&&(e.isPlainObject(i)?t[r]=e.isPlainObject(t[r])?e.widget.extend({},t[r],i):e.widget.extend({},i):t[r]=i);return t},e.widget.bridge=function(t,r){var i=r.prototype.widgetFullName||t;e.fn[t]=function(o){var a="string"==typeof o,s=n.call(arguments,1),u=this;return a?this.each(function(){var n,r=e.data(this,i);return"instance"===o?(u=r,!1):r?e.isFunction(r[o])&&"_"!==o.charAt(0)?(n=r[o].apply(r,s),n!==r&&void 0!==n?(u=n&&n.jquery?u.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}):(s.length&&(o=e.widget.extend.apply(null,[o].concat(s))),this.each(function(){var t=e.data(this,i);t?(t.option(o||{}),t._init&&t._init()):e.data(this,i,new r(o,this))})),u}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(n,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,n){t._removeClass(n,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r,i,o,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},r=t.split("."),t=r.shift(),r.length){for(i=a[t]=e.widget.extend({},this.options[t]),o=0;o<r.length-1;o++)i[r[o]]=i[r[o]]||{},i=i[r[o]];if(t=r.pop(),1===arguments.length)return void 0===i[t]?null:i[t];i[t]=n}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,r,i;for(n in t)i=this.classesElementLookup[n],t[n]!==this.options.classes[n]&&i&&i.length&&(r=e(i.get()),this._removeClass(i,n),r.addClass(this._classes({element:r,keys:n,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function n(n,o){var a,s;for(s=0;s<n.length;s++)a=i.classesElementLookup[n[s]]||e(),a=e(t.add?e.unique(a.get().concat(t.element.get())):a.not(t.element).get()),i.classesElementLookup[n[s]]=a,r.push(n[s]),o&&t.classes[n[s]]&&r.push(t.classes[n[s]])}var r=[],i=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),t.keys&&n(t.keys.match(/\S+/g)||[],!0),t.extra&&n(t.extra.match(/\S+/g)||[]),r.join(" ")},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,r){r="boolean"==typeof r?r:n;var i="string"==typeof e||null===e,o={extra:i?t:n,keys:i?e:t,element:i?this.element:e,add:r};return o.element.toggleClass(this._classes(o),r),this},_on:function(t,n,r){var i,o=this;"boolean"!=typeof t&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,a){function s(){return t||o.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||e.guid++);var u=r.match(/^([\w:-]*)\s*(.*)$/),c=u[1]+o.eventNamespace,l=u[2];l?i.on(c,l,s):n.on(c,s)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return("string"==typeof e?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,r){var i,o,a=this.options[t];if(r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(i in o)i in n||(n[i]=o[i]);return this.element.trigger(n,r),!(e.isFunction(a)&&a.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,o){"string"==typeof i&&(i={effect:i});var a,s=i?i===!0||"number"==typeof i?n:i.effect||n:t;i=i||{},"number"==typeof i&&(i={duration:i}),a=!e.isEmptyObject(i),i.complete=o,i.delay&&r.delay(i.delay),a&&e.effects&&e.effects.effect[s]?r[t](i):s!==t&&r[s]?r[s](i.duration,i.easing,o):r.queue(function(n){e(this)[t](),o&&o.call(r[0]),n()})}}),e.widget}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical=e.elliptical||{},e.elliptical.cssElements=t(),e.returnExports=e.elliptical.cssElements)}(this,function(){return{registered:!1,elements:["ui-container","ui-overlay","ui-modal","ui-menu","menu-item","ui-brand","ui-toggle","menu-item-dropdown","menu-item-search","menu-divider","grid-row","grid-columns","ui-select","ui-input-icon","flex-table","ui-dropdown","ui-mega-dropdown","ui-media-object","ui-box","ui-breadcrumb","breadcrumb-item","ui-radio-list","ui-checkbox-list","flex-box","flex-list","flex-label","ui-badge","ui-tip","ui-columns","column-item","ui-social","social-icon","touch-ui-drawer","touch-ui-menu","touch-ui-dropdown","touch-ui-toggle","touch-ui-brand","touch-icons","touch-icon","ui-icons","screen-icon"],register:function(){if(!this.registered&&document.registerElement){this.registered=!0;var e=this.elements;e.forEach(function(e){document.registerElement(e)})}}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils"),require("component-extensions"),require("elliptical-css-register")):"function"==typeof define&&define.amd?define(["elliptical-utils","component-extensions","elliptical-css-register"],t):e.returnExports=t(e.elliptical.utils,e.elliptical.extensions,e.elliptical.cssElements)}(this,function(e,t,n){function r(e,t){"undefined"==typeof t&&(t=HTMLElement.prototype,t._name="HTMLElement");var n=Object.create(t);n._tagName=e;var r={prototype:n};"HTMLElement"===t._name?document.registerElement(e,r):(r=o(t._name,r),document.registerElement(e,r))}function i(e){"string"==typeof e?r(e):e.length>0&&e.forEach(function(e){"string"==typeof e?r(e):r(e.name,e.prototype)})}function o(e,t){var n=e.replace(/HTML/g,"").replace(/Element/g,"");return n=n.toLowerCase(),t["extends"]=n,t}function a(e){var t=$.elliptical.defintions.get(e.tagName);void 0===t&&$.elliptical.defintions.set(e.tagName,e)}function s(e,t){void 0===t&&(t=!0);var n={};return $.each(e.attributes,function(e,r){var i=r.name,o=r.value;if(!c(i)){var a=/data-/;a.test(i)&&(i=i.replace("data-","")),t&&"false"!==t?"template"!==i?n[i.toCamelCase()]=u(o):n[i]=u(o):n[i.toCamelCase()]=u(o)}}),n}function u(e){return"false"===e&&(e=!1),"true"===e&&(e=!0),e}function c(e){var t=/href|tcmuri|rowspan|colspan|class|nowrap|cellpadding|cellspacing/;return t.test(e)}function l(e){if(!e)return null;var t=e.dataset;return void 0!==t?e.dataset.upgraded:void 0}function d(e){var t=null,n=null,r=null,i=e.split("."),o=e.split("-");return i.length>1?(n=e,t=e.replace(".","-")):o.length>1?(t=e,n=o[0]+"."+$.utils.string.dashToCamelCase(e)):r=!0,{tagName:t,name:n,err:r}}var f=e.array,h={$providers:{location:function(e){window.location=e}},mqMaxWidth:1024};$.extend($.Widget.prototype.options,h),Object.assign($.Widget.prototype,t.base),$.Widget.prototype._location=function(e){var t=$.Widget.prototype.options.$providers.location;t(e)},$.Widget.prototype._getCreateEventData=function(){$.data(this.element[0],"custom-"+this.widgetName,this.widgetName),this._onCreateEventData()},$.Widget.prototype._onCreateEventData=$.noop,$.Widget.prototype._getAttrs=function(e,t){return s(e,t)},$.Widget.prototype.setOptions=function(e){this._setOptions(e)},$.each({show:"fadeIn",hide:"fadeOut"},function(e,t){$.Widget.prototype["_"+e]=function(n,r,i){var o=r?r.event:null;"string"==typeof r&&(r={effect:r});var a;r?r===!0||"number"==typeof r?t:r.effect||t:e;r=r||{},"number"==typeof r&&(r={duration:r}),a=!$.isEmptyObject(r),r.complete=i,r.delay&&n.delay(r.delay),r.duration||(r.duration=300);var s={};s.duration=r.duration,s.preset=r.effect,$("html").hasClass("no-css3dtransforms")||"none"===r.effect?"show"===o?(n.show(),i&&i()):"hide"===o&&(n.hide(),i&&i()):this._transition(n,s,i)}}),$.widget.$providers=function(e){for(var t in e)e.hasOwnProperty(t)&&($.Widget.prototype.options.$providers[t]=e[t])},$.widget.config={options:Object.defineProperties({},{mqMaxWidth:{get:function(){return $.Widget.prototype.options.mqMaxWidth},set:function(e){$.Widget.prototype.options.mqMaxWidth=e}}})},$.elliptical=$.elliptical||{},$.elliptical.definitions=new Map,$.widget.register=function(e,t,n,r){var i={};i.name=e,i.tagName=t,void 0===r&&(r=!0);var s=Object.create(n);s._tagName=t;var u={prototype:s};s.attachedCallback=function(){this._attachedCallback&&this._attachedCallback()},s.detachedCallback=function(){this._detachedCallback&&this._detachedCallback()},s.createdCallback=function(){_HTML5Imports.instantiate(this,e)},s.attributeChangedCallback=function(e,t,n){this._attributeChangedCallback&&this._attributeChangedCallback(e,t,n)},"HTMLElement"===n._name?document.registerElement(t,u):(i.tagName='[is="'+t+'"]',u=o(n._name,u),document.registerElement(t,u)),r&&a(i)},$.widget.registerElement=function(e,t){r(e,t)},$.widget.registerElements=function(e){i(e)},$.widget("elliptical.element",{_create:function(){this._destroyed=!1,this._data={_store:new Map,get:function(e){return this._store.get(e)},set:function(e,t){this._store.set(e,t)},click:"touchclick",hover:"touchhover"},this._data.events=[],$.extend(this.options,$.Widget.prototype.options),this._onBeforeCreate()},_onBeforeCreate:function(){this.options.proxyUpgrade?this._proxyUpgradeElement():this._upgradeElement()},_proxyUpgradeElement:function(){this.element[0].dataset&&(this.element[0].dataset.upgraded=!0),this._onCreate()},_upgradeElement:function(){var e=this,t=l(this.element[0]);if(null===t&&this._destroy(),"true"===t)this._onCreate();else{var n=this._tagName;window._HTML5Imports.upgradeElement(n,this.element[0],function(n){t=l(n),"true"===t?e._onCreate():e.destroy()})}},__press:function(){return"ontouchend"in document?"touchend":"click"},__tap:function(){return"ontouchend"in document?"tap":"click"},_onCreate:function(){this._created||(this._created=!0,this._setOptionsFromAttribute(),this._delegateEventListener(),this._setChildrenAttributes(),this.__componentCallbacks(),this._bindOptionsToPrototypes(),this.__bindPressEvent(),this.__bindTapEvent(),this._initElement(),this.__onInit(),this._bindPublicPropsToElement(),this._bindPublicElementMethods(),this._publishLoaded())},_publishLoaded:function(){this._triggerEvent("loaded",this.element)},_bindPublicPropsToElement:function(){var e=Object.getPrototypeOf(this),t=this.element[0],n=this;this._iterateForPublicProps(t,this);for(var r in e)e.hasOwnProperty(r)&&(this._assignPublicMethods(t,e,r,n),this.__assignPublicProps(t,e,r,n))},_bindOptionsToPrototypes:function(){var e=this.element[0],t=this,n=this.options;for(var r in n)n.hasOwnProperty(r)&&0!==r.indexOf("$")&&"$providers"!==r&&"classes"!==r&&"upgraded"!==r&&"mqMaxWidth"!==r&&"create"!==r&&"template"!==r&&(this._assignPublicProps(t,n,r,t.options),this._assignPublicProps(e,n,r,t.options))},_iterateForPublicProps:function(e,t){var n=this;for(var r in t)t.hasOwnProperty(r)&&this.__assignPublicProps(e,t,r,n)},_assignPublicMethods:function(e,t,n,r){0!==n.indexOf("_")&&"function"==typeof t[n]&&"constructor"!==n&&(e[n]=function(){r[n].apply(r,arguments)})},__assignPublicProps:function(e,t,n,r){0===n.indexOf("$")&&this._assignPublicProps(e,t,n,r)},_assignPublicProps:function(e,t,n,r){"function"!=typeof t[n]&&Object.defineProperty(e,n,{get:function(){return r[n]},set:function(e){r[n]=e},enumerable:!0,configurable:!0})},__bindEvents:function(){var e=this._events;for(var t in e)e.hasOwnProperty(t)&&this.__bindEvent(e,t)},__bindEvent:function(e,t){var n,r=e[t],i=t.split("@"),o=i.length;if(1===o)n=this.__getEvent(i[0]),this._event(this.element,n,this[r].bind(this));else if(2===o){var a=i[0];n=this.__getEvent(i[1]),"document"===a&&this._event($(document),n,this[r].bind(this)),"window"===a?this._event($(window),n,this[r].bind(this)):this._event(this.element,n,a,this[r].bind(this))}},__getEvent:function(e){return"click"===e?this._data.click:"press"===e?this.__press():"tap"===e?this.__tap():e},_bindPublicElementMethods:function(){var e=this,t=this.element[0];t.hide=function(){e._hide()},t.show=function(){e._show()},t.$service=function(t){e.service(t)},t.$serviceAsync=function(t,n){e.serviceAsync(t,n)},t.runInit=function(){e.runInit()}},__bindPressEvent:function(){var e=this,t=this._data;Object.defineProperty(t,"press",{get:function(){return e.__press()},enumerable:!0,configurable:!0})},__bindTapEvent:function(){var e=this,t=this._data;Object.defineProperty(t,"tap",{get:function(){return e.__tap()},enumerable:!0,configurable:!0})},_initElement:$.noop,__onInit:function(){this.__bindEvents(),this._onInit()},_onInit:$.noop,_events:{},_event:function(e,t,n,r){var i={};i.element=e,i.event=t;var o=arguments.length;3===o&&(r="function"==typeof n?n:null,n=null),i.selector=n,i.callback=r;var a=this._data.events;-1===$.inArray(i,a)&&this._data.events.push(i),n?e.on(t,n,function(){var e=[].slice.call(arguments);r&&r.apply(this,e)}):e.on(t,function(){var e=[].slice.call(arguments);r&&r.apply(this,e)})},_unbindEvents:function(){for(var e=this._data.events,t=e.length,n=0;t>n;n++){var r=e[n];r.selector?r.element.off(r.event,r.selector):r.element.off(r.event)}e.length=0,this._onUnbindEvents()},_onUnbindEvents:$.noop,_hide:function(){this.element.hide()},_show:function(){this.element.show()},_delegateEventListener:function(){this._event(this.element,this._data.click,"[on-click]",this._listenerCallback.bind(this))},_listenerCallback:function(e){var t=$(e.currentTarget),n=t.attr("on-click");n&&this[n]&&this[n](e)},_destroy:function(){this._data&&(this._triggerEvent("destroyed",this.element),this._unbindEvents(),this._dispose(),$.removeData(this.element[0],"custom-"+this.widgetName),this._data._store=null,this._data.events.length=0,this._destroyed=!0)},__componentCallbacks:function(){var e=this,t=this.element[0],n=Object.getPrototypeOf(t);n._attachedCallback=function(){e._attached(),t.attached&&t.attached()},n._detachedCallback=function(){e._detached(),t.detached&&t.detached()},n._attributeChangedCallback=function(n,r,i){e._attributeChanged(n,r,i),t.attributeChanged&&t.attributeChanged(n,r,i)}},_distributeContent:function(e,t,n){_HTML5Imports.upgradeElement(e,t,n)},_attached:$.noop,_detached:$.noop,_attributeChanged:$.noop,_dispose:$.noop,hide:function(){this._hide()},show:function(){this._show()},runInit:function(){this._initElement()},$service:function(e){if(void 0===e&&this.options&&(e=this.options.service),this.__serviceLocator)return this.__serviceLocator(e);var t=$.elliptical.element.prototype.__serviceLocator;return t?t(e):void 0},$serviceAsync:function(e,t){"function"==typeof e&&(t=e,e=void 0);var n=this,r=300,i=5,o=0,a=this.service(e);if(a&&void 0!==a)t(a);else var s=setInterval(function(){a=n.service(e),a&&void 0!==a?(clearInterval(s),t(a)):o>i?(clearInterval(s),t(null)):o++},r)}}),$.elementFactory=function(e){return function(t,n,r,i){var o,a=null,s=null,u=null,c=null,l=null,h=arguments.length;if(2>h)throw"Error: Element requires a minimum of two parameter types: tag name and a singleton for the prototype";if(2===h){if(l=n,"object"==typeof t)throw"Error: Element requires a string name parameter";if("object"!=typeof n)throw"Error: Element requires a singleton for the prototype";if(o=d(t),o.err)throw"Error: Element requires a string tag name and a prototype";s=o.name,u=t}else if(3===h)if(l=r,"object"==typeof t){if("string"!=typeof n)throw"Error: Element requires a string tag name";if("object"!=typeof r)throw"Error: Element requires a singleton for the prototype";c=t,o=d(n),s=o.name,u=n}else u=t,a=n,o=d(t),s=o.name;else l=i,c=t,u=tagName,a=r,o=d(n),s=o.name;if(a&&(f.isArray(a)?a.forEach(function(e){Object.assign(l,e)}):e=a),!c){var p=HTMLElement.prototype;p._name="HTMLElement",c=p}u=u.replace(".","-"),l._tagName=u,$.widget(s,e,l);var v=s.split(".")[1];try{$.widget.register(v,u,c)}catch(m){}}},$.element=$.elementFactory($.elliptical.element),n.register();for(var p in $.widget)$.element[p]=$.widget[p];return $.element.serviceLocator=function(e,t){var n={__serviceLocator:e.bind(t)};$.extend($.elliptical.element.prototype,n)},$}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(request("elliptical-utils","observable-component")):"function"==typeof define&&define.amd?define(["elliptical-utils","observable-component"],t):e.returnExports=t(e.elliptical.utils,e.elliptical.observable)}(this,function(e,t){var n=t.cache;n._initCacheElement=function(){var e=this.$cache();this._data.set("$cache",e)};var r=t.pubsub,i=t.scope,o={scopeBind:!0,objectAssign:!1};i=Object.assign({},i,o);var a=t.template,s={options:{scope:null},_initElement:function(){this._initCacheElement(),this._initScopeElement(),this._initTemplateElement(),this._beforeInitComponent(),this._initComponentElement()},_beforeInitComponent:$.noop,_initComponentElement:function(){this.$viewBag=this._viewBag(),this.__setScope(),this._initComponent(),this._bindPublicComponentMethods(),this._bindSubscriptions(),this.__subscriber(),this.__publisher()},__setScope:function(){var e=this.options.data;if(!e){var t=this._viewBag(),n=this.options.scope;n&&(this.options.objectAssign?this.$scope=t[n]:this.$scope[n]=t[n])}},_initComponent:$.noop,__subscriber:function(){var e=this,t=this.options.channel,n=this.options.event;this._data.set("_synced",!1),t&&"sync"===n&&this._subscribe(t+".sync",function(t){e._data.get("_synced")||(e._data.set("_synced",!0),e._dispose(),e.$scope=t,e._rebind(),e._onSyncSubscribe())})},__publisher:function(){var e=this.options.channel,t=this.options.event,n=this,r=6,i=0;if(e&&!t)if(this._data.get("scopeObserver"))this._publish(e+".sync",this.$scope);else var o=setInterval(function(){n._data.get("scopeObserver")?(clearInterval(o),n._publish(e+".sync",n.$scope)):r>i?i++:clearInterval(o)},300)},_viewBag:function(){return window.__viewData||(window.__viewData={}),window.__viewData},_onSyncSubscribe:$.noop,_scopedContextModel:function(){var e=this._viewBag();return i=this.options.scope,i?e[i]:void 0},__onTemplateVisibility:function(){var e=this.element[0];e.hasAttribute("ui-preload")&&e.removeAttribute("ui-preload"),this._onTemplateVisibility()},_onTemplateVisibility:function(){},_bindPublicComponentMethods:function(){var e=this,t=this.element[0];t.onScopeChange=function(t){e.__notify=function(e){t&&t(e)}},t.$rebind=function(){e.$rebind()},t.changeReport=function(t,n){return e.changeReport(t,n)}},runInit:function(){this._initComponent()}};s=Object.assign(n,r,i,a,s),$.element("elliptical.component",s),$.component=$.elementFactory($.elliptical.component);for(var u in $.element)$.component[u]=$.element[u];return $}),function(){function e(e){try{return e.hasAttribute("content-init")?!1:null===e.getAttribute("definition")}catch(t){return!1}}function t(e){var t=/href|tcmuri|rowspan|colspan|class|nowrap|cellpadding|cellspacing|ea/;return t.test(e)}function n(e){return"false"===e&&(e=!1),"true"===e&&(e=!0),e}var r={linkImports:[],importElements:[],upgradeElementQueueFlag:!1,mutationsArray:[]},i=elliptical.mutation.summary,o='link[rel="import"][property="elliptical"]',a="OnDocumentMutation",s="WebComponentsReady",u="HTMLImportsLoaded",c="parse-attr",l=100,d=500,f=800,h=15,p=0,v=40,m={template:function(e){if(e.content)return!1;for(var t,n,r,i,o=e.getElementsByTagName("template"),a=o.length,s=0;a>s;++s){for(t=o[s],n=t.childNodes,r=n.length,i=e.createDocumentFragment();n[0];)i.appendChild(n[0]);t.content=i}}},g={webComponentsReady:function(){setTimeout(function(){var e=document.createEvent("CustomEvent");e.initCustomEvent(s,!0,!0,{}),document.dispatchEvent(e)},d)}},b={start:function(){$(document).on(a,this.on.bind(this))},on:function(e,t){setTimeout(function(){var e=t.added;e&&t.added.length>0&&(_.linkImportMutations(e),_.customElementMutations(e))},d)}},y={parser:function(e){var t=document.implementation.createHTMLDocument("");return e.toLowerCase().indexOf("<!doctype")>-1?t.documentElement.innerHTML=e:t.body.innerHTML=e,t},walk:function(e,t,n){for(t(e),e=e.firstChild;e;)this.walk(e,t),e=e.nextSibling;n()}},_={bindLinkImports:function(){var e=$(o),t=this.recursivelyGetLinks(e);this.parseLinkImports(t)},linkImportMutations:function(e){var t=$(e).selfFind(o);if(t[0]){r.upgradeElementQueueFlag=!0;var n=this.recursivelyGetLinks(t);0===n.length?this.queueLinkImportMutations(t):this.verifyLinkImports(n)?this.throwReady(n):this.queueLinkImports(n)}},throwReady:function(e){g.webComponentsReady(),r.upgradeElementQueueFlag=!1,this.parseLinkImports(e)},verifyLinkImports:function(e){var t=e[0],n=this.getTemplateFromImport(t);return n[0]},queueLinkImports:function(e){var t=this;this.onLinkImportsComplete(e,function(e){t.throwReady(e)})},onLinkImportsComplete:function(e,t){var n=this,r=0,i=setInterval(function(){var o=n.verifyLinkImports(e);o||r>v?(clearInterval(i),t(e)):r++},l)},getTemplateFromImport:function(e){var t=e["import"];return $(t).find("template").not("[template]")},queueLinkImportMutations:function(e){var t=this,n=setInterval(function(){e=t.recursivelyGetLinks(e),e[0]&&(clearInterval(n),t.verifyLinkImports(e))},l)},recursivelyGetLinks:function(e){var t=[],n=this;return $.each(e,function(e,r){var i=n.recurseLink(r,[]);t=t.concat(i)}),t},recurseLink:function(e,t){if(e["import"]){r.linkImports.push(e),t.push(e);var n=e["import"].all;if(void 0!==n){for(var i=n.length,o=0;i>o;o++){var a=n[o],s=a["import"];void 0!==s&&this.recurseLink(a,t)}return t}return t}return t},parseLinkImports:function(e){var t=this;$.each(e,function(e,n){t.parseImportDocument(n,e)})},parseImportDocument:function(e,t){var n=this.getTemplateFromImport(e),i=n[0];if(i){var o=i.parentNode,a=o.tagName,s=this.checkForDuplicate(a);if(!s){var u=i.innerHTML,c=this.parseAttribute(o)?!0:!1,l={tag:a,index:t,parse:c,str:u,template:i};r.importElements.push(l)}}},doUpgrade:function(e){var t=e.dataset.upgraded;return void 0===t||"false"===t},upgradeElement:function(e,t,n,r,i){var o,a=$(e);if(""===r)return this.setAttributes(e,a),void this.publishUpgradeEvent(e,i);if(t&&e.attributes){o=this.elementAttributeBind(e,r),o=this.distributeContent(o,e),a.empty();try{e.appendChild(o),this.setAttributes(e,a),this.publishUpgradeEvent(e,i)}catch(s){console.log(s)}}else{var u=n.content;if(!u)return void this.fireCallback(e,i);u.childNodes&&0===u.childNodes.length&&(n=this.createTemplateNode(r)),o=n.content.cloneNode(!0),o=this.distributeContent(o,e),a.empty(),e.appendChild(o),this.setAttributes(e,a),this.publishUpgradeEvent(e,i)}},publishUpgradeEvent:function(e,t){$(document).trigger("OnElementImport",{node:e}),this.fireCallback(e,t)},fireCallback:function(e,t){t&&t(e)},setAttributes:function(e,t){t.find("[content-init]").removeAttr("content-init"),t.find("content").remove(),e.dataset.upgraded=!0},parseAttribute:function(e){var t=e.getAttribute(c);return t||""===t},elementAttributeBind:function(e,t){var n=this;$.each(e.attributes,function(e,n){var r=new RegExp("\\[\\["+n.name+"\\]\\]","g");t=t.replace(r,n.value)}),t=t.replace(/\[\[(.*?)]]/g,""),t=t.replace(/\[\[/g,"");var r=n.createTemplateNode(t);return r.content.cloneNode(!0)},parseElementImport:function(e,t,n,i){for(var o=r.importElements.length,a=null,s=0;o>s;s++){var u=r.importElements[s].tag;if(u.toLowerCase()===e.toLowerCase()){a=r.importElements[s];break}}if(a){var c=Object.getPrototypeOf(t);void 0!==c._tagName&&(c._imported=!0);var l=a.parse,d=a.str,f=a.template;this.doUpgrade(t)?this.upgradeElement(t,l,f,d,n):n&&n(null)}else i&&this.queueParsingRequest(e,t,n)},queueParsingRequest:function(e,t,n){var r=0,i=this,o=setInterval(function(){var a=Object.getPrototypeOf(t),s=!1;a&&void 0!==a._tagName&&a._imported&&void 0!==a._imported&&(s=!0),s||r>h?(n&&n(null),clearTimeout(o)):(r++,i.parseElementImport(e,t,n,!1))},d)},distributeContent:function(e,t){var n=t.innerHTML;if(n=n.trim?n.trim():n.replace(/^\s+/,""),""===n)return e;var r=e.querySelectorAll("content");if(r){if(r.length>1){for(var i=0;i<r.length;i++){var o=r[i].getAttribute("select");if(o){var a=t.querySelector(o);a&&$(r[i]).replaceWith(a)}}return e}return $(r[0]).replaceWith(n),e}var s=e.querySelector("form");return s?($(s).replaceWith(n),e):e},createTemplateNode:function(e){e="<template>"+e+"</template>";var t=(new DOMParser).parseFromString(e,"text/html");return t||(t=y.parser(e)),m.template(t),t.querySelector("template")},checkForDuplicate:function(e){for(var t=r.importElements.length,n=!1,i=0;t>i;i++){var o=r.importElements[i];if(e===o.tag){n=!0;break}}return n},customElementMutations:function(e){if(r.upgradeElementQueueFlag)var t=setInterval(function(){r.upgradeElementQueueFlag||(clearInterval(t),w.discover(e))},l);else w.discover(e)}},w={discover:function(e){var t=this;setTimeout(function(){t.discoverCustomElementDefinitions(e)},f)},discoverCustomElementDefinitions:function(e,t){var n=$.elliptical.definitions;n.forEach(function(n,r){var i=t?$(e).find(n):$(e).selfFind(n);i&&i.length>0&&this.instantiateCustomElements(i,r)})},instantiateCustomElements:function(e,t){var n=this;$.each(e,function(e,r){n.instantiate(r,t)})},instantiate:function(t,n){var r=$(t),i=r.attr("camel-case");void 0===i&&(i=!0);var o=e(t);if(o){var a=this.isInstantiated(t,n);if(!a){var s=this.getOpts(t,i);r[n](s)}}},isInstantiated:function(e,t){var n=e.dataset;return void 0===n.upgraded&&(n.upgraded=!1),t===$.data(e,"custom-"+t)},getOpts:function(e,r){void 0===r&&(r=!0);var i={};return $.each(e.attributes,function(e,o){var a=o.name,s=o.value;if(!t(a)){var u=/data-/;u.test(a)&&(a=a.replace("data-","")),r&&"false"!==r?"template"!==a?i[a.toCamelCase()]=n(s):i[a]=n(s):i[a.toCamelCase()]=n(s)}}),i}};window.addEventListener(u,function(e){_.bindLinkImports()}),window.addEventListener(s,function(e){0===p&&(w.discoverCustomElementDefinitions(document,!0),p=1)}),i.connect(),b.start();var x={};x.upgradeElement=function(e,t,n){_.parseElementImport(e,t,n,!0)},x.instantiate=function(e,t){w.instantiate(e,t)},window._HTML5Imports=x}();