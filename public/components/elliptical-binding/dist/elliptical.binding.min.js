!function(n,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils"),require("elliptical-mutation-summary")):"function"==typeof define&&define.amd?define(["elliptical-utils","elliptical-mutation-summary"],t):(n.elliptical=n.elliptical||{},n.elliptical.binding=t(n.elliptical.utils,n.elliptical.mutation.summary),n.returnExports=n.elliptical.binding)}(this,function(n,t){function e(){$(document).on("OnDocumentMutation",function(n,t){t.added&&l(t.added),t.removed&&a(t.removed)})}function o(){return"ontouchend"in document?"touchstart":"click"}function i(){return"ontouchend"in document?"touchend":"click"}function c(){return"ontouchend"in document?"tap":"click"}function u(n,t){v||e(),v=!0;var u=I.obj;u.fn=t,u.context=this,b.set(n,u),this.click=o(),this.press=i(),this.tap=c()}function l(n){b.forEach(function(t,e){var o=$(n).selfFind("["+h+'="'+e+'"]');o[0]&&$.each(o,function(n,o){var i=p.id(8);o._EA_BINDING_ID=i;var c=N.obj;c.node=o,c.context=t.context,c.attrValue=e,c.fn=t.fn,y.set(i,c),r(t.context,o,t.fn)})})}function r(n,t,e){setTimeout(function(){e.call(n,t)},g)}function a(n){var t=$(n).selfFind(m);t.length&&t.length>0&&$.each(t,function(n,t){t._EA_BINDING_ID&&d(t)})}function d(n){var t=n._EA_BINDING_ID,e=y.get(t);void 0===e?s(n):f(e,n,t)}function f(n,t,e){n.context.dispose(),n.context=null,t&&t.parentNode&&t.parentNode.removeChild(t),n.fn=null,n.node=null,y["delete"](e)}function s(n){y.forEach(function(t,e){n===e.node&&f(e,n,t)})}var p=n.random,m="[ea-bind]",h="ea-bind",v=!1,g=500,x=250,b=new Map,y=new Map;t.connect();var I={get obj(){return{fn:null,context:null}}},N={get obj(){return{node:null,context:null,fn:null,attrValue:null}}};return $(function(){var n=document.querySelectorAll(m);n.length&&setTimeout(function(){l(n)},x)}),u.prototype.jsonParseMessage=function(n){try{var t=JSON.parse(n);return t.message?t.message:n}catch(e){return n}},u.prototype.dispose=function(){},function(n,t){return new u(n,t)}});