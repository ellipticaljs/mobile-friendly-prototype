!function(){void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var e=/function\s([^(]{1,})\(/,t=e.exec(this.toString());return t&&t.length>1?t[1].trim():""},set:function(e){}})}(),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t():"function"==typeof define&&define.amd?define([],t):(e.elliptical.delegate=e.elliptical.delegate||{},e.elliptical.delegate.request=t(),e.returnExports=e.elliptical.delegate.request)}(this,function(){var e="ontouchend"in document?"touchstart tap click":"click",t="OnDocumentRequest",i="a:not([data-route])",n=$(document);return function(){function o(e){var i=$(e.currentTarget),o=i.attr("href");if(void 0!==o&&"#"!==o){var l=i.attr("data-propagation");l&&e.stopPropagation(),e.preventDefault();var r={method:"get",href:o};$.each(this.attributes,function(e,t){r[t.name.toCamelCase()]=t.value}),r.route=o,n.trigger(t,r)}}n.on(e,i,o)}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-document")):"function"==typeof define&&define.amd?define(["elliptical-document"],t):(e.elliptical.delegate=e.elliptical.delegate||{},e.elliptical.delegate.submit=t($),e.returnExports=e.elliptical.delegate.submit)}(this,function(e){var t="submit",i='form[role="form"]',n="OnDocumentRequest",o="OnDocumentSubmit",l=e(document),r=!1;return function(){function a(t){t.stopPropagation(),t.preventDefault();var i=e(t.currentTarget),r=i.document(),a={route:this.action,body:r,method:e(this).attr("method"),element:this};l.trigger(n,a),l.trigger(o,a)}r||(r=!0,l.on(t,i,a))}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils"),require("elliptical-class"),require("elliptical-location"),require("elliptical-soa"),require("elliptical-utils")):"function"==typeof define&&define.amd?define(["elliptical-utils","elliptical-class","elliptical-location","elliptical-soa"],t):(e.elliptical.Request=t(e.elliptical.utils,e.elliptical.Class,e.elliptical,e.elliptical),e.returnExports=e.elliptical.Request)}(this,function(e,t,i,n){var o,l=i.Location,r=i.url,a=n.$Cookie,s=n.$Session;return o=t.extend({},{init:function(){this.params={},this.query={},this.body={},this.route={},this.files={},Object.defineProperties(this,{path:{get:function(){return l.path},configurable:!1},url:{get:function(){return l.href},configurable:!1},protocol:{get:function(){var e=l.protocol;return e=e.replace(":","")},configurable:!1},get:{get:function(e){return console.log('warning: "get" not implemented on the browser.'),!1},configurable:!1},accepted:{get:function(){return console.log('warning: "accepted" not implemented on the browser.'),!1},configurable:!1},accepts:{get:function(){return console.log('warning: "accepts" not implemented on the browser.'),!1},configurable:!1},is:{get:function(){return console.log('warning: "is" not implemented on the browser.'),!1},configurable:!1},xhr:{get:function(){return!0},configurable:!1},acceptsLanguage:{get:function(e){return console.log('warning: "acceptsLanguage" not implemented on the browser.'),!1},configurable:!1},acceptsCharset:{get:function(e){return console.log('warning: "acceptsLanguage" not implemented on the browser.'),!1},configurable:!1},acceptsCharsets:{get:function(){return!1},configurable:!1},acceptedLanguages:{get:function(){return!1},configurable:!1},originalUrl:{get:function(){return!1},configurable:!1},subdomains:{get:function(){return!1},configurable:!1},secure:{get:function(){return!1},configurable:!1},stale:{get:function(){return console.log('warning: "stale" not implemented on the browser.'),!1},configurable:!1},fresh:{get:function(){return console.log('warning: "fresh" not implemented on the browser.'),!1},configurable:!1},host:{get:function(){return window.location.hostname},configurable:!1},ip:{get:function(){},configurable:!1},ips:{get:function(){return console.log('warning: "ips" not implemented on the browser.'),!1},configurable:!1},signedCookies:{get:function(){return{}},configurable:!1}}),this.session={};for(var e=0;e<s.count;e++){var t=s.key(e);this.session[t]=s.get(t)}this.cookies={};for(var i=0;e<a.count;i++){var n=a.key(i);this.cookies[n]=a.get(n)}this._parsedUrl={},this._parsedUrl.pathname=l.path,this._parsedUrl.virtualize=function(e){var t=window.elliptical.$hashTag;return t&&(e=r.hashTagFormat(r)),e=r.pathComponent(e)},this.header=function(e){switch(e){case"Referer":return document.referrer}}}})}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils"),require("elliptical-class"),require("elliptical-location"),require("elliptical-soa")):"function"==typeof define&&define.amd?define(["elliptical-utils","elliptical-class","elliptical-location","elliptical-soa"],t):(e.elliptical.Response=t(e.elliptical.utils,e.elliptical.Class,e.elliptical,e.elliptical),e.returnExports=e.elliptical.Response)}(this,function(e,t,i,n){var o,l=i.Location,r=n.$Cookie,a=n.$Session;return o=t.extend({req:{}},{init:function(e){this.req=e,this.charset={},this.context={},this.transition={},this.locals={},this.status=function(e){},this.set=function(e,t){},this.get=function(e){},this.cookie=function(e,t,i){r.set(e,t,i)},this.clearCookie=function(e,t){r["delete"](e)},this.redirect=function(e,t){"undefined"==typeof t&&(t=e),t=decodeURIComponent(t),l.redirect(t)},this.session=function(e,t){a.set(e,t)},this.location=function(e){},this.send=function(e,t){},this.json=function(e,t){},this.jsonp=function(e,t){},this.type=function(e){},this.format=function(e){},this.attachment=function(e){},this.sendfile=function(e,t,i){},this.download=function(e,t,i){},this.links=function(e){},this.scrollTop=function(e){void 0===e&&(e=100),setTimeout(function(){window.scrollTo(0,0)},e)}},render:function(e,t,i,n){var o=this.req,l=void 0,r=void 0,a=null,s=null,c=arguments.length;if(0===c&&(l={name:o.__name,view:o.__action},r={}),1===c&&("string"==typeof e?(l=e,r={}):e instanceof Function?(s=e,l={name:o.__name,view:o.__action},r={}):(l={name:o.__name,view:o.__action},r=e)),2==c&&("object"==typeof e?(r=e,"string"==typeof t||null===t?l=t:t instanceof Function?(s=t,l={name:o.__name,view:o.__action}):(a=t,l={name:o.__name,view:o.__action})):(r={},l=e,t instanceof Function?s=t:a=t)),3==c&&("object"==typeof e?(r=e,"string"==typeof t||null==t?(l=t,i instanceof Function?s=i:a=i):(l={name:o.__name,view:o.__action},a=t,s=i)):(r={},l=e,s=i,a=t)),4===c&&(l=t,r=e,a=i,s=n),c>4)throw"View render does not support more than 4 parameters";if(l){if("string"==typeof l){var u=l.split(".");2===u.length?l={name:u[0],view:u[1]}:1===u.length&&(l={name:o.__name,view:l})}}else l={name:o.__name,view:o.__action};!s instanceof Function&&(s=null),this.app.render(r,l,a,o,s)},setContext:function(e){var t=this.req;t.session=t.session||{},Object.assign(t.session,e)},contextHelpers:function(){var e=this.req,t=e.app;return new t.contextHelpers},formContext:function(){return{submitLabel:{css:"",cssDisplay:"",message:"&nbsp;"}}},dispatch:function(e,t,i){e?t(e):i.apply(this,arguments)}})}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("async"),require("elliptical-utils"),require("elliptical-soa"),require("elliptical-event"),require("elliptical-location"),require("elliptical-view"),require("elliptical-template"),require("elliptical-container"),require("./request"),require("./response"),require("./delegate.request"),require("./delegate.submit"),require("./function.patch")):"function"==typeof define&&define.amd?define(["async","elliptical-utils","elliptical-soa","elliptical-event","elliptical-location","elliptical-view","elliptical-container","./request","./response","elliptical-router","./delegate.request","./delegate.submit","./function.patch"],t):(e.elliptical.application=t(e.async,e.elliptical.utils,e.elliptical,e.elliptical.Event,e.elliptical,e.elliptical.View,e.elliptical.$Template,e.elliptical.Container,e.elliptical.Request,e.elliptical.Response,e.elliptical.delegate.request,e.elliptical.delegate.submit),e.returnExports=e.elliptical.browser)}(this,function(e,t,i,n,o,l,r,a,s,c,u,p){var f=o.Router,h=o.Location,d=o.url,g=t.network,m="OnRouteDispatch",v="OnDocumentHistory",_="appRouter",w="production",b="development",y="data-environment",q="/",x="get",T="",R="html";return{init:function(){window.elliptical.$hashTag=!1,this.history=!1,this.async=e,this.factory=i.factory,this.contextSettings(),this.setEnvironment(),this.$setDefaultProviders(),this.cache={},this.stack=[],this.locations=[],this.Router=f,this.utils=t,this._defineProps(),this.isHistory=!1,this.container=a;var n=function(e){e.router=function(){e.next()},e.router.__name=_;var t=q,i=e.router;e.stack.push({route:t,handle:i})};n(this)},_defineProps:function(){this._debug=!1,this._virtualRoot=q,this._hashTag=!1,this.settings.siteTitle=T;var e=this;Object.defineProperties(this,{debug:{get:function(){return e._debug},set:function(t){f.debug=t,e._debug=t}},hashTag:{get:function(){return e._hashTag},set:function(t){f.hashTag=t,e._hashTag=t,window.elliptical.$hashTag=t}},virtualRoot:{get:function(){return e._virtualRoot},set:function(t){f.virtualRoot=t,e._virtualRoot=t,e.context.rootPath=t,window.elliptical.$virtualRoot=t}},siteRootTitle:{get:function(){return e.settings.siteTitle},set:function(t){e.settings.siteTitle=t}}})},$setDefaultProviders:function(){var e=i.Service;e.$paginationProvider=i.$Pagination,l.$provider=r},setEnvironment:function(e){function t(e){var t=$(R),i=t.attr(y);return"undefined"!=typeof i?(e.context.ENV=i.toLowerCase(),!0):!1}function i(e){var t=document.location.hostname;e.context.ENV=g.isLocalHost(t)?b:w}"undefined"!=typeof e?this.context.ENV=e.toLowerCase():t(this)||i(this)},getPort:function(){return void 0},getEnvironment:function(){return this.context.ENV},configure:function(e,t){"function"==typeof e?(t=e,t.call(this)):"string"==typeof e&&(e.toLowerCase()===w&&this.context.ENV===w?t.call(this):e.toLowerCase()===b&&this.context.ENV===b&&t.call(this))},config:function(){},get:function(e,t){f.get(e,t)},post:function(e,t){f.post(e,t)},put:function(e,t){f.put(e,t)},"delete":function(e,t){f["delete"](e,t)},contextHelpers:function(){this.form=function(){return{submitLabel:{cssDisplay:"hidden",message:"&nbsp;"}}}},contextSettings:function(){this.context={},this.context.virtualRoot=q,this.isServer=!1,this.isBrowser=!0,this.settings=this.settings||{},this.settings.config={cookie:{},session:{},providers:{}}},location:function(e,t){e.substring(0,1)!=q&&(e=q+e),"object"!=typeof t&&(t=[]);var i={path:e,exclude:t};this.locations.push(i)},parseRoute:function(e){return this.hashTag?d.hashTagFormat(e):e},onDispatchRequest:function(){var e=this;n.on(m,function(t){if(e.__cancelledRoute&&e.__route===t.route)e.__cancelledRoute=!1,e.__route=null;else{var i=t.route,n=t.handlers;e.dispatch(i,n)}})},use:function(e,t){var i=this.stack;if("string"!=typeof e&&(t=e,e="/"),"function"!=typeof t)return void(this.virtualRoot=e);if(t.__name&&t.__name===this.router.__name)for(var n=0;n<i.length;n++){var o=i[n].handle;if(o.__name&&o.__name===this.router.__name||0===o.length){i.splice(n,1);break}}try{if(0===t.length&&void 0===t.__name)return}catch(l){}i.push({route:e,handle:t})},dispatch:function(e,t){function i(e){return e.substring(0,1)!=q&&(e=q+e),e}function n(e,t,i){function n(r){var a=e[l++];"undefined"!=typeof a&&("undefined"!=typeof r?4===a.length?(t=o(t,a),i=o(i,a),a(r,t,i,n)):n(r):a.length<4?(t=o(t,a),i=o(i,a),a(t,i,n)):n())}var l=0;v.next=n,n()}function o(e,t){return e.__name=t.__name,e.__action=t.__action,e}e=i(e);for(var l=this.stack,r=[],a=0;a<l.length;a++){var u=l[a].handle;if(u.__name&&u.__name===this.router.__name)for(var p=0;p<t.length;p++)r.push(t[p]);else{var h=l[a].route,d=e.toLowerCase().indexOf(h);d>-1&&(e.length===h.length||e.substring(d+1,0)===q)&&r.push(l[a].handle)}}var g=new s;g.route=e;var m=new c(g),v=this;g.app=m.app=v,g.res=m,m.req=g,this.history&&(m.redirect=function(e){f.location(e,x,null)}),n(r,g,m)},server:function(e){},browser:function(e){e.call(this)},defaultMiddleware:function(e,t){},bootstrap:function(e,t,i){},listen:function(e,t){var i=this,n=null,o=arguments.length;0===o&&p(),1===o&&("function"==typeof e?(n=e,p()):this._start(e)),2===o&&(n=t,this._start(e)),n&&$(function(){setTimeout(function(){n.call(i)},CALLBACK_EXECUTION_DELAY)})},start:function(){this._start(!0)},_start:function(e){if(!e)return void p();var t=this,i=this.getEnvironment();this.isHistory=!0,p(),u(),this.onDispatchRequest(),this._setLocationHistoryService(),i===w&&(f.debug=!1),f.start(),t.history=function(e){document.addEventListener(v,function(i){var n=i.detail;e.call(t,n,t.container)})}},_setLocationHistoryService:function(){this.history=!0,h.redirect=function(e){f.location(e,x,null)},h.reload=function(){var e=h.href;f.location(e,x)}},onBeforeRender:function(e){"function"==typeof e&&(this.viewCallback=e)},render:function(e,t,i,n,o){function r(e){a(e);var n=$(p);d.render(t,e,function(e,t){if(f){var l=$.parseHTML(t,document,!0);n.append(l),o&&o instanceof Function&&o(null,t)}else u&&void 0!==u?d.transition(p,t,i,o):(n.html(t),o&&o instanceof Function&&o.call(this))})}function a(e){e?window.__viewData=e:window.__viewData||(window.__viewData={})}function s(e,t){return e.PageTitle?t.settings.siteTitle&&(e.PageTitle=t.settings.siteTitle+"-"+e.PageTitle):t.settings.siteTitle&&(e.PageTitle=t.settings.siteTitle),e}e=e||{};var c=this,u=null,p=null,f=!1,h=null;i&&void 0!==i&&(u=i.transition,p=i.selector,f=i.append,h=i.delay);var d=new l;try{Object.assign(e,c.context),n.session&&Object.assign(e,n.session)}catch(g){}e=s(e,c),e.rootPath&&e.rootPath===q&&(e.rootPath=""),p&&void 0!==p||(p=l.selector);var m=h&&void 0!==h?parseInt(h):0;"undefined"!=typeof c.viewCallback?c.viewCallback(n,this,e,function(e){setTimeout(function(){r(e)},m)}):setTimeout(function(){r(e)},m)}}}),function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("elliptical-utils"),require("elliptical-soa"),require("elliptical-location"),require("elliptical-event"),require("elliptical-middleware"),require("elliptical-template"),require("elliptical-http"),require("elliptical-crypto"),require("./application"),require("./response"),require("./request")):"function"==typeof define&&define.amd?define(["elliptical-utils","elliptical-soa","elliptical-location","elliptical-event","elliptical-middleware","elliptical-http","elliptical-crypto","./application","./response","./request"],t):(e.elliptical.browser=t(e.elliptical.utils,e.elliptical,e.elliptical.Location,e.elliptical.Event,e.elliptical.middleware,e.elliptical.$Template,e.elliptical.http,e.elliptical.crypto,e.elliptical.application,e.elliptical.Response,e.elliptical.Request),e.returnExports=e.elliptical.browser)}(this,function(e,t,i,n,o,l,r,a,s,c,u){function p(){var e=function(){};return Object.assign(e,s),e.init(),e}t.Try=function(e,t){var i=function(t){var i="Page Not Found";t&&(i=t);var n={statusCode:404,message:i,description:"The resource you are looking for could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly."};e(n)},n={throwNotFound:i};try{t.apply(n,arguments)}catch(o){e(o)}};var f=p;return f.Event=n,f.application=s,f.Response=c,f.Request=u,f.http=r,f.crypto=a,f.Location=location.Location,f.$Template=l,Object.assign(t,o),Object.assign(f,t),window.elliptical=f,window.elliptical.$virtualRoot="/",f});